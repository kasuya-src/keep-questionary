import{f as _e,a as ie,c as Wn}from"../chunks/uoBHOyeP.js";import{w as iu,o as Oh}from"../chunks/D-rhjzdE.js";import{h as Be,g as xh,f as ou,u as U,av as Mh,i as zh,H as $h,j as Pa,k as us,l as nr,e as Xn,a1 as au,ao as Lh,a8 as Ca,c as ct,b as Ti,s as Fh,am as Ki,aI as cu,Z as ka,q as Uh,aJ as jh,aK as Bh,aL as Zh,a as Ii,aM as bt,r as uu,p as lu,aN as ai,ai as Ai,al as qh,d as Gh,R as Hh,aO as Kh,aP as Wi,aq as Cs,aQ as hu,aR as Wh,aS as fu,t as du,a0 as bi,aT as Qh,aU as Jh,aV as Xh,aG as Yh,z as ef,_ as pu,G as Qi,aw as Va,aF as mu,L as X,N as Y,M as ee,a9 as gu,K as Ji,v as Si,J as Pe,aW as Xi,aH as Da,aX as tf,y as nf,I as Qn}from"../chunks/DM_gYC9Z.js";import{i as He,s as Yi,a as eo}from"../chunks/B44fPK-A.js";import{d as rf,e as _u,s as Ce}from"../chunks/Ny3kFZQR.js";import{i as sf}from"../chunks/CoKu9wX_.js";function Tt(t,e){return e}function of(t,e,n){for(var r=[],s=e.length,o,a=e.length,u=0;u<s;u++){let g=e[u];lu(g,()=>{if(o){if(o.pending.delete(g),o.done.add(g),o.pending.size===0){var T=t.outrogroups;Ri(Ki(o.done)),T.delete(o),T.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var h=r.length===0&&n!==null;if(h){var f=n,p=f.parentNode;qh(p),p.append(f),t.items.clear()}Ri(e,!h)}else o={pending:new Set(e),done:new Set},(t.outrogroups??(t.outrogroups=new Set)).add(o)}function Ri(t,e=!0){for(var n=0;n<t.length;n++)Gh(t[n],e)}var Na;function It(t,e,n,r,s,o=null){var a=t,u=new Map;Be&&xh();var h=null,f=Mh(()=>{var V=n();return cu(V)?V:V==null?[]:Ki(V)}),p,g=!0;function T(){S.fallback=h,af(S,p,a,e,r),h!==null&&(p.length===0?(h.f&bt)===0?uu(h):(h.f^=bt,Yn(h,null,a)):lu(h,()=>{h=null}))}var R=ou(()=>{p=U(f);var V=p.length;let N=!1;if(Be){var B=zh(a)===$h;B!==(V===0)&&(a=Pa(),us(a),nr(!1),N=!0)}for(var F=new Set,j=ct,Z=Fh(),H=0;H<V;H+=1){Be&&Xn.nodeType===au&&Xn.data===Lh&&(a=Xn,N=!0,nr(!1));var re=p[H],v=r(re,H),m=g?null:u.get(v);m?(m.v&&Ca(m.v,re),m.i&&Ca(m.i,H),Z&&j.skipped_effects.delete(m.e)):(m=cf(u,g?a:Na??(Na=Ii()),re,v,H,s,e,n),g||(m.e.f|=bt),u.set(v,m)),F.add(v)}if(V===0&&o&&!h&&(g?h=Ti(()=>o(a)):(h=Ti(()=>o(Na??(Na=Ii()))),h.f|=bt)),Be&&V>0&&us(Pa()),!g)if(Z){for(const[y,w]of u)F.has(y)||j.skipped_effects.add(w.e);j.oncommit(T),j.ondiscard(()=>{})}else T();N&&nr(!0),U(f)}),S={effect:R,items:u,outrogroups:null,fallback:h};g=!1,Be&&(a=Xn)}function af(t,e,n,r,s){var m;var o=e.length,a=t.items,u=t.effect.first,h,f=null,p=[],g=[],T,R,S,V;for(V=0;V<o;V+=1){if(T=e[V],R=s(T,V),S=a.get(R).e,t.outrogroups!==null)for(const y of t.outrogroups)y.pending.delete(S),y.done.delete(S);if((S.f&bt)!==0)if(S.f^=bt,S===u)Yn(S,null,n);else{var N=f?f.next:u;S===t.effect.last&&(t.effect.last=S.prev),S.prev&&(S.prev.next=S.next),S.next&&(S.next.prev=S.prev),At(t,f,S),At(t,S,N),Yn(S,N,n),f=S,p=[],g=[],u=f.next;continue}if((S.f&ai)!==0&&uu(S),S!==u){if(h!==void 0&&h.has(S)){if(p.length<g.length){var B=g[0],F;f=B.prev;var j=p[0],Z=p[p.length-1];for(F=0;F<p.length;F+=1)Yn(p[F],B,n);for(F=0;F<g.length;F+=1)h.delete(g[F]);At(t,j.prev,Z.next),At(t,f,j),At(t,Z,B),u=B,f=Z,V-=1,p=[],g=[]}else h.delete(S),Yn(S,u,n),At(t,S.prev,S.next),At(t,S,f===null?t.effect.first:f.next),At(t,f,S),f=S;continue}for(p=[],g=[];u!==null&&u!==S;)(h??(h=new Set)).add(u),g.push(u),u=u.next;if(u===null)continue}(S.f&bt)===0&&p.push(S),f=S,u=S.next}if(t.outrogroups!==null){for(const y of t.outrogroups)y.pending.size===0&&(Ri(Ki(y.done)),(m=t.outrogroups)==null||m.delete(y));t.outrogroups.size===0&&(t.outrogroups=null)}if(u!==null||h!==void 0){var H=[];if(h!==void 0)for(S of h)(S.f&ai)===0&&H.push(S);for(;u!==null;)(u.f&ai)===0&&u!==t.fallback&&H.push(u),u=u.next;var re=H.length;if(re>0){var v=null;of(t,H,v)}}}function cf(t,e,n,r,s,o,a,u){var h=(a&Bh)!==0?(a&Zh)===0?Uh(n,!1,!1):ka(n):null,f=(a&jh)!==0?ka(s):null;return{v:h,i:f,e:Ti(()=>(o(e,h??n,f??s,u),()=>{t.delete(r)}))}}function Yn(t,e,n){if(t.nodes)for(var r=t.nodes.start,s=t.nodes.end,o=e&&(e.f&bt)===0?e.nodes.start:n;r!==null;){var a=Ai(r);if(o.before(r),r===s)return;r=a}}function At(t,e,n){e===null?t.effect.first=n:e.next=n,n===null?t.effect.last=e:n.prev=e}function to(t,e){let n=null,r=Be;var s;if(Be){n=Xn;for(var o=Hh(document.head);o!==null&&(o.nodeType!==au||o.data!==t);)o=Ai(o);if(o===null)nr(!1);else{var a=Ai(o);o.remove(),us(a)}}Be||(s=document.head.appendChild(Ii()));try{ou(()=>e(s),Kh)}finally{r&&(nr(!0),us(n))}}const Oa=[...` 	
\r\fÂ \v\uFEFF`];function uf(t,e,n){var r=""+t;if(n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,a=0;(a=r.indexOf(s,a))>=0;){var u=a+o;(a===0||Oa.includes(r[a-1]))&&(u===r.length||Oa.includes(r[u]))?r=(a===0?"":r.substring(0,a))+r.substring(u+1):a=u}}return r===""?null:r}function lf(t,e,n,r,s,o){var a=t.__className;if(Be||a!==n||a===void 0){var u=uf(n,r,o);(!Be||u!==t.getAttribute("class"))&&(u==null?t.removeAttribute("class"):t.className=u),t.__className=n}else if(o&&s!==o)for(var h in o){var f=!!o[h];(s==null||f!==!!s[h])&&t.classList.toggle(h,f)}return o}function yu(t,e,n=!1){if(t.multiple){if(e==null)return;if(!cu(e))return Wh();for(var r of t.options)r.selected=e.includes(rr(r));return}for(r of t.options){var s=rr(r);if(fu(s,e)){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function hf(t){var e=new MutationObserver(()=>{yu(t,t.__value)});e.observe(t,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),du(()=>{e.disconnect()})}function Gr(t,e,n=e){var r=new WeakSet,s=!0;Wi(t,"change",o=>{var a=o?"[selected]":":checked",u;if(t.multiple)u=[].map.call(t.querySelectorAll(a),rr);else{var h=t.querySelector(a)??t.querySelector("option:not([disabled])");u=h&&rr(h)}n(u),ct!==null&&r.add(ct)}),Cs(()=>{var o=e();if(t===document.activeElement){var a=hu??ct;if(r.has(a))return}if(yu(t,o,s),s&&o===void 0){var u=t.querySelector(":checked");u!==null&&(o=rr(u),n(o))}t.__value=o,s=!1}),hf(t)}function rr(t){return"__value"in t?t.__value:t.value}const ff=Symbol("is custom element"),df=Symbol("is html");function Hr(t){if(Be){var e=!1,n=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var r=t.value;xa(t,"value",null),t.value=r}if(t.hasAttribute("checked")){var s=t.checked;xa(t,"checked",null),t.checked=s}}};t.__on_r=n,bi(n),Qh()}}function xa(t,e,n,r){var s=pf(t);Be&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=n)&&(e==="loading"&&(t[Jh]=n),t.removeAttribute(e))}function pf(t){return t.__attributes??(t.__attributes={[ff]:t.nodeName.includes("-"),[df]:t.namespaceURI===Xh})}function mf(t,e,n=e){var r=new WeakSet;Wi(t,"input",async s=>{var o=s?t.defaultValue:t.value;if(o=li(t)?hi(o):o,n(o),ct!==null&&r.add(ct),await Yh(),o!==(o=e())){var a=t.selectionStart,u=t.selectionEnd,h=t.value.length;if(t.value=o??"",u!==null){var f=t.value.length;a===u&&u===h&&f>h?(t.selectionStart=f,t.selectionEnd=f):(t.selectionStart=a,t.selectionEnd=Math.min(u,f))}}}),(Be&&t.defaultValue!==t.value||ef(e)==null&&t.value)&&(n(li(t)?hi(t.value):t.value),ct!==null&&r.add(ct)),pu(()=>{var s=e();if(t===document.activeElement){var o=hu??ct;if(r.has(o))return}li(t)&&s===hi(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}const ci=new Set;function ui(t,e,n,r,s=r){var o=n.getAttribute("type")==="checkbox",a=t;let u=!1;if(e!==null)for(var h of e)a=a[h]??(a[h]=[]);a.push(n),Wi(n,"change",()=>{var f=n.__value;o&&(f=Ma(a,f,n.checked)),s(f)},()=>s(o?[]:null)),pu(()=>{var f=r();if(Be&&n.defaultChecked!==n.checked){u=!0;return}o?(f=f||[],n.checked=f.includes(n.__value)):n.checked=fu(n.__value,f)}),du(()=>{var f=a.indexOf(n);f!==-1&&a.splice(f,1)}),ci.has(a)||(ci.add(a),bi(()=>{a.sort((f,p)=>f.compareDocumentPosition(p)===4?-1:1),ci.delete(a)})),bi(()=>{if(u){var f;if(o)f=Ma(a,f,n.checked);else{var p=a.find(g=>g.checked);f=p==null?void 0:p.__value}s(f)}})}function Ma(t,e,n){for(var r=new Set,s=0;s<t.length;s+=1)t[s].checked&&r.add(t[s].__value);return n||r.delete(e),Array.from(r)}function li(t){var e=t.type;return e==="number"||e==="range"}function hi(t){return t===""?null:+t}const gf=()=>{};var za={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vu=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},_f=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],u=t[n++],h=((s&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},Eu={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,u=a?t[s+1]:0,h=s+2<t.length,f=h?t[s+2]:0,p=o>>2,g=(o&3)<<4|u>>4;let T=(u&15)<<2|f>>6,R=f&63;h||(R=64,a||(T=64)),r.push(n[p],n[g],n[T],n[R])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(vu(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):_f(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const f=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||u==null||f==null||g==null)throw new yf;const T=o<<2|u>>4;if(r.push(T),f!==64){const R=u<<4&240|f>>2;if(r.push(R),g!==64){const S=f<<6&192|g;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class yf extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const vf=function(t){const e=vu(t);return Eu.encodeByteArray(e,!0)},ls=function(t){return vf(t).replace(/\./g,"")},Ef=function(t){try{return Eu.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf=()=>wf().__FIREBASE_DEFAULTS__,If=()=>{if(typeof process>"u"||typeof za>"u")return;const t=za.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Af=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ef(t[1]);return e&&JSON.parse(e)},no=()=>{try{return gf()||Tf()||If()||Af()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},bf=t=>{var e,n;return(n=(e=no())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},Sf=t=>{const e=bf(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},wu=()=>{var t;return(t=no())==null?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Pf(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ls(JSON.stringify(n)),ls(JSON.stringify(a)),""].join(".")}const sr={};function kf(){const t={prod:[],emulator:[]};for(const e of Object.keys(sr))sr[e]?t.emulator.push(e):t.prod.push(e);return t}function Vf(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let $a=!1;function Df(t,e){if(typeof window>"u"||typeof document>"u"||!ro(window.location.host)||sr[t]===e||sr[t]||$a)return;sr[t]=e;function n(T){return`__firebase__banner__${T}`}const r="__firebase__banner",o=kf().prod.length>0;function a(){const T=document.getElementById(r);T&&T.remove()}function u(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function h(T,R){T.setAttribute("width","24"),T.setAttribute("id",R),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function f(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{$a=!0,a()},T}function p(T,R){T.setAttribute("id",R),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function g(){const T=Vf(r),R=n("text"),S=document.getElementById(R)||document.createElement("span"),V=n("learnmore"),N=document.getElementById(V)||document.createElement("a"),B=n("preprendIcon"),F=document.getElementById(B)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const j=T.element;u(j),p(N,V);const Z=f();h(F,B),j.append(F,S,N,Z),document.body.appendChild(j)}o?(S.innerText="Preview backend disconnected.",F.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(F.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,S.innerText="Preview backend running in this workspace."),S.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Of(){var e;const t=(e=no())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xf(){return!Of()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Mf(){try{return typeof indexedDB=="object"}catch{return!1}}function zf(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="FirebaseError";class wn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=$f,Object.setPrototypeOf(this,wn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Tu.prototype.create)}}class Tu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?Lf(o,r):"Error",u=`${this.serviceName}: ${a} (${s}).`;return new wn(s,u,r)}}function Lf(t,e){return t.replace(Ff,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Ff=/\{\$([^}]+)}/g;function hs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if(La(o)&&La(a)){if(!hs(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function La(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t){return t&&t._delegate?t._delegate:t}class hr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Rf;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Bf(e))try{this.getOrInitializeService({instanceIdentifier:Ut})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Ut){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ut){return this.instances.has(e)}getOptions(e=Ut){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:jf(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ut){return this.component?this.component.multipleInstances?e:Ut:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function jf(t){return t===Ut?void 0:t}function Bf(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Uf(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var J;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(J||(J={}));const qf={debug:J.DEBUG,verbose:J.VERBOSE,info:J.INFO,warn:J.WARN,error:J.ERROR,silent:J.SILENT},Gf=J.INFO,Hf={[J.DEBUG]:"log",[J.VERBOSE]:"log",[J.INFO]:"info",[J.WARN]:"warn",[J.ERROR]:"error"},Kf=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Hf[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Iu{constructor(e){this.name=e,this._logLevel=Gf,this._logHandler=Kf,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in J))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?qf[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,J.DEBUG,...e),this._logHandler(this,J.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,J.VERBOSE,...e),this._logHandler(this,J.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,J.INFO,...e),this._logHandler(this,J.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,J.WARN,...e),this._logHandler(this,J.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,J.ERROR,...e),this._logHandler(this,J.ERROR,...e)}}const Wf=(t,e)=>e.some(n=>t instanceof n);let Fa,Ua;function Qf(){return Fa||(Fa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Jf(){return Ua||(Ua=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Au=new WeakMap,Pi=new WeakMap,bu=new WeakMap,fi=new WeakMap,so=new WeakMap;function Xf(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(St(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&Au.set(n,t)}).catch(()=>{}),so.set(e,t),e}function Yf(t){if(Pi.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Pi.set(t,e)}let Ci={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Pi.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bu.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return St(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ed(t){Ci=t(Ci)}function td(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(di(this),e,...n);return bu.set(r,e.sort?e.sort():[e]),St(r)}:Jf().includes(t)?function(...e){return t.apply(di(this),e),St(Au.get(this))}:function(...e){return St(t.apply(di(this),e))}}function nd(t){return typeof t=="function"?td(t):(t instanceof IDBTransaction&&Yf(t),Wf(t,Qf())?new Proxy(t,Ci):t)}function St(t){if(t instanceof IDBRequest)return Xf(t);if(fi.has(t))return fi.get(t);const e=nd(t);return e!==t&&(fi.set(t,e),so.set(e,t)),e}const di=t=>so.get(t);function rd(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),u=St(a);return r&&a.addEventListener("upgradeneeded",h=>{r(St(a.result),h.oldVersion,h.newVersion,St(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),s&&h.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),u}const sd=["get","getKey","getAll","getAllKeys","count"],id=["put","add","delete","clear"],pi=new Map;function ja(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pi.get(e))return pi.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=id.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||sd.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,s?"readwrite":"readonly");let f=h.store;return r&&(f=f.index(u.shift())),(await Promise.all([f[n](...u),s&&h.done]))[0]};return pi.set(e,o),o}ed(t=>({...t,get:(e,n,r)=>ja(e,n)||t.get(e,n,r),has:(e,n)=>!!ja(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(ad(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function ad(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ki="@firebase/app",Ba="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft=new Iu("@firebase/app"),cd="@firebase/app-compat",ud="@firebase/analytics-compat",ld="@firebase/analytics",hd="@firebase/app-check-compat",fd="@firebase/app-check",dd="@firebase/auth",pd="@firebase/auth-compat",md="@firebase/database",gd="@firebase/data-connect",_d="@firebase/database-compat",yd="@firebase/functions",vd="@firebase/functions-compat",Ed="@firebase/installations",wd="@firebase/installations-compat",Td="@firebase/messaging",Id="@firebase/messaging-compat",Ad="@firebase/performance",bd="@firebase/performance-compat",Sd="@firebase/remote-config",Rd="@firebase/remote-config-compat",Pd="@firebase/storage",Cd="@firebase/storage-compat",kd="@firebase/firestore",Vd="@firebase/ai",Dd="@firebase/firestore-compat",Nd="firebase",Od="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]",xd={[ki]:"fire-core",[cd]:"fire-core-compat",[ld]:"fire-analytics",[ud]:"fire-analytics-compat",[fd]:"fire-app-check",[hd]:"fire-app-check-compat",[dd]:"fire-auth",[pd]:"fire-auth-compat",[md]:"fire-rtdb",[gd]:"fire-data-connect",[_d]:"fire-rtdb-compat",[yd]:"fire-fn",[vd]:"fire-fn-compat",[Ed]:"fire-iid",[wd]:"fire-iid-compat",[Td]:"fire-fcm",[Id]:"fire-fcm-compat",[Ad]:"fire-perf",[bd]:"fire-perf-compat",[Sd]:"fire-rc",[Rd]:"fire-rc-compat",[Pd]:"fire-gcs",[Cd]:"fire-gcs-compat",[kd]:"fire-fst",[Dd]:"fire-fst-compat",[Vd]:"fire-vertex","fire-js":"fire-js",[Nd]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fs=new Map,Md=new Map,Di=new Map;function Za(t,e){try{t.container.addComponent(e)}catch(n){ft.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ds(t){const e=t.name;if(Di.has(e))return ft.debug(`There were multiple attempts to register component ${e}.`),!1;Di.set(e,t);for(const n of fs.values())Za(n,t);for(const n of Md.values())Za(n,t);return!0}function zd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function $d(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Rt=new Tu("app","Firebase",Ld);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Rt.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=Od;function Su(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Vi,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Rt.create("bad-app-name",{appName:String(s)});if(n||(n=wu()),!n)throw Rt.create("no-options");const o=fs.get(s);if(o){if(hs(n,o.options)&&hs(r,o.config))return o;throw Rt.create("duplicate-app",{appName:s})}const a=new Zf(s);for(const h of Di.values())a.addComponent(h);const u=new Fd(n,r,a);return fs.set(s,u),u}function jd(t=Vi){const e=fs.get(t);if(!e&&t===Vi&&wu())return Su();if(!e)throw Rt.create("no-app",{appName:t});return e}function fn(t,e,n){let r=xd[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ft.warn(a.join(" "));return}ds(new hr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="firebase-heartbeat-database",Zd=1,fr="firebase-heartbeat-store";let mi=null;function Ru(){return mi||(mi=rd(Bd,Zd,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fr)}catch(n){console.warn(n)}}}}).catch(t=>{throw Rt.create("idb-open",{originalErrorMessage:t.message})})),mi}async function qd(t){try{const n=(await Ru()).transaction(fr),r=await n.objectStore(fr).get(Pu(t));return await n.done,r}catch(e){if(e instanceof wn)ft.warn(e.message);else{const n=Rt.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ft.warn(n.message)}}}async function qa(t,e){try{const r=(await Ru()).transaction(fr,"readwrite");await r.objectStore(fr).put(e,Pu(t)),await r.done}catch(n){if(n instanceof wn)ft.warn(n.message);else{const r=Rt.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ft.warn(r.message)}}}function Pu(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd=1024,Hd=30;class Kd{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Qd(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Ga();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Hd){const a=Jd(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ft.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ga(),{heartbeatsToSend:r,unsentEntries:s}=Wd(this._heartbeatsCache.heartbeats),o=ls(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ft.warn(n),""}}}function Ga(){return new Date().toISOString().substring(0,10)}function Wd(t,e=Gd){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),Ha(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Ha(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Qd{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Mf()?zf().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await qd(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qa(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return qa(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Ha(t){return ls(JSON.stringify({version:2,heartbeats:t})).length}function Jd(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(t){ds(new hr("platform-logger",e=>new od(e),"PRIVATE")),ds(new hr("heartbeat",e=>new Kd(e),"PRIVATE")),fn(ki,Ba,t),fn(ki,Ba,"esm2020"),fn("fire-js","")}Xd("");var Yd="firebase",ep="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fn(Yd,ep,"app");var Ka=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,m){function y(){}y.prototype=m.prototype,v.F=m.prototype,v.prototype=new y,v.prototype.constructor=v,v.D=function(w,E,I){for(var _=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)_[pe-2]=arguments[pe];return m.prototype[E].apply(w,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(v,m,y){y||(y=0);const w=Array(16);if(typeof m=="string")for(var E=0;E<16;++E)w[E]=m.charCodeAt(y++)|m.charCodeAt(y++)<<8|m.charCodeAt(y++)<<16|m.charCodeAt(y++)<<24;else for(E=0;E<16;++E)w[E]=m[y++]|m[y++]<<8|m[y++]<<16|m[y++]<<24;m=v.g[0],y=v.g[1],E=v.g[2];let I=v.g[3],_;_=m+(I^y&(E^I))+w[0]+3614090360&4294967295,m=y+(_<<7&4294967295|_>>>25),_=I+(E^m&(y^E))+w[1]+3905402710&4294967295,I=m+(_<<12&4294967295|_>>>20),_=E+(y^I&(m^y))+w[2]+606105819&4294967295,E=I+(_<<17&4294967295|_>>>15),_=y+(m^E&(I^m))+w[3]+3250441966&4294967295,y=E+(_<<22&4294967295|_>>>10),_=m+(I^y&(E^I))+w[4]+4118548399&4294967295,m=y+(_<<7&4294967295|_>>>25),_=I+(E^m&(y^E))+w[5]+1200080426&4294967295,I=m+(_<<12&4294967295|_>>>20),_=E+(y^I&(m^y))+w[6]+2821735955&4294967295,E=I+(_<<17&4294967295|_>>>15),_=y+(m^E&(I^m))+w[7]+4249261313&4294967295,y=E+(_<<22&4294967295|_>>>10),_=m+(I^y&(E^I))+w[8]+1770035416&4294967295,m=y+(_<<7&4294967295|_>>>25),_=I+(E^m&(y^E))+w[9]+2336552879&4294967295,I=m+(_<<12&4294967295|_>>>20),_=E+(y^I&(m^y))+w[10]+4294925233&4294967295,E=I+(_<<17&4294967295|_>>>15),_=y+(m^E&(I^m))+w[11]+2304563134&4294967295,y=E+(_<<22&4294967295|_>>>10),_=m+(I^y&(E^I))+w[12]+1804603682&4294967295,m=y+(_<<7&4294967295|_>>>25),_=I+(E^m&(y^E))+w[13]+4254626195&4294967295,I=m+(_<<12&4294967295|_>>>20),_=E+(y^I&(m^y))+w[14]+2792965006&4294967295,E=I+(_<<17&4294967295|_>>>15),_=y+(m^E&(I^m))+w[15]+1236535329&4294967295,y=E+(_<<22&4294967295|_>>>10),_=m+(E^I&(y^E))+w[1]+4129170786&4294967295,m=y+(_<<5&4294967295|_>>>27),_=I+(y^E&(m^y))+w[6]+3225465664&4294967295,I=m+(_<<9&4294967295|_>>>23),_=E+(m^y&(I^m))+w[11]+643717713&4294967295,E=I+(_<<14&4294967295|_>>>18),_=y+(I^m&(E^I))+w[0]+3921069994&4294967295,y=E+(_<<20&4294967295|_>>>12),_=m+(E^I&(y^E))+w[5]+3593408605&4294967295,m=y+(_<<5&4294967295|_>>>27),_=I+(y^E&(m^y))+w[10]+38016083&4294967295,I=m+(_<<9&4294967295|_>>>23),_=E+(m^y&(I^m))+w[15]+3634488961&4294967295,E=I+(_<<14&4294967295|_>>>18),_=y+(I^m&(E^I))+w[4]+3889429448&4294967295,y=E+(_<<20&4294967295|_>>>12),_=m+(E^I&(y^E))+w[9]+568446438&4294967295,m=y+(_<<5&4294967295|_>>>27),_=I+(y^E&(m^y))+w[14]+3275163606&4294967295,I=m+(_<<9&4294967295|_>>>23),_=E+(m^y&(I^m))+w[3]+4107603335&4294967295,E=I+(_<<14&4294967295|_>>>18),_=y+(I^m&(E^I))+w[8]+1163531501&4294967295,y=E+(_<<20&4294967295|_>>>12),_=m+(E^I&(y^E))+w[13]+2850285829&4294967295,m=y+(_<<5&4294967295|_>>>27),_=I+(y^E&(m^y))+w[2]+4243563512&4294967295,I=m+(_<<9&4294967295|_>>>23),_=E+(m^y&(I^m))+w[7]+1735328473&4294967295,E=I+(_<<14&4294967295|_>>>18),_=y+(I^m&(E^I))+w[12]+2368359562&4294967295,y=E+(_<<20&4294967295|_>>>12),_=m+(y^E^I)+w[5]+4294588738&4294967295,m=y+(_<<4&4294967295|_>>>28),_=I+(m^y^E)+w[8]+2272392833&4294967295,I=m+(_<<11&4294967295|_>>>21),_=E+(I^m^y)+w[11]+1839030562&4294967295,E=I+(_<<16&4294967295|_>>>16),_=y+(E^I^m)+w[14]+4259657740&4294967295,y=E+(_<<23&4294967295|_>>>9),_=m+(y^E^I)+w[1]+2763975236&4294967295,m=y+(_<<4&4294967295|_>>>28),_=I+(m^y^E)+w[4]+1272893353&4294967295,I=m+(_<<11&4294967295|_>>>21),_=E+(I^m^y)+w[7]+4139469664&4294967295,E=I+(_<<16&4294967295|_>>>16),_=y+(E^I^m)+w[10]+3200236656&4294967295,y=E+(_<<23&4294967295|_>>>9),_=m+(y^E^I)+w[13]+681279174&4294967295,m=y+(_<<4&4294967295|_>>>28),_=I+(m^y^E)+w[0]+3936430074&4294967295,I=m+(_<<11&4294967295|_>>>21),_=E+(I^m^y)+w[3]+3572445317&4294967295,E=I+(_<<16&4294967295|_>>>16),_=y+(E^I^m)+w[6]+76029189&4294967295,y=E+(_<<23&4294967295|_>>>9),_=m+(y^E^I)+w[9]+3654602809&4294967295,m=y+(_<<4&4294967295|_>>>28),_=I+(m^y^E)+w[12]+3873151461&4294967295,I=m+(_<<11&4294967295|_>>>21),_=E+(I^m^y)+w[15]+530742520&4294967295,E=I+(_<<16&4294967295|_>>>16),_=y+(E^I^m)+w[2]+3299628645&4294967295,y=E+(_<<23&4294967295|_>>>9),_=m+(E^(y|~I))+w[0]+4096336452&4294967295,m=y+(_<<6&4294967295|_>>>26),_=I+(y^(m|~E))+w[7]+1126891415&4294967295,I=m+(_<<10&4294967295|_>>>22),_=E+(m^(I|~y))+w[14]+2878612391&4294967295,E=I+(_<<15&4294967295|_>>>17),_=y+(I^(E|~m))+w[5]+4237533241&4294967295,y=E+(_<<21&4294967295|_>>>11),_=m+(E^(y|~I))+w[12]+1700485571&4294967295,m=y+(_<<6&4294967295|_>>>26),_=I+(y^(m|~E))+w[3]+2399980690&4294967295,I=m+(_<<10&4294967295|_>>>22),_=E+(m^(I|~y))+w[10]+4293915773&4294967295,E=I+(_<<15&4294967295|_>>>17),_=y+(I^(E|~m))+w[1]+2240044497&4294967295,y=E+(_<<21&4294967295|_>>>11),_=m+(E^(y|~I))+w[8]+1873313359&4294967295,m=y+(_<<6&4294967295|_>>>26),_=I+(y^(m|~E))+w[15]+4264355552&4294967295,I=m+(_<<10&4294967295|_>>>22),_=E+(m^(I|~y))+w[6]+2734768916&4294967295,E=I+(_<<15&4294967295|_>>>17),_=y+(I^(E|~m))+w[13]+1309151649&4294967295,y=E+(_<<21&4294967295|_>>>11),_=m+(E^(y|~I))+w[4]+4149444226&4294967295,m=y+(_<<6&4294967295|_>>>26),_=I+(y^(m|~E))+w[11]+3174756917&4294967295,I=m+(_<<10&4294967295|_>>>22),_=E+(m^(I|~y))+w[2]+718787259&4294967295,E=I+(_<<15&4294967295|_>>>17),_=y+(I^(E|~m))+w[9]+3951481745&4294967295,v.g[0]=v.g[0]+m&4294967295,v.g[1]=v.g[1]+(E+(_<<21&4294967295|_>>>11))&4294967295,v.g[2]=v.g[2]+E&4294967295,v.g[3]=v.g[3]+I&4294967295}r.prototype.v=function(v,m){m===void 0&&(m=v.length);const y=m-this.blockSize,w=this.C;let E=this.h,I=0;for(;I<m;){if(E==0)for(;I<=y;)s(this,v,I),I+=this.blockSize;if(typeof v=="string"){for(;I<m;)if(w[E++]=v.charCodeAt(I++),E==this.blockSize){s(this,w),E=0;break}}else for(;I<m;)if(w[E++]=v[I++],E==this.blockSize){s(this,w),E=0;break}}this.h=E,this.o+=m},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var m=1;m<v.length-8;++m)v[m]=0;m=this.o*8;for(var y=v.length-8;y<v.length;++y)v[y]=m&255,m/=256;for(this.v(v),v=Array(16),m=0,y=0;y<4;++y)for(let w=0;w<32;w+=8)v[m++]=this.g[y]>>>w&255;return v};function o(v,m){var y=u;return Object.prototype.hasOwnProperty.call(y,v)?y[v]:y[v]=m(v)}function a(v,m){this.h=m;const y=[];let w=!0;for(let E=v.length-1;E>=0;E--){const I=v[E]|0;w&&I==m||(y[E]=I,w=!1)}this.g=y}var u={};function h(v){return-128<=v&&v<128?o(v,function(m){return new a([m|0],m<0?-1:0)}):new a([v|0],v<0?-1:0)}function f(v){if(isNaN(v)||!isFinite(v))return g;if(v<0)return N(f(-v));const m=[];let y=1;for(let w=0;v>=y;w++)m[w]=v/y|0,y*=4294967296;return new a(m,0)}function p(v,m){if(v.length==0)throw Error("number format error: empty string");if(m=m||10,m<2||36<m)throw Error("radix out of range: "+m);if(v.charAt(0)=="-")return N(p(v.substring(1),m));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const y=f(Math.pow(m,8));let w=g;for(let I=0;I<v.length;I+=8){var E=Math.min(8,v.length-I);const _=parseInt(v.substring(I,I+E),m);E<8?(E=f(Math.pow(m,E)),w=w.j(E).add(f(_))):(w=w.j(y),w=w.add(f(_)))}return w}var g=h(0),T=h(1),R=h(16777216);t=a.prototype,t.m=function(){if(V(this))return-N(this).m();let v=0,m=1;for(let y=0;y<this.g.length;y++){const w=this.i(y);v+=(w>=0?w:4294967296+w)*m,m*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(S(this))return"0";if(V(this))return"-"+N(this).toString(v);const m=f(Math.pow(v,6));var y=this;let w="";for(;;){const E=Z(y,m).g;y=B(y,E.j(m));let I=((y.g.length>0?y.g[0]:y.h)>>>0).toString(v);if(y=E,S(y))return I+w;for(;I.length<6;)I="0"+I;w=I+w}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function S(v){if(v.h!=0)return!1;for(let m=0;m<v.g.length;m++)if(v.g[m]!=0)return!1;return!0}function V(v){return v.h==-1}t.l=function(v){return v=B(this,v),V(v)?-1:S(v)?0:1};function N(v){const m=v.g.length,y=[];for(let w=0;w<m;w++)y[w]=~v.g[w];return new a(y,~v.h).add(T)}t.abs=function(){return V(this)?N(this):this},t.add=function(v){const m=Math.max(this.g.length,v.g.length),y=[];let w=0;for(let E=0;E<=m;E++){let I=w+(this.i(E)&65535)+(v.i(E)&65535),_=(I>>>16)+(this.i(E)>>>16)+(v.i(E)>>>16);w=_>>>16,I&=65535,_&=65535,y[E]=_<<16|I}return new a(y,y[y.length-1]&-2147483648?-1:0)};function B(v,m){return v.add(N(m))}t.j=function(v){if(S(this)||S(v))return g;if(V(this))return V(v)?N(this).j(N(v)):N(N(this).j(v));if(V(v))return N(this.j(N(v)));if(this.l(R)<0&&v.l(R)<0)return f(this.m()*v.m());const m=this.g.length+v.g.length,y=[];for(var w=0;w<2*m;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(let E=0;E<v.g.length;E++){const I=this.i(w)>>>16,_=this.i(w)&65535,pe=v.i(E)>>>16,ot=v.i(E)&65535;y[2*w+2*E]+=_*ot,F(y,2*w+2*E),y[2*w+2*E+1]+=I*ot,F(y,2*w+2*E+1),y[2*w+2*E+1]+=_*pe,F(y,2*w+2*E+1),y[2*w+2*E+2]+=I*pe,F(y,2*w+2*E+2)}for(v=0;v<m;v++)y[v]=y[2*v+1]<<16|y[2*v];for(v=m;v<2*m;v++)y[v]=0;return new a(y,0)};function F(v,m){for(;(v[m]&65535)!=v[m];)v[m+1]+=v[m]>>>16,v[m]&=65535,m++}function j(v,m){this.g=v,this.h=m}function Z(v,m){if(S(m))throw Error("division by zero");if(S(v))return new j(g,g);if(V(v))return m=Z(N(v),m),new j(N(m.g),N(m.h));if(V(m))return m=Z(v,N(m)),new j(N(m.g),m.h);if(v.g.length>30){if(V(v)||V(m))throw Error("slowDivide_ only works with positive integers.");for(var y=T,w=m;w.l(v)<=0;)y=H(y),w=H(w);var E=re(y,1),I=re(w,1);for(w=re(w,2),y=re(y,2);!S(w);){var _=I.add(w);_.l(v)<=0&&(E=E.add(y),I=_),w=re(w,1),y=re(y,1)}return m=B(v,E.j(m)),new j(E,m)}for(E=g;v.l(m)>=0;){for(y=Math.max(1,Math.floor(v.m()/m.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),I=f(y),_=I.j(m);V(_)||_.l(v)>0;)y-=w,I=f(y),_=I.j(m);S(I)&&(I=T),E=E.add(I),v=B(v,_)}return new j(E,v)}t.B=function(v){return Z(this,v).h},t.and=function(v){const m=Math.max(this.g.length,v.g.length),y=[];for(let w=0;w<m;w++)y[w]=this.i(w)&v.i(w);return new a(y,this.h&v.h)},t.or=function(v){const m=Math.max(this.g.length,v.g.length),y=[];for(let w=0;w<m;w++)y[w]=this.i(w)|v.i(w);return new a(y,this.h|v.h)},t.xor=function(v){const m=Math.max(this.g.length,v.g.length),y=[];for(let w=0;w<m;w++)y[w]=this.i(w)^v.i(w);return new a(y,this.h^v.h)};function H(v){const m=v.g.length+1,y=[];for(let w=0;w<m;w++)y[w]=v.i(w)<<1|v.i(w-1)>>>31;return new a(y,v.h)}function re(v,m){const y=m>>5;m%=32;const w=v.g.length-y,E=[];for(let I=0;I<w;I++)E[I]=m>0?v.i(I+y)>>>m|v.i(I+y+1)<<32-m:v.i(I+y);return new a(E,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=p,io=a}).apply(typeof Ka<"u"?Ka:typeof self<"u"?self:typeof window<"u"?window:{});var Kr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Cu,er,ku,rs,Ni,Vu,Du,Nu;(function(){var t,e=Object.defineProperty;function n(i){i=[typeof globalThis=="object"&&globalThis,i,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kr=="object"&&Kr];for(var c=0;c<i.length;++c){var l=i[c];if(l&&l.Math==Math)return l}throw Error("Cannot find global object")}var r=n(this);function s(i,c){if(c)e:{var l=r;i=i.split(".");for(var d=0;d<i.length-1;d++){var A=i[d];if(!(A in l))break e;l=l[A]}i=i[i.length-1],d=l[i],c=c(d),c!=d&&c!=null&&e(l,i,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(i){return i||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(i){return i||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(i){return i||function(c){var l=[],d;for(d in c)Object.prototype.hasOwnProperty.call(c,d)&&l.push([d,c[d]]);return l}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(i){var c=typeof i;return c=="object"&&i!=null||c=="function"}function h(i,c,l){return i.call.apply(i.bind,arguments)}function f(i,c,l){return f=h,f.apply(null,arguments)}function p(i,c){var l=Array.prototype.slice.call(arguments,1);return function(){var d=l.slice();return d.push.apply(d,arguments),i.apply(this,d)}}function g(i,c){function l(){}l.prototype=c.prototype,i.Z=c.prototype,i.prototype=new l,i.prototype.constructor=i,i.Ob=function(d,A,b){for(var D=Array(arguments.length-2),G=2;G<arguments.length;G++)D[G-2]=arguments[G];return c.prototype[A].apply(d,D)}}var T=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?i=>i&&AsyncContext.Snapshot.wrap(i):i=>i;function R(i){const c=i.length;if(c>0){const l=Array(c);for(let d=0;d<c;d++)l[d]=i[d];return l}return[]}function S(i,c){for(let d=1;d<arguments.length;d++){const A=arguments[d];var l=typeof A;if(l=l!="object"?l:A?Array.isArray(A)?"array":l:"null",l=="array"||l=="object"&&typeof A.length=="number"){l=i.length||0;const b=A.length||0;i.length=l+b;for(let D=0;D<b;D++)i[l+D]=A[D]}else i.push(A)}}class V{constructor(c,l){this.i=c,this.j=l,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function N(i){a.setTimeout(()=>{throw i},0)}function B(){var i=v;let c=null;return i.g&&(c=i.g,i.g=i.g.next,i.g||(i.h=null),c.next=null),c}class F{constructor(){this.h=this.g=null}add(c,l){const d=j.get();d.set(c,l),this.h?this.h.next=d:this.g=d,this.h=d}}var j=new V(()=>new Z,i=>i.reset());class Z{constructor(){this.next=this.g=this.h=null}set(c,l){this.h=c,this.g=l,this.next=null}reset(){this.next=this.g=this.h=null}}let H,re=!1,v=new F,m=()=>{const i=Promise.resolve(void 0);H=()=>{i.then(y)}};function y(){for(var i;i=B();){try{i.h.call(i.g)}catch(l){N(l)}var c=j;c.j(i),c.h<100&&(c.h++,i.next=c.g,c.g=i)}re=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function E(i,c){this.type=i,this.g=this.target=c,this.defaultPrevented=!1}E.prototype.h=function(){this.defaultPrevented=!0};var I=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var i=!1,c=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const l=()=>{};a.addEventListener("test",l,c),a.removeEventListener("test",l,c)}catch{}return i})();function _(i){return/^[\s\xa0]*$/.test(i)}function pe(i,c){E.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i&&this.init(i,c)}g(pe,E),pe.prototype.init=function(i,c){const l=this.type=i.type,d=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;this.target=i.target||i.srcElement,this.g=c,c=i.relatedTarget,c||(l=="mouseover"?c=i.fromElement:l=="mouseout"&&(c=i.toElement)),this.relatedTarget=c,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=i.pointerType,this.state=i.state,this.i=i,i.defaultPrevented&&pe.Z.h.call(this)},pe.prototype.h=function(){pe.Z.h.call(this);const i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ot="closure_listenable_"+(Math.random()*1e6|0),Bs=0;function Zs(i,c,l,d,A){this.listener=i,this.proxy=null,this.src=c,this.type=l,this.capture=!!d,this.ha=A,this.key=++Bs,this.da=this.fa=!1}function dt(i){i.da=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function et(i,c,l){for(const d in i)c.call(l,i[d],d,i)}function bn(i,c){for(const l in i)c.call(void 0,i[l],l,i)}function Rr(i){const c={};for(const l in i)c[l]=i[l];return c}const Pr="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cr(i,c){let l,d;for(let A=1;A<arguments.length;A++){d=arguments[A];for(l in d)i[l]=d[l];for(let b=0;b<Pr.length;b++)l=Pr[b],Object.prototype.hasOwnProperty.call(d,l)&&(i[l]=d[l])}}function pt(i){this.src=i,this.g={},this.h=0}pt.prototype.add=function(i,c,l,d,A){const b=i.toString();i=this.g[b],i||(i=this.g[b]=[],this.h++);const D=Ot(i,c,d,A);return D>-1?(c=i[D],l||(c.fa=!1)):(c=new Zs(c,this.src,b,!!d,A),c.fa=l,i.push(c)),c};function at(i,c){const l=c.type;if(l in i.g){var d=i.g[l],A=Array.prototype.indexOf.call(d,c,void 0),b;(b=A>=0)&&Array.prototype.splice.call(d,A,1),b&&(dt(c),i.g[l].length==0&&(delete i.g[l],i.h--))}}function Ot(i,c,l,d){for(let A=0;A<i.length;++A){const b=i[A];if(!b.da&&b.listener==c&&b.capture==!!l&&b.ha==d)return A}return-1}var Sn="closure_lm_"+(Math.random()*1e6|0),Rn={};function kr(i,c,l,d,A){if(Array.isArray(c)){for(let b=0;b<c.length;b++)kr(i,c[b],l,d,A);return null}return l=rn(l),i&&i[ot]?i.J(c,l,u(d)?!!d.capture:!1,A):Pn(i,c,l,!1,d,A)}function Pn(i,c,l,d,A,b){if(!c)throw Error("Invalid event type");const D=u(A)?!!A.capture:!!A;let G=kn(i);if(G||(i[Sn]=G=new pt(i)),l=G.add(c,l,d,D,b),l.proxy)return l;if(d=Vr(),l.proxy=d,d.src=i,d.listener=l,i.addEventListener)I||(A=D),A===void 0&&(A=!1),i.addEventListener(c.toString(),d,A);else if(i.attachEvent)i.attachEvent(nn(c.toString()),d);else if(i.addListener&&i.removeListener)i.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return l}function Vr(){function i(l){return c.call(i.src,i.listener,l)}const c=Nr;return i}function Dr(i,c,l,d,A){if(Array.isArray(c))for(var b=0;b<c.length;b++)Dr(i,c[b],l,d,A);else d=u(d)?!!d.capture:!!d,l=rn(l),i&&i[ot]?(i=i.i,b=String(c).toString(),b in i.g&&(c=i.g[b],l=Ot(c,l,d,A),l>-1&&(dt(c[l]),Array.prototype.splice.call(c,l,1),c.length==0&&(delete i.g[b],i.h--)))):i&&(i=kn(i))&&(c=i.g[c.toString()],i=-1,c&&(i=Ot(c,l,d,A)),(l=i>-1?c[i]:null)&&Cn(l))}function Cn(i){if(typeof i!="number"&&i&&!i.da){var c=i.src;if(c&&c[ot])at(c.i,i);else{var l=i.type,d=i.proxy;c.removeEventListener?c.removeEventListener(l,d,i.capture):c.detachEvent?c.detachEvent(nn(l),d):c.addListener&&c.removeListener&&c.removeListener(d),(l=kn(c))?(at(l,i),l.h==0&&(l.src=null,c[Sn]=null)):dt(i)}}}function nn(i){return i in Rn?Rn[i]:Rn[i]="on"+i}function Nr(i,c){if(i.da)i=!0;else{c=new pe(c,this);const l=i.listener,d=i.ha||i.src;i.fa&&Cn(i),i=l.call(d,c)}return i}function kn(i){return i=i[Sn],i instanceof pt?i:null}var Vn="__closure_events_fn_"+(Math.random()*1e9>>>0);function rn(i){return typeof i=="function"?i:(i[Vn]||(i[Vn]=function(c){return i.handleEvent(c)}),i[Vn])}function Te(){w.call(this),this.i=new pt(this),this.M=this,this.G=null}g(Te,w),Te.prototype[ot]=!0,Te.prototype.removeEventListener=function(i,c,l,d){Dr(this,i,c,l,d)};function Re(i,c){var l,d=i.G;if(d)for(l=[];d;d=d.G)l.push(d);if(i=i.M,d=c.type||c,typeof c=="string")c=new E(c,i);else if(c instanceof E)c.target=c.target||i;else{var A=c;c=new E(d,i),Cr(c,A)}A=!0;let b,D;if(l)for(D=l.length-1;D>=0;D--)b=c.g=l[D],A=sn(b,d,!0,c)&&A;if(b=c.g=i,A=sn(b,d,!0,c)&&A,A=sn(b,d,!1,c)&&A,l)for(D=0;D<l.length;D++)b=c.g=l[D],A=sn(b,d,!1,c)&&A}Te.prototype.N=function(){if(Te.Z.N.call(this),this.i){var i=this.i;for(const c in i.g){const l=i.g[c];for(let d=0;d<l.length;d++)dt(l[d]);delete i.g[c],i.h--}}this.G=null},Te.prototype.J=function(i,c,l,d){return this.i.add(String(i),c,!1,l,d)},Te.prototype.K=function(i,c,l,d){return this.i.add(String(i),c,!0,l,d)};function sn(i,c,l,d){if(c=i.i.g[String(c)],!c)return!0;c=c.concat();let A=!0;for(let b=0;b<c.length;++b){const D=c[b];if(D&&!D.da&&D.capture==l){const G=D.listener,Ie=D.ha||D.src;D.fa&&at(i.i,D),A=G.call(Ie,d)!==!1&&A}}return A&&!d.defaultPrevented}function Dn(i,c){if(typeof i!="function")if(i&&typeof i.handleEvent=="function")i=f(i.handleEvent,i);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(i,c||0)}function Or(i){i.g=Dn(()=>{i.g=null,i.i&&(i.i=!1,Or(i))},i.l);const c=i.h;i.h=null,i.m.apply(null,c)}class qs extends w{constructor(c,l){super(),this.m=c,this.l=l,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Or(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mt(i){w.call(this),this.h=i,this.g={}}g(mt,w);var Nn=[];function On(i){et(i.g,function(c,l){this.g.hasOwnProperty(l)&&Cn(c)},i),i.g={}}mt.prototype.N=function(){mt.Z.N.call(this),On(this)},mt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var x=a.JSON.stringify,O=a.JSON.parse,M=class{stringify(i){return a.JSON.stringify(i,void 0)}parse(i){return a.JSON.parse(i,void 0)}};function W(){}function te(){}var Ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function We(){E.call(this,"d")}g(We,E);function Gs(){E.call(this,"c")}g(Gs,E);var xt={},Lo=null;function xr(){return Lo=Lo||new Te}xt.Ia="serverreachability";function Fo(i){E.call(this,xt.Ia,i)}g(Fo,E);function xn(i){const c=xr();Re(c,new Fo(c))}xt.STAT_EVENT="statevent";function Uo(i,c){E.call(this,xt.STAT_EVENT,i),this.stat=c}g(Uo,E);function Le(i){const c=xr();Re(c,new Uo(c,i))}xt.Ja="timingevent";function jo(i,c){E.call(this,xt.Ja,i),this.size=c}g(jo,E);function Mn(i,c){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){i()},c)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function fh(i,c,l,d,A,b){i.info(function(){if(i.g)if(b){var D="",G=b.split("&");for(let se=0;se<G.length;se++){var Ie=G[se].split("=");if(Ie.length>1){const Ae=Ie[0];Ie=Ie[1];const nt=Ae.split("_");D=nt.length>=2&&nt[1]=="type"?D+(Ae+"="+Ie+"&"):D+(Ae+"=redacted&")}}}else D=null;else D=b;return"XMLHTTP REQ ("+d+") [attempt "+A+"]: "+c+`
`+l+`
`+D})}function dh(i,c,l,d,A,b,D){i.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+A+"]: "+c+`
`+l+`
`+b+" "+D})}function on(i,c,l,d){i.info(function(){return"XMLHTTP TEXT ("+c+"): "+mh(i,l)+(d?" "+d:"")})}function ph(i,c){i.info(function(){return"TIMEOUT: "+c})}zn.prototype.info=function(){};function mh(i,c){if(!i.g)return c;if(!c)return null;try{const b=JSON.parse(c);if(b){for(i=0;i<b.length;i++)if(Array.isArray(b[i])){var l=b[i];if(!(l.length<2)){var d=l[1];if(Array.isArray(d)&&!(d.length<1)){var A=d[0];if(A!="noop"&&A!="stop"&&A!="close")for(let D=1;D<d.length;D++)d[D]=""}}}}return x(b)}catch{return c}}var Mr={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Bo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Zo;function Hs(){}g(Hs,W),Hs.prototype.g=function(){return new XMLHttpRequest},Zo=new Hs;function $n(i){return encodeURIComponent(String(i))}function gh(i){var c=1;i=i.split(":");const l=[];for(;c>0&&i.length;)l.push(i.shift()),c--;return i.length&&l.push(i.join(":")),l}function gt(i,c,l,d){this.j=i,this.i=c,this.l=l,this.S=d||1,this.V=new mt(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new qo}function qo(){this.i=null,this.g="",this.h=!1}var Go={},Ks={};function Ws(i,c,l){i.M=1,i.A=$r(tt(c)),i.u=l,i.R=!0,Ho(i,null)}function Ho(i,c){i.F=Date.now(),zr(i),i.B=tt(i.A);var l=i.B,d=i.S;Array.isArray(d)||(d=[String(d)]),oa(l.i,"t",d),i.C=0,l=i.j.L,i.h=new qo,i.g=Aa(i.j,l?c:null,!i.u),i.P>0&&(i.O=new qs(f(i.Y,i,i.g),i.P)),c=i.V,l=i.g,d=i.ba;var A="readystatechange";Array.isArray(A)||(A&&(Nn[0]=A.toString()),A=Nn);for(let b=0;b<A.length;b++){const D=kr(l,A[b],d||c.handleEvent,!1,c.h||c);if(!D)break;c.g[D.key]=D}c=i.J?Rr(i.J):{},i.u?(i.v||(i.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.B,i.v,i.u,c)):(i.v="GET",i.g.ea(i.B,i.v,null,c)),xn(),fh(i.i,i.v,i.B,i.l,i.S,i.u)}gt.prototype.ba=function(i){i=i.target;const c=this.O;c&&vt(i)==3?c.j():this.Y(i)},gt.prototype.Y=function(i){try{if(i==this.g)e:{const G=vt(this.g),Ie=this.g.ya(),se=this.g.ca();if(!(G<3)&&(G!=3||this.g&&(this.h.h||this.g.la()||da(this.g)))){this.K||G!=4||Ie==7||(Ie==8||se<=0?xn(3):xn(2)),Qs(this);var c=this.g.ca();this.X=c;var l=_h(this);if(this.o=c==200,dh(this.i,this.v,this.B,this.l,this.S,G,c),this.o){if(this.U&&!this.L){t:{if(this.g){var d,A=this.g;if((d=A.g?A.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(d)){var b=d;break t}}b=null}if(i=b)on(this.i,this.l,i,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Js(this,i);else{this.o=!1,this.m=3,Le(12),Mt(this),Ln(this);break e}}if(this.R){i=!0;let Ae;for(;!this.K&&this.C<l.length;)if(Ae=yh(this,l),Ae==Ks){G==4&&(this.m=4,Le(14),i=!1),on(this.i,this.l,null,"[Incomplete Response]");break}else if(Ae==Go){this.m=4,Le(15),on(this.i,this.l,l,"[Invalid Chunk]"),i=!1;break}else on(this.i,this.l,Ae,null),Js(this,Ae);if(Ko(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),G!=4||l.length!=0||this.h.h||(this.m=1,Le(16),i=!1),this.o=this.o&&i,!i)on(this.i,this.l,l,"[Invalid Chunked Response]"),Mt(this),Ln(this);else if(l.length>0&&!this.W){this.W=!0;var D=this.j;D.g==this&&D.aa&&!D.P&&(D.j.info("Great, no buffering proxy detected. Bytes received: "+l.length),ii(D),D.P=!0,Le(11))}}else on(this.i,this.l,l,null),Js(this,l);G==4&&Mt(this),this.o&&!this.K&&(G==4?Ea(this.j,this):(this.o=!1,zr(this)))}else Dh(this.g),c==400&&l.indexOf("Unknown SID")>0?(this.m=3,Le(12)):(this.m=0,Le(13)),Mt(this),Ln(this)}}}catch{}finally{}};function _h(i){if(!Ko(i))return i.g.la();const c=da(i.g);if(c==="")return"";let l="";const d=c.length,A=vt(i.g)==4;if(!i.h.i){if(typeof TextDecoder>"u")return Mt(i),Ln(i),"";i.h.i=new a.TextDecoder}for(let b=0;b<d;b++)i.h.h=!0,l+=i.h.i.decode(c[b],{stream:!(A&&b==d-1)});return c.length=0,i.h.g+=l,i.C=0,i.h.g}function Ko(i){return i.g?i.v=="GET"&&i.M!=2&&i.j.Aa:!1}function yh(i,c){var l=i.C,d=c.indexOf(`
`,l);return d==-1?Ks:(l=Number(c.substring(l,d)),isNaN(l)?Go:(d+=1,d+l>c.length?Ks:(c=c.slice(d,d+l),i.C=d+l,c)))}gt.prototype.cancel=function(){this.K=!0,Mt(this)};function zr(i){i.T=Date.now()+i.H,Wo(i,i.H)}function Wo(i,c){if(i.D!=null)throw Error("WatchDog timer not null");i.D=Mn(f(i.aa,i),c)}function Qs(i){i.D&&(a.clearTimeout(i.D),i.D=null)}gt.prototype.aa=function(){this.D=null;const i=Date.now();i-this.T>=0?(ph(this.i,this.B),this.M!=2&&(xn(),Le(17)),Mt(this),this.m=2,Ln(this)):Wo(this,this.T-i)};function Ln(i){i.j.I==0||i.K||Ea(i.j,i)}function Mt(i){Qs(i);var c=i.O;c&&typeof c.dispose=="function"&&c.dispose(),i.O=null,On(i.V),i.g&&(c=i.g,i.g=null,c.abort(),c.dispose())}function Js(i,c){try{var l=i.j;if(l.I!=0&&(l.g==i||Xs(l.h,i))){if(!i.L&&Xs(l.h,i)&&l.I==3){try{var d=l.Ba.g.parse(c)}catch{d=null}if(Array.isArray(d)&&d.length==3){var A=d;if(A[0]==0){e:if(!l.v){if(l.g)if(l.g.F+3e3<i.F)Br(l),Ur(l);else break e;si(l),Le(18)}}else l.xa=A[1],0<l.xa-l.K&&A[2]<37500&&l.F&&l.A==0&&!l.C&&(l.C=Mn(f(l.Va,l),6e3));Xo(l.h)<=1&&l.ta&&(l.ta=void 0)}else $t(l,11)}else if((i.L||l.g==i)&&Br(l),!_(c))for(A=l.Ba.g.parse(c),c=0;c<A.length;c++){let se=A[c];const Ae=se[0];if(!(Ae<=l.K))if(l.K=Ae,se=se[1],l.I==2)if(se[0]=="c"){l.M=se[1],l.ba=se[2];const nt=se[3];nt!=null&&(l.ka=nt,l.j.info("VER="+l.ka));const Lt=se[4];Lt!=null&&(l.za=Lt,l.j.info("SVER="+l.za));const Et=se[5];Et!=null&&typeof Et=="number"&&Et>0&&(d=1.5*Et,l.O=d,l.j.info("backChannelRequestTimeoutMs_="+d)),d=l;const wt=i.g;if(wt){const qr=wt.g?wt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(qr){var b=d.h;b.g||qr.indexOf("spdy")==-1&&qr.indexOf("quic")==-1&&qr.indexOf("h2")==-1||(b.j=b.l,b.g=new Set,b.h&&(Ys(b,b.h),b.h=null))}if(d.G){const oi=wt.g?wt.g.getResponseHeader("X-HTTP-Session-Id"):null;oi&&(d.wa=oi,ce(d.J,d.G,oi))}}l.I=3,l.l&&l.l.ra(),l.aa&&(l.T=Date.now()-i.F,l.j.info("Handshake RTT: "+l.T+"ms")),d=l;var D=i;if(d.na=Ia(d,d.L?d.ba:null,d.W),D.L){Yo(d.h,D);var G=D,Ie=d.O;Ie&&(G.H=Ie),G.D&&(Qs(G),zr(G)),d.g=D}else ya(d);l.i.length>0&&jr(l)}else se[0]!="stop"&&se[0]!="close"||$t(l,7);else l.I==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?$t(l,7):ri(l):se[0]!="noop"&&l.l&&l.l.qa(se),l.A=0)}}xn(4)}catch{}}var vh=class{constructor(i,c){this.g=i,this.map=c}};function Qo(i){this.l=i||10,a.PerformanceNavigationTiming?(i=a.performance.getEntriesByType("navigation"),i=i.length>0&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=i?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Jo(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function Xo(i){return i.h?1:i.g?i.g.size:0}function Xs(i,c){return i.h?i.h==c:i.g?i.g.has(c):!1}function Ys(i,c){i.g?i.g.add(c):i.h=c}function Yo(i,c){i.h&&i.h==c?i.h=null:i.g&&i.g.has(c)&&i.g.delete(c)}Qo.prototype.cancel=function(){if(this.i=ea(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const i of this.g.values())i.cancel();this.g.clear()}};function ea(i){if(i.h!=null)return i.i.concat(i.h.G);if(i.g!=null&&i.g.size!==0){let c=i.i;for(const l of i.g.values())c=c.concat(l.G);return c}return R(i.i)}var ta=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Eh(i,c){if(i){i=i.split("&");for(let l=0;l<i.length;l++){const d=i[l].indexOf("=");let A,b=null;d>=0?(A=i[l].substring(0,d),b=i[l].substring(d+1)):A=i[l],c(A,b?decodeURIComponent(b.replace(/\+/g," ")):"")}}}function _t(i){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;i instanceof _t?(this.l=i.l,Fn(this,i.j),this.o=i.o,this.g=i.g,Un(this,i.u),this.h=i.h,ei(this,aa(i.i)),this.m=i.m):i&&(c=String(i).match(ta))?(this.l=!1,Fn(this,c[1]||"",!0),this.o=jn(c[2]||""),this.g=jn(c[3]||"",!0),Un(this,c[4]),this.h=jn(c[5]||"",!0),ei(this,c[6]||"",!0),this.m=jn(c[7]||"")):(this.l=!1,this.i=new Zn(null,this.l))}_t.prototype.toString=function(){const i=[];var c=this.j;c&&i.push(Bn(c,na,!0),":");var l=this.g;return(l||c=="file")&&(i.push("//"),(c=this.o)&&i.push(Bn(c,na,!0),"@"),i.push($n(l).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l=this.u,l!=null&&i.push(":",String(l))),(l=this.h)&&(this.g&&l.charAt(0)!="/"&&i.push("/"),i.push(Bn(l,l.charAt(0)=="/"?Ih:Th,!0))),(l=this.i.toString())&&i.push("?",l),(l=this.m)&&i.push("#",Bn(l,bh)),i.join("")},_t.prototype.resolve=function(i){const c=tt(this);let l=!!i.j;l?Fn(c,i.j):l=!!i.o,l?c.o=i.o:l=!!i.g,l?c.g=i.g:l=i.u!=null;var d=i.h;if(l)Un(c,i.u);else if(l=!!i.h){if(d.charAt(0)!="/")if(this.g&&!this.h)d="/"+d;else{var A=c.h.lastIndexOf("/");A!=-1&&(d=c.h.slice(0,A+1)+d)}if(A=d,A==".."||A==".")d="";else if(A.indexOf("./")!=-1||A.indexOf("/.")!=-1){d=A.lastIndexOf("/",0)==0,A=A.split("/");const b=[];for(let D=0;D<A.length;){const G=A[D++];G=="."?d&&D==A.length&&b.push(""):G==".."?((b.length>1||b.length==1&&b[0]!="")&&b.pop(),d&&D==A.length&&b.push("")):(b.push(G),d=!0)}d=b.join("/")}else d=A}return l?c.h=d:l=i.i.toString()!=="",l?ei(c,aa(i.i)):l=!!i.m,l&&(c.m=i.m),c};function tt(i){return new _t(i)}function Fn(i,c,l){i.j=l?jn(c,!0):c,i.j&&(i.j=i.j.replace(/:$/,""))}function Un(i,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);i.u=c}else i.u=null}function ei(i,c,l){c instanceof Zn?(i.i=c,Sh(i.i,i.l)):(l||(c=Bn(c,Ah)),i.i=new Zn(c,i.l))}function ce(i,c,l){i.i.set(c,l)}function $r(i){return ce(i,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),i}function jn(i,c){return i?c?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Bn(i,c,l){return typeof i=="string"?(i=encodeURI(i).replace(c,wh),l&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function wh(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var na=/[#\/\?@]/g,Th=/[#\?:]/g,Ih=/[#\?]/g,Ah=/[#\?@]/g,bh=/#/g;function Zn(i,c){this.h=this.g=null,this.i=i||null,this.j=!!c}function zt(i){i.g||(i.g=new Map,i.h=0,i.i&&Eh(i.i,function(c,l){i.add(decodeURIComponent(c.replace(/\+/g," ")),l)}))}t=Zn.prototype,t.add=function(i,c){zt(this),this.i=null,i=an(this,i);let l=this.g.get(i);return l||this.g.set(i,l=[]),l.push(c),this.h+=1,this};function ra(i,c){zt(i),c=an(i,c),i.g.has(c)&&(i.i=null,i.h-=i.g.get(c).length,i.g.delete(c))}function sa(i,c){return zt(i),c=an(i,c),i.g.has(c)}t.forEach=function(i,c){zt(this),this.g.forEach(function(l,d){l.forEach(function(A){i.call(c,A,d,this)},this)},this)};function ia(i,c){zt(i);let l=[];if(typeof c=="string")sa(i,c)&&(l=l.concat(i.g.get(an(i,c))));else for(i=Array.from(i.g.values()),c=0;c<i.length;c++)l=l.concat(i[c]);return l}t.set=function(i,c){return zt(this),this.i=null,i=an(this,i),sa(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[c]),this.h+=1,this},t.get=function(i,c){return i?(i=ia(this,i),i.length>0?String(i[0]):c):c};function oa(i,c,l){ra(i,c),l.length>0&&(i.i=null,i.g.set(an(i,c),R(l)),i.h+=l.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],c=Array.from(this.g.keys());for(let d=0;d<c.length;d++){var l=c[d];const A=$n(l);l=ia(this,l);for(let b=0;b<l.length;b++){let D=A;l[b]!==""&&(D+="="+$n(l[b])),i.push(D)}}return this.i=i.join("&")};function aa(i){const c=new Zn;return c.i=i.i,i.g&&(c.g=new Map(i.g),c.h=i.h),c}function an(i,c){return c=String(c),i.j&&(c=c.toLowerCase()),c}function Sh(i,c){c&&!i.j&&(zt(i),i.i=null,i.g.forEach(function(l,d){const A=d.toLowerCase();d!=A&&(ra(this,d),oa(this,A,l))},i)),i.j=c}function Rh(i,c){const l=new zn;if(a.Image){const d=new Image;d.onload=p(yt,l,"TestLoadImage: loaded",!0,c,d),d.onerror=p(yt,l,"TestLoadImage: error",!1,c,d),d.onabort=p(yt,l,"TestLoadImage: abort",!1,c,d),d.ontimeout=p(yt,l,"TestLoadImage: timeout",!1,c,d),a.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=i}else c(!1)}function Ph(i,c){const l=new zn,d=new AbortController,A=setTimeout(()=>{d.abort(),yt(l,"TestPingServer: timeout",!1,c)},1e4);fetch(i,{signal:d.signal}).then(b=>{clearTimeout(A),b.ok?yt(l,"TestPingServer: ok",!0,c):yt(l,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(A),yt(l,"TestPingServer: error",!1,c)})}function yt(i,c,l,d,A){try{A&&(A.onload=null,A.onerror=null,A.onabort=null,A.ontimeout=null),d(l)}catch{}}function Ch(){this.g=new M}function ti(i){this.i=i.Sb||null,this.h=i.ab||!1}g(ti,W),ti.prototype.g=function(){return new Lr(this.i,this.h)};function Lr(i,c){Te.call(this),this.H=i,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}g(Lr,Te),t=Lr.prototype,t.open=function(i,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=i,this.D=c,this.readyState=1,Gn(this)},t.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};i&&(c.body=i),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,qn(this)),this.readyState=0},t.Pa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,Gn(this)),this.g&&(this.readyState=3,Gn(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ca(this)}else i.text().then(this.Oa.bind(this),this.ga.bind(this))};function ca(i){i.j.read().then(i.Ma.bind(i)).catch(i.ga.bind(i))}t.Ma=function(i){if(this.g){if(this.o&&i.value)this.response.push(i.value);else if(!this.o){var c=i.value?i.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!i.done}))&&(this.response=this.responseText+=c)}i.done?qn(this):Gn(this),this.readyState==3&&ca(this)}},t.Oa=function(i){this.g&&(this.response=this.responseText=i,qn(this))},t.Na=function(i){this.g&&(this.response=i,qn(this))},t.ga=function(){this.g&&qn(this)};function qn(i){i.readyState=4,i.l=null,i.j=null,i.B=null,Gn(i)}t.setRequestHeader=function(i,c){this.A.append(i,c)},t.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],c=this.h.entries();for(var l=c.next();!l.done;)l=l.value,i.push(l[0]+": "+l[1]),l=c.next();return i.join(`\r
`)};function Gn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(Lr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});function ua(i){let c="";return et(i,function(l,d){c+=d,c+=":",c+=l,c+=`\r
`}),c}function ni(i,c,l){e:{for(d in l){var d=!1;break e}d=!0}d||(l=ua(l),typeof i=="string"?l!=null&&$n(l):ce(i,c,l))}function me(i){Te.call(this),this.headers=new Map,this.L=i||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}g(me,Te);var kh=/^https?$/i,Vh=["POST","PUT"];t=me.prototype,t.Fa=function(i){this.H=i},t.ea=function(i,c,l,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+i);c=c?c.toUpperCase():"GET",this.D=i,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Zo.g(),this.g.onreadystatechange=T(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(i),!0),this.B=!1}catch(b){la(this,b);return}if(i=l||"",l=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var A in d)l.set(A,d[A]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(const b of d.keys())l.set(b,d.get(b));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(l.keys()).find(b=>b.toLowerCase()=="content-type"),A=a.FormData&&i instanceof a.FormData,!(Array.prototype.indexOf.call(Vh,c,void 0)>=0)||d||A||l.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[b,D]of l)this.g.setRequestHeader(b,D);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(i),this.v=!1}catch(b){la(this,b)}};function la(i,c){i.h=!1,i.g&&(i.j=!0,i.g.abort(),i.j=!1),i.l=c,i.o=5,ha(i),Fr(i)}function ha(i){i.A||(i.A=!0,Re(i,"complete"),Re(i,"error"))}t.abort=function(i){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=i||7,Re(this,"complete"),Re(this,"abort"),Fr(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fr(this,!0)),me.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?fa(this):this.Xa())},t.Xa=function(){fa(this)};function fa(i){if(i.h&&typeof o<"u"){if(i.v&&vt(i)==4)setTimeout(i.Ca.bind(i),0);else if(Re(i,"readystatechange"),vt(i)==4){i.h=!1;try{const b=i.ca();e:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var l;if(!(l=c)){var d;if(d=b===0){let D=String(i.D).match(ta)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),d=!kh.test(D?D.toLowerCase():"")}l=d}if(l)Re(i,"complete"),Re(i,"success");else{i.o=6;try{var A=vt(i)>2?i.g.statusText:""}catch{A=""}i.l=A+" ["+i.ca()+"]",ha(i)}}finally{Fr(i)}}}}function Fr(i,c){if(i.g){i.m&&(clearTimeout(i.m),i.m=null);const l=i.g;i.g=null,c||Re(i,"ready");try{l.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function vt(i){return i.g?i.g.readyState:0}t.ca=function(){try{return vt(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(i){if(this.g){var c=this.g.responseText;return i&&c.indexOf(i)==0&&(c=c.substring(i.length)),O(c)}};function da(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.F){case"":case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function Dh(i){const c={};i=(i.g&&vt(i)>=2&&i.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<i.length;d++){if(_(i[d]))continue;var l=gh(i[d]);const A=l[0];if(l=l[1],typeof l!="string")continue;l=l.trim();const b=c[A]||[];c[A]=b,b.push(l)}bn(c,function(d){return d.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Hn(i,c,l){return l&&l.internalChannelParams&&l.internalChannelParams[i]||c}function pa(i){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Hn("failFast",!1,i),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Hn("baseRetryDelayMs",5e3,i),this.Za=Hn("retryDelaySeedMs",1e4,i),this.Ta=Hn("forwardChannelMaxRetries",2,i),this.va=Hn("forwardChannelRequestTimeoutMs",2e4,i),this.ma=i&&i.xmlHttpFactory||void 0,this.Ua=i&&i.Rb||void 0,this.Aa=i&&i.useFetchStreams||!1,this.O=void 0,this.L=i&&i.supportsCrossDomainXhr||!1,this.M="",this.h=new Qo(i&&i.concurrentRequestLimit),this.Ba=new Ch,this.S=i&&i.fastHandshake||!1,this.R=i&&i.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=i&&i.Pb||!1,i&&i.ua&&this.j.ua(),i&&i.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&i&&i.detectBufferingProxy||!1,this.ia=void 0,i&&i.longPollingTimeout&&i.longPollingTimeout>0&&(this.ia=i.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=pa.prototype,t.ka=8,t.I=1,t.connect=function(i,c,l,d){Le(0),this.W=i,this.H=c||{},l&&d!==void 0&&(this.H.OSID=l,this.H.OAID=d),this.F=this.X,this.J=Ia(this,null,this.W),jr(this)};function ri(i){if(ma(i),i.I==3){var c=i.V++,l=tt(i.J);if(ce(l,"SID",i.M),ce(l,"RID",c),ce(l,"TYPE","terminate"),Kn(i,l),c=new gt(i,i.j,c),c.M=2,c.A=$r(tt(l)),l=!1,a.navigator&&a.navigator.sendBeacon)try{l=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!l&&a.Image&&(new Image().src=c.A,l=!0),l||(c.g=Aa(c.j,null),c.g.ea(c.A)),c.F=Date.now(),zr(c)}Ta(i)}function Ur(i){i.g&&(ii(i),i.g.cancel(),i.g=null)}function ma(i){Ur(i),i.v&&(a.clearTimeout(i.v),i.v=null),Br(i),i.h.cancel(),i.m&&(typeof i.m=="number"&&a.clearTimeout(i.m),i.m=null)}function jr(i){if(!Jo(i.h)&&!i.m){i.m=!0;var c=i.Ea;H||m(),re||(H(),re=!0),v.add(c,i),i.D=0}}function Nh(i,c){return Xo(i.h)>=i.h.j-(i.m?1:0)?!1:i.m?(i.i=c.G.concat(i.i),!0):i.I==1||i.I==2||i.D>=(i.Sa?0:i.Ta)?!1:(i.m=Mn(f(i.Ea,i,c),wa(i,i.D)),i.D++,!0)}t.Ea=function(i){if(this.m)if(this.m=null,this.I==1){if(!i){this.V=Math.floor(Math.random()*1e5),i=this.V++;const A=new gt(this,this.j,i);let b=this.o;if(this.U&&(b?(b=Rr(b),Cr(b,this.U)):b=this.U),this.u!==null||this.R||(A.J=b,b=null),this.S)e:{for(var c=0,l=0;l<this.i.length;l++){t:{var d=this.i[l];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(c+=d,c>4096){c=l;break e}if(c===4096||l===this.i.length-1){c=l+1;break e}}c=1e3}else c=1e3;c=_a(this,A,c),l=tt(this.J),ce(l,"RID",i),ce(l,"CVER",22),this.G&&ce(l,"X-HTTP-Session-Id",this.G),Kn(this,l),b&&(this.R?c="headers="+$n(ua(b))+"&"+c:this.u&&ni(l,this.u,b)),Ys(this.h,A),this.Ra&&ce(l,"TYPE","init"),this.S?(ce(l,"$req",c),ce(l,"SID","null"),A.U=!0,Ws(A,l,null)):Ws(A,l,c),this.I=2}}else this.I==3&&(i?ga(this,i):this.i.length==0||Jo(this.h)||ga(this))};function ga(i,c){var l;c?l=c.l:l=i.V++;const d=tt(i.J);ce(d,"SID",i.M),ce(d,"RID",l),ce(d,"AID",i.K),Kn(i,d),i.u&&i.o&&ni(d,i.u,i.o),l=new gt(i,i.j,l,i.D+1),i.u===null&&(l.J=i.o),c&&(i.i=c.G.concat(i.i)),c=_a(i,l,1e3),l.H=Math.round(i.va*.5)+Math.round(i.va*.5*Math.random()),Ys(i.h,l),Ws(l,d,c)}function Kn(i,c){i.H&&et(i.H,function(l,d){ce(c,d,l)}),i.l&&et({},function(l,d){ce(c,d,l)})}function _a(i,c,l){l=Math.min(i.i.length,l);const d=i.l?f(i.l.Ka,i.l,i):null;e:{var A=i.i;let G=-1;for(;;){const Ie=["count="+l];G==-1?l>0?(G=A[0].g,Ie.push("ofs="+G)):G=0:Ie.push("ofs="+G);let se=!0;for(let Ae=0;Ae<l;Ae++){var b=A[Ae].g;const nt=A[Ae].map;if(b-=G,b<0)G=Math.max(0,A[Ae].g-100),se=!1;else try{b="req"+b+"_"||"";try{var D=nt instanceof Map?nt:Object.entries(nt);for(const[Lt,Et]of D){let wt=Et;u(Et)&&(wt=x(Et)),Ie.push(b+Lt+"="+encodeURIComponent(wt))}}catch(Lt){throw Ie.push(b+"type="+encodeURIComponent("_badmap")),Lt}}catch{d&&d(nt)}}if(se){D=Ie.join("&");break e}}D=void 0}return i=i.i.splice(0,l),c.G=i,D}function ya(i){if(!i.g&&!i.v){i.Y=1;var c=i.Da;H||m(),re||(H(),re=!0),v.add(c,i),i.A=0}}function si(i){return i.g||i.v||i.A>=3?!1:(i.Y++,i.v=Mn(f(i.Da,i),wa(i,i.A)),i.A++,!0)}t.Da=function(){if(this.v=null,va(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var i=4*this.T;this.j.info("BP detection timer enabled: "+i),this.B=Mn(f(this.Wa,this),i)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Le(10),Ur(this),va(this))};function ii(i){i.B!=null&&(a.clearTimeout(i.B),i.B=null)}function va(i){i.g=new gt(i,i.j,"rpc",i.Y),i.u===null&&(i.g.J=i.o),i.g.P=0;var c=tt(i.na);ce(c,"RID","rpc"),ce(c,"SID",i.M),ce(c,"AID",i.K),ce(c,"CI",i.F?"0":"1"),!i.F&&i.ia&&ce(c,"TO",i.ia),ce(c,"TYPE","xmlhttp"),Kn(i,c),i.u&&i.o&&ni(c,i.u,i.o),i.O&&(i.g.H=i.O);var l=i.g;i=i.ba,l.M=1,l.A=$r(tt(c)),l.u=null,l.R=!0,Ho(l,i)}t.Va=function(){this.C!=null&&(this.C=null,Ur(this),si(this),Le(19))};function Br(i){i.C!=null&&(a.clearTimeout(i.C),i.C=null)}function Ea(i,c){var l=null;if(i.g==c){Br(i),ii(i),i.g=null;var d=2}else if(Xs(i.h,c))l=c.G,Yo(i.h,c),d=1;else return;if(i.I!=0){if(c.o)if(d==1){l=c.u?c.u.length:0,c=Date.now()-c.F;var A=i.D;d=xr(),Re(d,new jo(d,l)),jr(i)}else ya(i);else if(A=c.m,A==3||A==0&&c.X>0||!(d==1&&Nh(i,c)||d==2&&si(i)))switch(l&&l.length>0&&(c=i.h,c.i=c.i.concat(l)),A){case 1:$t(i,5);break;case 4:$t(i,10);break;case 3:$t(i,6);break;default:$t(i,2)}}}function wa(i,c){let l=i.Qa+Math.floor(Math.random()*i.Za);return i.isActive()||(l*=2),l*c}function $t(i,c){if(i.j.info("Error code "+c),c==2){var l=f(i.bb,i),d=i.Ua;const A=!d;d=new _t(d||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Fn(d,"https"),$r(d),A?Rh(d.toString(),l):Ph(d.toString(),l)}else Le(2);i.I=0,i.l&&i.l.pa(c),Ta(i),ma(i)}t.bb=function(i){i?(this.j.info("Successfully pinged google.com"),Le(2)):(this.j.info("Failed to ping google.com"),Le(1))};function Ta(i){if(i.I=0,i.ja=[],i.l){const c=ea(i.h);(c.length!=0||i.i.length!=0)&&(S(i.ja,c),S(i.ja,i.i),i.h.i.length=0,R(i.i),i.i.length=0),i.l.oa()}}function Ia(i,c,l){var d=l instanceof _t?tt(l):new _t(l);if(d.g!="")c&&(d.g=c+"."+d.g),Un(d,d.u);else{var A=a.location;d=A.protocol,c=c?c+"."+A.hostname:A.hostname,A=+A.port;const b=new _t(null);d&&Fn(b,d),c&&(b.g=c),A&&Un(b,A),l&&(b.h=l),d=b}return l=i.G,c=i.wa,l&&c&&ce(d,l,c),ce(d,"VER",i.ka),Kn(i,d),d}function Aa(i,c,l){if(c&&!i.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=i.Aa&&!i.ma?new me(new ti({ab:l})):new me(i.ma),c.Fa(i.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ba(){}t=ba.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Zr(){}Zr.prototype.g=function(i,c){return new Ge(i,c)};function Ge(i,c){Te.call(this),this.g=new pa(c),this.l=i,this.h=c&&c.messageUrlParams||null,i=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.o=i,i=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(i?i["X-WebChannel-Content-Type"]=c.messageContentType:i={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(i?i["X-WebChannel-Client-Profile"]=c.sa:i={"X-WebChannel-Client-Profile":c.sa}),this.g.U=i,(i=c&&c.Qb)&&!_(i)&&(this.g.u=i),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.G=c,i=this.h,i!==null&&c in i&&(i=this.h,c in i&&delete i[c])),this.j=new cn(this)}g(Ge,Te),Ge.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ge.prototype.close=function(){ri(this.g)},Ge.prototype.o=function(i){var c=this.g;if(typeof i=="string"){var l={};l.__data__=i,i=l}else this.v&&(l={},l.__data__=x(i),i=l);c.i.push(new vh(c.Ya++,i)),c.I==3&&jr(c)},Ge.prototype.N=function(){this.g.l=null,delete this.j,ri(this.g),delete this.g,Ge.Z.N.call(this)};function Sa(i){We.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var c=i.__sm__;if(c){e:{for(const l in c){i=l;break e}i=void 0}(this.i=i)&&(i=this.i,c=c!==null&&i in c?c[i]:void 0),this.data=c}else this.data=i}g(Sa,We);function Ra(){Gs.call(this),this.status=1}g(Ra,Gs);function cn(i){this.g=i}g(cn,ba),cn.prototype.ra=function(){Re(this.g,"a")},cn.prototype.qa=function(i){Re(this.g,new Sa(i))},cn.prototype.pa=function(i){Re(this.g,new Ra)},cn.prototype.oa=function(){Re(this.g,"b")},Zr.prototype.createWebChannel=Zr.prototype.g,Ge.prototype.send=Ge.prototype.o,Ge.prototype.open=Ge.prototype.m,Ge.prototype.close=Ge.prototype.close,Nu=function(){return new Zr},Du=function(){return xr()},Vu=xt,Ni={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Mr.NO_ERROR=0,Mr.TIMEOUT=8,Mr.HTTP_ERROR=6,rs=Mr,Bo.COMPLETE="complete",ku=Bo,te.EventType=Ue,Ue.OPEN="a",Ue.CLOSE="b",Ue.ERROR="c",Ue.MESSAGE="d",Te.prototype.listen=Te.prototype.J,er=te,me.prototype.listenOnce=me.prototype.K,me.prototype.getLastError=me.prototype.Ha,me.prototype.getLastErrorCode=me.prototype.ya,me.prototype.getStatus=me.prototype.ca,me.prototype.getResponseJson=me.prototype.La,me.prototype.getResponseText=me.prototype.la,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Fa,Cu=me}).apply(typeof Kr<"u"?Kr:typeof self<"u"?self:typeof window<"u"?window:{});const Wa="@firebase/firestore",Qa="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Me.UNAUTHENTICATED=new Me(null),Me.GOOGLE_CREDENTIALS=new Me("google-credentials-uid"),Me.FIRST_PARTY=new Me("first-party-uid"),Me.MOCK_USER=new Me("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tn="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gt=new Iu("@firebase/firestore");function un(){return Gt.logLevel}function z(t,...e){if(Gt.logLevel<=J.DEBUG){const n=e.map(oo);Gt.debug(`Firestore (${Tn}): ${t}`,...n)}}function Ht(t,...e){if(Gt.logLevel<=J.ERROR){const n=e.map(oo);Gt.error(`Firestore (${Tn}): ${t}`,...n)}}function ks(t,...e){if(Gt.logLevel<=J.WARN){const n=e.map(oo);Gt.warn(`Firestore (${Tn}): ${t}`,...n)}}function oo(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,Ou(t,r,n)}function Ou(t,e,n){let r=`FIRESTORE (${Tn}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Ht(r),new Error(r)}function ge(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||Ou(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends wn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tp{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(Me.UNAUTHENTICATED)))}shutdown(){}}class np{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class rp{constructor(e){this.t=e,this.currentUser=Me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ge(this.o===void 0,42304);let r=this.i;const s=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new Zt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Zt,e.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const h=o;e.enqueueRetryable((async()=>{await h.promise,await s(this.currentUser)}))},u=h=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((h=>u(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Zt)}}),0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ge(typeof r.accessToken=="string",31837,{l:r}),new xu(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ge(e===null||typeof e=="string",2055,{h:e}),new Me(e)}}class sp{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Me.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ip{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new sp(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(Me.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ja{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class op{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$d(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ge(this.o===void 0,3512);const r=o=>{o.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable((()=>r(o)))};const s=o=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((o=>s(o))),setTimeout((()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ja(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(ge(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ja(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=ap(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function Oi(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return gi(s)===gi(o)?ne(s,o):gi(s)?1:-1}return ne(t.length,e.length)}const cp=55296,up=57343;function gi(t){const e=t.charCodeAt(0);return e>=cp&&e<=up}function gn(t,e,n){return t.length===e.length&&t.every(((r,s)=>n(r,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="__name__";class rt{constructor(e,n,r){n===void 0?n=0:n>e.length&&K(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&K(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rt?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=rt.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ne(e.length,n.length)}static compareSegments(e,n){const r=rt.isNumericId(e),s=rt.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?rt.extractNumericId(e).compare(rt.extractNumericId(n)):Oi(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class fe extends rt{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new L(k.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new fe(n)}static emptyPath(){return new fe([])}}const lp=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class De extends rt{construct(e,n,r){return new De(e,n,r)}static isValidIdentifier(e){return lp.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),De.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Xa}static keyField(){return new De([Xa])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new L(k.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new L(k.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[s+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new L(k.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,s+=2}else u==="`"?(a=!a,s++):u!=="."||a?(r+=u,s++):(o(),s++)}if(o(),a)throw new L(k.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new De(n)}static emptyPath(){return new De([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(fe.fromString(e))}static fromName(e){return new q(fe.fromString(e).popFirst(5))}static empty(){return new q(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new fe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(t,e,n){if(!n)throw new L(k.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function hp(t,e,n,r){if(e===!0&&r===!0)throw new L(k.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ya(t){if(!q.isDocumentKey(t))throw new L(k.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ec(t){if(q.isDocumentKey(t))throw new L(k.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zu(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function co(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":K(12329,{type:typeof t})}function $u(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new L(k.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=co(t);throw new L(k.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(t,e){const n={typeString:t};return e&&(n.value=e),n}function wr(t,e){if(!zu(t))throw new L(k.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new L(k.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc=-62135596800,nc=1e6;class le{static now(){return le.fromMillis(Date.now())}static fromDate(e){return le.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*nc);return new le(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new L(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new L(k.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<tc)throw new L(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(k.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/nc}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:le._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wr(e,le._jsonSchema))return new le(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-tc;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}le._jsonSchemaVersion="firestore/timestamp/1.0",le._jsonSchema={type:Ee("string",le._jsonSchemaVersion),seconds:Ee("number"),nanoseconds:Ee("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{static fromTimestamp(e){return new ue(e)}static min(){return new ue(new le(0,0))}static max(){return new ue(new le(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dr=-1;function fp(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ue.fromTimestamp(r===1e9?new le(n+1,0):new le(n,r));return new Ct(s,q.empty(),e)}function dp(t){return new Ct(t.readTime,t.key,dr)}class Ct{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ct(ue.min(),q.empty(),dr)}static max(){return new Ct(ue.max(),q.empty(),dr)}}function pp(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gp{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uo(t){if(t.code!==k.FAILED_PRECONDITION||t.message!==mp)throw t;z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&K(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new C(((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof C?n:C.resolve(n)}catch(n){return C.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):C.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):C.reject(n)}static resolve(e){return new C(((n,r)=>{n(e)}))}static reject(e){return new C(((n,r)=>{r(e)}))}static waitFor(e){return new C(((n,r)=>{let s=0,o=0,a=!1;e.forEach((u=>{++s,u.next((()=>{++o,a&&o===s&&n()}),(h=>r(h)))})),a=!0,o===s&&n()}))}static or(e){let n=C.resolve(!1);for(const r of e)n=n.next((s=>s?C.resolve(s):r()));return n}static forEach(e,n){const r=[];return e.forEach(((s,o)=>{r.push(n.call(this,s,o))})),this.waitFor(r)}static mapArray(e,n){return new C(((r,s)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const f=h;n(e[f]).next((p=>{a[f]=p,++u,u===o&&r(a)}),(p=>s(p)))}}))}static doWhile(e,n){return new C(((r,s)=>{const o=()=>{e()===!0?n().next((()=>{o()}),s):r()};o()}))}}function _p(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Tr(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lo.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=-1;function fo(t){return t==null}function ps(t){return t===0&&1/t==-1/0}function yp(t){return typeof t=="number"&&Number.isInteger(t)&&!ps(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu="";function vp(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=rc(e)),e=Ep(t.get(n),e);return rc(e)}function Ep(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case Lu:n+="";break;default:n+=o}}return n}function rc(t){return t+Lu+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sc(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function In(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Fu(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||ke.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ke.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ke.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wr(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wr(this.root,e,this.comparator,!0)}}class Wr{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ke{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??ke.RED,this.left=s??ke.EMPTY,this.right=o??ke.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new ke(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ke.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ke.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ke.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ke.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw K(43730,{key:this.key,value:this.value});if(this.right.isRed())throw K(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw K(27949);return e+(this.isRed()?0:1)}}ke.EMPTY=null,ke.RED=!0,ke.BLACK=!1;ke.EMPTY=new class{constructor(){this.size=0}get key(){throw K(57766)}get value(){throw K(16141)}get color(){throw K(16727)}get left(){throw K(29726)}get right(){throw K(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new ke(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ic(this.data.getIterator())}getIteratorFrom(e){return new ic(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Ne)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Ne(this.comparator);return n.data=e,n}}class ic{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.fields=e,e.sort(De.comparator)}static empty(){return new Ye([])}unionWith(e){let n=new Ne(De.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ye(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return gn(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wp("Invalid base64 string: "+o):o}})(e);return new st(n)}static fromUint8Array(e){const n=(function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o})(e);return new st(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}st.EMPTY_BYTE_STRING=new st("");const Tp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kt(t){if(ge(!!t,39018),typeof t=="string"){let e=0;const n=Tp.exec(t);if(ge(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _n(t){return typeof t=="string"?st.fromBase64String(t):st.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu="server_timestamp",ju="__type__",Bu="__previous_value__",Zu="__local_write_time__";function po(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ju])==null?void 0:r.stringValue)===Uu}function mo(t){const e=t.mapValue.fields[Bu];return po(e)?mo(e):e}function ms(t){const e=Kt(t.mapValue.fields[Zu].timestampValue);return new le(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(e,n,r,s,o,a,u,h,f,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=p}}const gs="(default)";class _s{constructor(e,n){this.projectId=e,this.database=n||gs}static empty(){return new _s("","")}get isDefaultDatabase(){return this.database===gs}isEqual(e){return e instanceof _s&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qu="__type__",Ap="__max__",Qr={mapValue:{}},Gu="__vector__",xi="value";function Wt(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?po(t)?4:Sp(t)?9007199254740991:bp(t)?10:11:K(28295,{value:t})}function it(t,e){if(t===e)return!0;const n=Wt(t);if(n!==Wt(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ms(t).isEqual(ms(e));case 3:return(function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Kt(s.timestampValue),u=Kt(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(s,o){return _n(s.bytesValue).isEqual(_n(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(s,o){return Ve(s.geoPointValue.latitude)===Ve(o.geoPointValue.latitude)&&Ve(s.geoPointValue.longitude)===Ve(o.geoPointValue.longitude)})(t,e);case 2:return(function(s,o){if("integerValue"in s&&"integerValue"in o)return Ve(s.integerValue)===Ve(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Ve(s.doubleValue),u=Ve(o.doubleValue);return a===u?ps(a)===ps(u):isNaN(a)&&isNaN(u)}return!1})(t,e);case 9:return gn(t.arrayValue.values||[],e.arrayValue.values||[],it);case 10:case 11:return(function(s,o){const a=s.mapValue.fields||{},u=o.mapValue.fields||{};if(sc(a)!==sc(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!it(a[h],u[h])))return!1;return!0})(t,e);default:return K(52216,{left:t})}}function pr(t,e){return(t.values||[]).find((n=>it(n,e)))!==void 0}function yn(t,e){if(t===e)return 0;const n=Wt(t),r=Wt(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return(function(o,a){const u=Ve(o.integerValue||o.doubleValue),h=Ve(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1})(t,e);case 3:return oc(t.timestampValue,e.timestampValue);case 4:return oc(ms(t),ms(e));case 5:return Oi(t.stringValue,e.stringValue);case 6:return(function(o,a){const u=_n(o),h=_n(a);return u.compareTo(h)})(t.bytesValue,e.bytesValue);case 7:return(function(o,a){const u=o.split("/"),h=a.split("/");for(let f=0;f<u.length&&f<h.length;f++){const p=ne(u[f],h[f]);if(p!==0)return p}return ne(u.length,h.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,a){const u=ne(Ve(o.latitude),Ve(a.latitude));return u!==0?u:ne(Ve(o.longitude),Ve(a.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return ac(t.arrayValue,e.arrayValue);case 10:return(function(o,a){var T,R,S,V;const u=o.fields||{},h=a.fields||{},f=(T=u[xi])==null?void 0:T.arrayValue,p=(R=h[xi])==null?void 0:R.arrayValue,g=ne(((S=f==null?void 0:f.values)==null?void 0:S.length)||0,((V=p==null?void 0:p.values)==null?void 0:V.length)||0);return g!==0?g:ac(f,p)})(t.mapValue,e.mapValue);case 11:return(function(o,a){if(o===Qr.mapValue&&a===Qr.mapValue)return 0;if(o===Qr.mapValue)return 1;if(a===Qr.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),f=a.fields||{},p=Object.keys(f);h.sort(),p.sort();for(let g=0;g<h.length&&g<p.length;++g){const T=Oi(h[g],p[g]);if(T!==0)return T;const R=yn(u[h[g]],f[p[g]]);if(R!==0)return R}return ne(h.length,p.length)})(t.mapValue,e.mapValue);default:throw K(23264,{he:n})}}function oc(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=Kt(t),r=Kt(e),s=ne(n.seconds,r.seconds);return s!==0?s:ne(n.nanos,r.nanos)}function ac(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=yn(n[s],r[s]);if(o)return o}return ne(n.length,r.length)}function vn(t){return Mi(t)}function Mi(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=Kt(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return _n(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return q.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Mi(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Mi(n.fields[a])}`;return s+"}"})(t.mapValue):K(61005,{value:t})}function ss(t){switch(Wt(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=mo(t);return e?16+ss(e):16;case 5:return 2*t.stringValue.length;case 6:return _n(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,o)=>s+ss(o)),0)})(t.arrayValue);case 10:case 11:return(function(r){let s=0;return In(r.fields,((o,a)=>{s+=o.length+ss(a)})),s})(t.mapValue);default:throw K(13486,{value:t})}}function zi(t){return!!t&&"integerValue"in t}function go(t){return!!t&&"arrayValue"in t}function is(t){return!!t&&"mapValue"in t}function bp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[qu])==null?void 0:r.stringValue)===Gu}function ir(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return In(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=ir(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ir(t.arrayValue.values[n]);return e}return{...t}}function Sp(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===Ap}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.value=e}static empty(){return new Je({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!is(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ir(n)}setAll(e){let n=De.emptyPath(),r={},s=[];e.forEach(((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,s),r={},s=[],n=u.popLast()}a?r[u.lastSegment()]=ir(a):s.push(u.lastSegment())}));const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());is(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return it(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];is(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){In(n,((s,o)=>e[s]=o));for(const s of r)delete e[s]}clone(){return new Je(ir(this.value))}}function Hu(t){const e=[];return In(t.fields,((n,r)=>{const s=new De([n]);if(is(r)){const o=Hu(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)})),new Ye(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n,r,s,o,a,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Qe(e,0,ue.min(),ue.min(),ue.min(),Je.empty(),0)}static newFoundDocument(e,n,r,s){return new Qe(e,1,n,ue.min(),r,s,0)}static newNoDocument(e,n){return new Qe(e,2,n,ue.min(),ue.min(),Je.empty(),0)}static newUnknownDocument(e,n){return new Qe(e,3,n,ue.min(),ue.min(),Je.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ue.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Je.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Je.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ue.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Qe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Qe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e,n){this.position=e,this.inclusive=n}}function cc(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=q.comparator(q.fromName(a.referenceValue),n.key):r=yn(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function uc(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!it(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vs{constructor(e,n="asc"){this.field=e,this.dir=n}}function Rp(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{}class Se extends Ku{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Cp(e,n,r):n==="array-contains"?new Dp(e,r):n==="in"?new Np(e,r):n==="not-in"?new Op(e,r):n==="array-contains-any"?new xp(e,r):new Se(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new kp(e,r):new Vp(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(yn(n,this.value)):n!==null&&Wt(this.value)===Wt(n)&&this.matchesComparison(yn(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kt extends Ku{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new kt(e,n)}matches(e){return Wu(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Wu(t){return t.op==="and"}function Qu(t){return Pp(t)&&Wu(t)}function Pp(t){for(const e of t.filters)if(e instanceof kt)return!1;return!0}function $i(t){if(t instanceof Se)return t.field.canonicalString()+t.op.toString()+vn(t.value);if(Qu(t))return t.filters.map((e=>$i(e))).join(",");{const e=t.filters.map((n=>$i(n))).join(",");return`${t.op}(${e})`}}function Ju(t,e){return t instanceof Se?(function(r,s){return s instanceof Se&&r.op===s.op&&r.field.isEqual(s.field)&&it(r.value,s.value)})(t,e):t instanceof kt?(function(r,s){return s instanceof kt&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((o,a,u)=>o&&Ju(a,s.filters[u])),!0):!1})(t,e):void K(19439)}function Xu(t){return t instanceof Se?(function(n){return`${n.field.canonicalString()} ${n.op} ${vn(n.value)}`})(t):t instanceof kt?(function(n){return n.op.toString()+" {"+n.getFilters().map(Xu).join(" ,")+"}"})(t):"Filter"}class Cp extends Se{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class kp extends Se{constructor(e,n){super(e,"in",n),this.keys=Yu("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class Vp extends Se{constructor(e,n){super(e,"not-in",n),this.keys=Yu("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function Yu(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>q.fromName(r.referenceValue)))}class Dp extends Se{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return go(n)&&pr(n.arrayValue,this.value)}}class Np extends Se{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pr(this.value.arrayValue,n)}}class Op extends Se{constructor(e,n){super(e,"not-in",n)}matches(e){if(pr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pr(this.value.arrayValue,n)}}class xp extends Se{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!go(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>pr(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,n=null,r=[],s=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=u,this.Te=null}}function lc(t,e=null,n=[],r=[],s=null,o=null,a=null){return new Mp(t,e,n,r,s,o,a)}function _o(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>$i(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(o){return o.field.canonicalString()+o.dir})(r))).join(","),fo(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>vn(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>vn(r))).join(",")),e.Te=n}return e.Te}function yo(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Rp(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Ju(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!uc(t.startAt,e.startAt)&&uc(t.endAt,e.endAt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,n=null,r=[],s=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zp(t,e,n,r,s,o,a,u){return new Vs(t,e,n,r,s,o,a,u)}function $p(t){return new Vs(t)}function hc(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Lp(t){return t.collectionGroup!==null}function or(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Ne(De.comparator);return a.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(u=u.add(f.field))}))})),u})(e).forEach((o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new vs(o,r))})),n.has(De.keyField().canonicalString())||e.Ie.push(new vs(De.keyField(),r))}return e.Ie}function qt(t){const e=ae(t);return e.Ee||(e.Ee=Fp(e,or(t))),e.Ee}function Fp(t,e){if(t.limitType==="F")return lc(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((s=>{const o=s.dir==="desc"?"asc":"desc";return new vs(s.field,o)}));const n=t.endAt?new ys(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ys(t.startAt.position,t.startAt.inclusive):null;return lc(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Li(t,e,n){return new Vs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function el(t,e){return yo(qt(t),qt(e))&&t.limitType===e.limitType}function tl(t){return`${_o(qt(t))}|lt:${t.limitType}`}function Jn(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>Xu(s))).join(", ")}]`),fo(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>vn(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>vn(s))).join(",")),`Target(${r})`})(qt(t))}; limitType=${t.limitType})`}function vo(t,e){return e.isFoundDocument()&&(function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,s){for(const o of or(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0})(t,e)&&(function(r,s){return!(r.startAt&&!(function(a,u,h){const f=cc(a,u,h);return a.inclusive?f<=0:f<0})(r.startAt,or(r),s)||r.endAt&&!(function(a,u,h){const f=cc(a,u,h);return a.inclusive?f>=0:f>0})(r.endAt,or(r),s))})(t,e)}function Up(t){return(e,n)=>{let r=!1;for(const s of or(t)){const o=jp(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function jp(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):(function(o,a,u){const h=a.data.field(o),f=u.data.field(o);return h!==null&&f!==null?yn(h,f):K(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return K(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){In(this.inner,((n,r)=>{for(const[s,o]of r)e(s,o)}))}isEmpty(){return Fu(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bp=new Ze(q.comparator);function Es(){return Bp}const nl=new Ze(q.comparator);function Jr(...t){let e=nl;for(const n of t)e=e.insert(n.key,n);return e}function rl(t){let e=nl;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function Bt(){return ar()}function sl(){return ar()}function ar(){return new Xt((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Zp=new Ze(q.comparator),qp=new Ne(q.comparator);function ze(...t){let e=qp;for(const n of t)e=e.add(n);return e}const Gp=new Ne(ne);function Hp(){return Gp}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ps(e)?"-0":e}}function il(t){return{integerValue:""+t}}function Kp(t,e){return yp(e)?il(e):Eo(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(){this._=void 0}}function Wp(t,e,n){return t instanceof mr?(function(s,o){const a={fields:{[ju]:{stringValue:Uu},[Zu]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&po(o)&&(o=mo(o)),o&&(a.fields[Bu]=o),{mapValue:a}})(n,e):t instanceof gr?al(t,e):t instanceof _r?cl(t,e):(function(s,o){const a=ol(s,o),u=fc(a)+fc(s.Ae);return zi(a)&&zi(s.Ae)?il(u):Eo(s.serializer,u)})(t,e)}function Qp(t,e,n){return t instanceof gr?al(t,e):t instanceof _r?cl(t,e):n}function ol(t,e){return t instanceof ws?(function(r){return zi(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}class mr extends Ds{}class gr extends Ds{constructor(e){super(),this.elements=e}}function al(t,e){const n=ul(e);for(const r of t.elements)n.some((s=>it(s,r)))||n.push(r);return{arrayValue:{values:n}}}class _r extends Ds{constructor(e){super(),this.elements=e}}function cl(t,e){let n=ul(e);for(const r of t.elements)n=n.filter((s=>!it(s,r)));return{arrayValue:{values:n}}}class ws extends Ds{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function fc(t){return Ve(t.integerValue||t.doubleValue)}function ul(t){return go(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.field=e,this.transform=n}}function Xp(t,e){return t.field.isEqual(e.field)&&(function(r,s){return r instanceof gr&&s instanceof gr||r instanceof _r&&s instanceof _r?gn(r.elements,s.elements,it):r instanceof ws&&s instanceof ws?it(r.Ae,s.Ae):r instanceof mr&&s instanceof mr})(t.transform,e.transform)}class Yp{constructor(e,n){this.version=e,this.transformResults=n}}class ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ut}static exists(e){return new ut(void 0,e)}static updateTime(e){return new ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function os(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ns{}function ll(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fl(t.key,ut.none()):new Ir(t.key,t.data,ut.none());{const n=t.data,r=Je.empty();let s=new Ne(De.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Yt(t.key,r,new Ye(s.toArray()),ut.none())}}function em(t,e,n){t instanceof Ir?(function(s,o,a){const u=s.value.clone(),h=pc(s.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(t,e,n):t instanceof Yt?(function(s,o,a){if(!os(s.precondition,o))return void o.convertToUnknownDocument(a.version);const u=pc(s.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(hl(s)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()})(t,e,n):(function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()})(0,e,n)}function cr(t,e,n,r){return t instanceof Ir?(function(o,a,u,h){if(!os(o.precondition,a))return u;const f=o.value.clone(),p=mc(o.fieldTransforms,h,a);return f.setAll(p),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(t,e,n,r):t instanceof Yt?(function(o,a,u,h){if(!os(o.precondition,a))return u;const f=mc(o.fieldTransforms,h,a),p=a.data;return p.setAll(hl(o)),p.setAll(f),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map((g=>g.field)))})(t,e,n,r):(function(o,a,u){return os(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u})(t,e,n)}function tm(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=ol(r.transform,s||null);o!=null&&(n===null&&(n=Je.empty()),n.set(r.field,o))}return n||null}function dc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&gn(r,s,((o,a)=>Xp(o,a)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ir extends Ns{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yt extends Ns{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function hl(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function pc(t,e,n){const r=new Map;ge(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,u=e.data.field(o.field);r.set(o.field,Qp(a,u,n[s]))}return r}function mc(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,Wp(o,a,e))}return r}class fl extends Ns{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nm extends Ns{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&em(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=cr(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=cr(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sl();return this.mutations.forEach((s=>{const o=e.get(s.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(s.key)?null:u;const h=ll(a,u);h!==null&&r.set(s.key,h),a.isValidDocument()||a.convertToNoDocument(ue.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),ze())}isEqual(e){return this.batchId===e.batchId&&gn(this.mutations,e.mutations,((n,r)=>dc(n,r)))&&gn(this.baseMutations,e.baseMutations,((n,r)=>dc(n,r)))}}class wo{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ge(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=(function(){return Zp})();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new wo(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ve,Q;function im(t){switch(t){case k.OK:return K(64938);case k.CANCELLED:case k.UNKNOWN:case k.DEADLINE_EXCEEDED:case k.RESOURCE_EXHAUSTED:case k.INTERNAL:case k.UNAVAILABLE:case k.UNAUTHENTICATED:return!1;case k.INVALID_ARGUMENT:case k.NOT_FOUND:case k.ALREADY_EXISTS:case k.PERMISSION_DENIED:case k.FAILED_PRECONDITION:case k.ABORTED:case k.OUT_OF_RANGE:case k.UNIMPLEMENTED:case k.DATA_LOSS:return!0;default:return K(15467,{code:t})}}function om(t){if(t===void 0)return Ht("GRPC error has no .code"),k.UNKNOWN;switch(t){case ve.OK:return k.OK;case ve.CANCELLED:return k.CANCELLED;case ve.UNKNOWN:return k.UNKNOWN;case ve.DEADLINE_EXCEEDED:return k.DEADLINE_EXCEEDED;case ve.RESOURCE_EXHAUSTED:return k.RESOURCE_EXHAUSTED;case ve.INTERNAL:return k.INTERNAL;case ve.UNAVAILABLE:return k.UNAVAILABLE;case ve.UNAUTHENTICATED:return k.UNAUTHENTICATED;case ve.INVALID_ARGUMENT:return k.INVALID_ARGUMENT;case ve.NOT_FOUND:return k.NOT_FOUND;case ve.ALREADY_EXISTS:return k.ALREADY_EXISTS;case ve.PERMISSION_DENIED:return k.PERMISSION_DENIED;case ve.FAILED_PRECONDITION:return k.FAILED_PRECONDITION;case ve.ABORTED:return k.ABORTED;case ve.OUT_OF_RANGE:return k.OUT_OF_RANGE;case ve.UNIMPLEMENTED:return k.UNIMPLEMENTED;case ve.DATA_LOSS:return k.DATA_LOSS;default:return K(39323,{code:t})}}(Q=ve||(ve={}))[Q.OK=0]="OK",Q[Q.CANCELLED=1]="CANCELLED",Q[Q.UNKNOWN=2]="UNKNOWN",Q[Q.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Q[Q.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Q[Q.NOT_FOUND=5]="NOT_FOUND",Q[Q.ALREADY_EXISTS=6]="ALREADY_EXISTS",Q[Q.PERMISSION_DENIED=7]="PERMISSION_DENIED",Q[Q.UNAUTHENTICATED=16]="UNAUTHENTICATED",Q[Q.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Q[Q.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Q[Q.ABORTED=10]="ABORTED",Q[Q.OUT_OF_RANGE=11]="OUT_OF_RANGE",Q[Q.UNIMPLEMENTED=12]="UNIMPLEMENTED",Q[Q.INTERNAL=13]="INTERNAL",Q[Q.UNAVAILABLE=14]="UNAVAILABLE",Q[Q.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new io([4294967295,4294967295],0);class am{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Fi(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cm(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function um(t,e){return Fi(t,e.toTimestamp())}function dn(t){return ge(!!t,49232),ue.fromTimestamp((function(n){const r=Kt(n);return new le(r.seconds,r.nanos)})(t))}function dl(t,e){return Ui(t,e).canonicalString()}function Ui(t,e){const n=(function(s){return new fe(["projects",s.projectId,"databases",s.database])})(t).child("documents");return e===void 0?n:n.child(e)}function lm(t){const e=fe.fromString(t);return ge(ym(e),10190,{key:e.toString()}),e}function ji(t,e){return dl(t.databaseId,e.path)}function hm(t){const e=lm(t);return e.length===4?fe.emptyPath():dm(e)}function fm(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dm(t){return ge(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function gc(t,e,n){return{name:ji(t,e),fields:n.value.mapValue.fields}}function pm(t,e){let n;if(e instanceof Ir)n={update:gc(t,e.key,e.value)};else if(e instanceof fl)n={delete:ji(t,e.key)};else if(e instanceof Yt)n={update:gc(t,e.key,e.data),updateMask:_m(e.fieldMask)};else{if(!(e instanceof nm))return K(16599,{Vt:e.type});n={verify:ji(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(o,a){const u=a.transform;if(u instanceof mr)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof gr)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof _r)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof ws)return{fieldPath:a.field.canonicalString(),increment:u.Ae};throw K(20930,{transform:a.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(s,o){return o.updateTime!==void 0?{updateTime:um(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K(27497)})(t,e.precondition)),n}function mm(t,e){return t&&t.length>0?(ge(e!==void 0,14353),t.map((n=>(function(s,o){let a=s.updateTime?dn(s.updateTime):dn(o);return a.isEqual(ue.min())&&(a=dn(o)),new Yp(a,s.transformResults||[])})(n,e)))):[]}function gm(t){let e=hm(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ge(r===1,65062);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let o=[];n.where&&(o=(function(g){const T=pl(g);return T instanceof kt&&Qu(T)?T.getFilters():[T]})(n.where));let a=[];n.orderBy&&(a=(function(g){return g.map((T=>(function(S){return new vs(ln(S.field),(function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(S.direction))})(T)))})(n.orderBy));let u=null;n.limit&&(u=(function(g){let T;return T=typeof g=="object"?g.value:g,fo(T)?null:T})(n.limit));let h=null;n.startAt&&(h=(function(g){const T=!!g.before,R=g.values||[];return new ys(R,T)})(n.startAt));let f=null;return n.endAt&&(f=(function(g){const T=!g.before,R=g.values||[];return new ys(R,T)})(n.endAt)),zp(e,s,a,o,u,"F",h,f)}function pl(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ln(n.unaryFilter.field);return Se.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ln(n.unaryFilter.field);return Se.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ln(n.unaryFilter.field);return Se.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ln(n.unaryFilter.field);return Se.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return K(61313);default:return K(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Se.create(ln(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return K(58110);default:return K(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return kt.create(n.compositeFilter.filters.map((r=>pl(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return K(1026)}})(n.compositeFilter.op))})(t):K(30097,{filter:t})}function ln(t){return De.fromServerFormat(t.fieldPath)}function _m(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function ym(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e){this.yt=e}}function Em(t){const e=gm({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Li(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wm{constructor(){this.Cn=new Tm}addToCollectionParentIndex(e,n){return this.Cn.add(n),C.resolve()}getCollectionParents(e,n){return C.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return C.resolve()}deleteFieldIndex(e,n){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,n){return C.resolve()}getDocumentsMatchingTarget(e,n){return C.resolve(null)}getIndexType(e,n){return C.resolve(0)}getFieldIndexes(e,n){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,n){return C.resolve(Ct.min())}getMinOffsetFromCollectionGroup(e,n){return C.resolve(Ct.min())}updateCollectionGroup(e,n,r){return C.resolve()}updateIndexEntries(e,n){return C.resolve()}}class Tm{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ne(fe.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ne(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ml=41943040;class je{static withCacheSize(e){return new je(e,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */je.DEFAULT_COLLECTION_PERCENTILE=10,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,je.DEFAULT=new je(ml,je.DEFAULT_COLLECTION_PERCENTILE,je.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),je.DISABLED=new je(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new En(0)}static cr(){return new En(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yc="LruGarbageCollector",Im=1048576;function vc([t,e],[n,r]){const s=ne(t,n);return s===0?ne(e,r):s}class Am{constructor(e){this.Ir=e,this.buffer=new Ne(vc),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();vc(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bm{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){z(yc,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Tr(n)?z(yc,"Ignoring IndexedDB error during garbage collection: ",n):await uo(n)}await this.Vr(3e5)}))}}class Sm{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return C.resolve(lo.ce);const r=new Am(n);return this.mr.forEachTarget(e,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),C.resolve(_c)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_c):this.yr(e,n)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,a,u,h,f;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((g=>(g>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${g}`),s=this.params.maximumSequenceNumbersToCollect):s=g,a=Date.now(),this.nthSequenceNumber(e,s)))).next((g=>(r=g,u=Date.now(),this.removeTargets(e,r,n)))).next((g=>(o=g,h=Date.now(),this.removeOrphanedDocuments(e,r)))).next((g=>(f=Date.now(),un()<=J.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-p}ms
	Determined least recently used ${s} in `+(u-a)+`ms
	Removed ${o} targets in `+(h-u)+`ms
	Removed ${g} documents in `+(f-h)+`ms
Total Duration: ${f-p}ms`),C.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:g}))))}}function Rm(t,e){return new Sm(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(){this.changes=new Xt((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Qe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?C.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(e,n)))).next((s=>(r!==null&&cr(r.mutation,s,Ye.empty(),le.now()),s)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,ze()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=ze()){const s=Bt();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,r).next((o=>{let a=Jr();return o.forEach(((u,h)=>{a=a.insert(u,h.overlayedDocument)})),a}))))}getOverlayedDocuments(e,n){const r=Bt();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,ze())))}populateOverlays(e,n,r){const s=[];return r.forEach((o=>{n.has(o)||s.push(o)})),this.documentOverlayCache.getOverlays(e,s).next((o=>{o.forEach(((a,u)=>{n.set(a,u)}))}))}computeViews(e,n,r,s){let o=Es();const a=ar(),u=(function(){return ar()})();return n.forEach(((h,f)=>{const p=r.get(f.key);s.has(f.key)&&(p===void 0||p.mutation instanceof Yt)?o=o.insert(f.key,f):p!==void 0?(a.set(f.key,p.mutation.getFieldMask()),cr(p.mutation,f,p.mutation.getFieldMask(),le.now())):a.set(f.key,Ye.empty())})),this.recalculateAndSaveOverlays(e,o).next((h=>(h.forEach(((f,p)=>a.set(f,p))),n.forEach(((f,p)=>u.set(f,new Cm(p,a.get(f)??null)))),u)))}recalculateAndSaveOverlays(e,n){const r=ar();let s=new Ze(((a,u)=>a-u)),o=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((a=>{for(const u of a)u.keys().forEach((h=>{const f=n.get(h);if(f===null)return;let p=r.get(h)||Ye.empty();p=u.applyToLocalView(f,p),r.set(h,p);const g=(s.get(u.batchId)||ze()).add(h);s=s.insert(u.batchId,g)}))})).next((()=>{const a=[],u=s.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),f=h.key,p=h.value,g=sl();p.forEach((T=>{if(!o.has(T)){const R=ll(n.get(T),r.get(T));R!==null&&g.set(T,R),o=o.add(T)}})),a.push(this.documentOverlayCache.saveOverlays(e,f,g))}return C.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,s){return(function(a){return q.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Lp(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next((o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):C.resolve(Bt());let u=dr,h=o;return a.next((f=>C.forEach(f,((p,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),o.get(p)?C.resolve():this.remoteDocumentCache.getEntry(e,p).next((T=>{h=h.insert(p,T)}))))).next((()=>this.populateOverlays(e,f,o))).next((()=>this.computeViews(e,h,f,ze()))).next((p=>({batchId:u,changes:rl(p)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next((r=>{let s=Jr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=Jr();return this.indexManager.getCollectionParents(e,o).next((u=>C.forEach(u,(h=>{const f=(function(g,T){return new Vs(T,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)})(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,s).next((p=>{p.forEach(((g,T)=>{a=a.insert(g,T)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s)))).next((a=>{o.forEach(((h,f)=>{const p=f.getKey();a.get(p)===null&&(a=a.insert(p,Qe.newInvalidDocument(p)))}));let u=Jr();return a.forEach(((h,f)=>{const p=o.get(h);p!==void 0&&cr(p.mutation,f,Ye.empty(),le.now()),vo(n,f)&&(u=u.insert(h,f))})),u}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return C.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:dn(s.createTime)}})(n)),C.resolve()}getNamedQuery(e,n){return C.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:Em(s.bundledQuery),readTime:dn(s.readTime)}})(n)),C.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.overlays=new Ze(q.comparator),this.qr=new Map}getOverlay(e,n){return C.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bt();return C.forEach(n,(s=>this.getOverlay(e,s).next((o=>{o!==null&&r.set(s,o)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((s,o)=>{this.St(e,n,o)})),C.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((o=>this.overlays=this.overlays.remove(o))),this.qr.delete(r)),C.resolve()}getOverlaysForCollection(e,n,r){const s=Bt(),o=n.length+1,a=new q(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,f=h.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&s.set(h.getKey(),h)}return C.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new Ze(((f,p)=>f-p));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let p=o.get(f.largestBatchId);p===null&&(p=Bt(),o=o.insert(f.largestBatchId,p)),p.set(f.getKey(),f)}}const u=Bt(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,p)=>u.set(f,p))),!(u.size()>=s)););return C.resolve(u)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new sm(n,r));let o=this.qr.get(n);o===void 0&&(o=ze(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return C.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,C.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.Qr=new Ne(be.$r),this.Ur=new Ne(be.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new be(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Gr(new be(e,n))}zr(e,n){e.forEach((r=>this.removeReference(r,n)))}jr(e){const n=new q(new fe([])),r=new be(n,e),s=new be(n,e+1),o=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),o.push(a.key)})),o}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new q(new fe([])),r=new be(n,e),s=new be(n,e+1);let o=ze();return this.Ur.forEachInRange([r,s],(a=>{o=o.add(a.key)})),o}containsKey(e){const n=new be(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class be{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return q.comparator(e.key,n.key)||ne(e.Yr,n.Yr)}static Kr(e,n){return ne(e.Yr,n.Yr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new Ne(be.$r)}checkEmpty(e){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new rm(o,n,r,s);this.mutationQueue.push(a);for(const u of s)this.Zr=this.Zr.add(new be(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return C.resolve(a)}lookupMutationBatch(e,n){return C.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return C.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?ho:this.tr-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new be(n,0),s=new be(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],(a=>{const u=this.Xr(a.Yr);o.push(u)})),C.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ne(ne);return n.forEach((s=>{const o=new be(s,0),a=new be(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],(u=>{r=r.add(u.Yr)}))})),C.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;q.isDocumentKey(o)||(o=o.child(""));const a=new be(new q(o),0);let u=new Ne(ne);return this.Zr.forEachWhile((h=>{const f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(u=u.add(h.Yr)),!0)}),a),C.resolve(this.ti(u))}ti(e){const n=[];return e.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(e,n){ge(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return C.forEach(n.mutations,(s=>{const o=new be(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=r}))}ir(e){}containsKey(e,n){const r=new be(n,0),s=this.Zr.firstAfterOrEqual(r);return C.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,C.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.ri=e,this.docs=(function(){return new Ze(q.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return C.resolve(r?r.document.mutableCopy():Qe.newInvalidDocument(n))}getEntries(e,n){let r=Es();return n.forEach((s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Qe.newInvalidDocument(s))})),C.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=Es();const a=n.path,u=new q(a.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:f,value:{document:p}}=h.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||pp(dp(p),r)<=0||(s.has(p.key)||vo(n,p))&&(o=o.insert(p.key,p.mutableCopy()))}return C.resolve(o)}getAllFromCollectionGroup(e,n,r,s){K(9500)}ii(e,n){return C.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new Mm(this)}getSize(e){return C.resolve(this.size)}}class Mm extends Pm{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)})),C.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e){this.persistence=e,this.si=new Xt((n=>_o(n)),yo),this.lastRemoteSnapshotVersion=ue.min(),this.highestTargetId=0,this.oi=0,this._i=new To,this.targetCount=0,this.ai=En.ur()}forEachTarget(e,n){return this.si.forEach(((r,s)=>n(s))),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),C.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new En(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,C.resolve()}updateTargetData(e,n){return this.Pr(n),C.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach(((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)})),C.waitFor(o).next((()=>s))}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return C.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),C.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach((a=>{o.push(s.markPotentiallyOrphaned(e,a))})),C.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),C.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return C.resolve(r)}containsKey(e,n){return C.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl{constructor(e,n){this.ui={},this.overlays={},this.ci=new lo(0),this.li=!1,this.li=!0,this.hi=new Nm,this.referenceDelegate=e(this),this.Pi=new zm(this),this.indexManager=new wm,this.remoteDocumentCache=(function(s){return new xm(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new vm(n),this.Ii=new Vm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Dm,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Om(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const s=new $m(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((o=>this.referenceDelegate.di(s).next((()=>o)))).toPromise().then((o=>(s.raiseOnCommittedEvent(),o)))}Ai(e,n){return C.or(Object.values(this.ui).map((r=>()=>r.containsKey(e,n))))}}class $m extends gp{constructor(e){super(),this.currentSequenceNumber=e}}class Io{constructor(e){this.persistence=e,this.Ri=new To,this.Vi=null}static mi(e){return new Io(e)}get fi(){if(this.Vi)return this.Vi;throw K(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),C.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),C.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((s=>{s.forEach((o=>this.fi.add(o.toString())))})).next((()=>r.removeTargetData(e,n)))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.fi,(r=>{const s=q.fromPath(r);return this.gi(e,s).next((o=>{o||n.removeEntry(s,ue.min())}))})).next((()=>(this.Vi=null,n.apply(e))))}updateLimboDocument(e,n){return this.gi(e,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(e){return 0}gi(e,n){return C.or([()=>C.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Ts{constructor(e,n){this.persistence=e,this.pi=new Xt((r=>vp(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=Rm(this,n)}static mi(e,n){return new Ts(e,n)}Ei(){}di(e){return C.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((s=>r+s))))}wr(e){let n=0;return this.pr(e,(r=>{n++})).next((()=>n))}pr(e,n){return C.forEach(this.pi,((r,s)=>this.br(e,r,s).next((o=>o?C.resolve():n(s)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,(a=>this.br(e,a,n).next((u=>{u||(r++,o.removeEntry(a,ue.min()))})))).next((()=>o.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),C.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),C.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),C.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),C.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=ss(e.data.value)),n}br(e,n,r){return C.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return C.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=ze(),s=ze();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Ao(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lm{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return xf()?8:_p(Nf())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next((a=>{o.result=a})).next((()=>{if(!o.result)return this.ws(e,n,s,r).next((a=>{o.result=a}))})).next((()=>{if(o.result)return;const a=new Lm;return this.Ss(e,n,a).next((u=>{if(o.result=u,this.Vs)return this.bs(e,n,a,u.size)}))})).next((()=>o.result))}bs(e,n,r,s){return r.documentReadCount<this.fs?(un()<=J.DEBUG&&z("QueryEngine","SDK will not create cache indexes for query:",Jn(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),C.resolve()):(un()<=J.DEBUG&&z("QueryEngine","Query:",Jn(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(un()<=J.DEBUG&&z("QueryEngine","The SDK decides to create cache indexes for query:",Jn(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,qt(n))):C.resolve())}ys(e,n){if(hc(n))return C.resolve(null);let r=qt(n);return this.indexManager.getIndexType(e,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=Li(n,null,"F"),r=qt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((o=>{const a=ze(...o);return this.ps.getDocuments(e,a).next((u=>this.indexManager.getMinOffset(e,r).next((h=>{const f=this.Ds(n,u);return this.Cs(n,f,a,h.readTime)?this.ys(e,Li(n,null,"F")):this.vs(e,f,n,h)}))))})))))}ws(e,n,r,s){return hc(n)||s.isEqual(ue.min())?C.resolve(null):this.ps.getDocuments(e,r).next((o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,s)?C.resolve(null):(un()<=J.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Jn(n)),this.vs(e,a,n,fp(s,dr)).next((u=>u)))}))}Ds(e,n){let r=new Ne(Up(e));return n.forEach(((s,o)=>{vo(e,o)&&(r=r.add(o))})),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return un()<=J.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Jn(n)),this.ps.getDocumentsMatchingQuery(e,n,Ct.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next((o=>(n.forEach((a=>{o=o.insert(a.key,a)})),o)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um="LocalStore";class jm{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Ze(ne),this.xs=new Xt((o=>_o(o)),yo),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new km(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.Ms)))}}function Bm(t,e,n,r){return new jm(t,e,n,r)}async function _l(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r)))).next((o=>{const a=[],u=[];let h=ze();for(const f of s){a.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}for(const f of o){u.push(f.batchId);for(const p of f.mutations)h=h.add(p.key)}return n.localDocuments.getDocuments(r,h).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:u})))}))}))}function Zm(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(u,h,f,p){const g=f.batch,T=g.keys();let R=C.resolve();return T.forEach((S=>{R=R.next((()=>p.getEntry(h,S))).next((V=>{const N=f.docVersions.get(S);ge(N!==null,48541),V.version.compareTo(N)<0&&(g.applyToRemoteDocument(V,f),V.isValidDocument()&&(V.setReadTime(f.commitVersion),p.addEntry(V)))}))})),R.next((()=>u.mutationQueue.removeMutationBatch(h,g)))})(n,r,e,o).next((()=>o.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(u){let h=ze();for(let f=0;f<u.mutationResults.length;++f)u.mutationResults[f].transformResults.length>0&&(h=h.add(u.batch.mutations[f].key));return h})(e)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function qm(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.Pi.getLastRemoteSnapshotVersion(n)))}function Gm(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ho),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}class Ec{constructor(){this.activeTargetIds=Hp()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Hm{constructor(){this.Mo=new Ec,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ec,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc="ConnectivityMonitor";class Tc{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){z(wc,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){z(wc,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr=null;function Bi(){return Xr===null?Xr=(function(){return 268435456+Math.round(2147483648*Math.random())})():Xr++,"0x"+Xr.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="RestConnection",Wm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qm{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===gs?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const a=Bi(),u=this.zo(e,n.toUriEncodedString());z(_i,`Sending RPC '${e}' ${a}:`,u,r);const h={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(h,s,o);const{host:f}=new URL(u),p=ro(f);return this.Jo(e,u,h,r,p).then((g=>(z(_i,`Received RPC '${e}' ${a}: `,g),g)),(g=>{throw ks(_i,`RPC '${e}' ${a} failed with error: `,g,"url: ",u,"request:",r),g}))}Ho(e,n,r,s,o,a){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Tn})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,o)=>e[o]=s)),r&&r.headers.forEach(((s,o)=>e[o]=s))}zo(e,n){const r=Wm[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xe="WebChannelConnection";class Xm extends Qm{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const a=Bi();return new Promise(((u,h)=>{const f=new Cu;f.setWithCredentials(!0),f.listenOnce(ku.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case rs.NO_ERROR:const g=f.getResponseJson();z(xe,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(g)),u(g);break;case rs.TIMEOUT:z(xe,`RPC '${e}' ${a} timed out`),h(new L(k.DEADLINE_EXCEEDED,"Request time out"));break;case rs.HTTP_ERROR:const T=f.getStatus();if(z(xe,`RPC '${e}' ${a} failed with status:`,T,"response text:",f.getResponseText()),T>0){let R=f.getResponseJson();Array.isArray(R)&&(R=R[0]);const S=R==null?void 0:R.error;if(S&&S.status&&S.message){const V=(function(B){const F=B.toLowerCase().replace(/_/g,"-");return Object.values(k).indexOf(F)>=0?F:k.UNKNOWN})(S.status);h(new L(V,S.message))}else h(new L(k.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new L(k.UNAVAILABLE,"Connection failed."));break;default:K(9055,{l_:e,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{z(xe,`RPC '${e}' ${a} completed.`)}}));const p=JSON.stringify(s);z(xe,`RPC '${e}' ${a} sending request:`,s),f.send(n,"POST",p,r,15)}))}T_(e,n,r){const s=Bi(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=Nu(),u=Du(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.useFetchStreams=!0),this.jo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const p=o.join("");z(xe,`Creating RPC '${e}' stream ${s}: ${p}`,h);const g=a.createWebChannel(p,h);this.I_(g);let T=!1,R=!1;const S=new Jm({Yo:N=>{R?z(xe,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(T||(z(xe,`Opening RPC '${e}' stream ${s} transport.`),g.open(),T=!0),z(xe,`RPC '${e}' stream ${s} sending:`,N),g.send(N))},Zo:()=>g.close()}),V=(N,B,F)=>{N.listen(B,(j=>{try{F(j)}catch(Z){setTimeout((()=>{throw Z}),0)}}))};return V(g,er.EventType.OPEN,(()=>{R||(z(xe,`RPC '${e}' stream ${s} transport opened.`),S.o_())})),V(g,er.EventType.CLOSE,(()=>{R||(R=!0,z(xe,`RPC '${e}' stream ${s} transport closed`),S.a_(),this.E_(g))})),V(g,er.EventType.ERROR,(N=>{R||(R=!0,ks(xe,`RPC '${e}' stream ${s} transport errored. Name:`,N.name,"Message:",N.message),S.a_(new L(k.UNAVAILABLE,"The operation could not be completed")))})),V(g,er.EventType.MESSAGE,(N=>{var B;if(!R){const F=N.data[0];ge(!!F,16349);const j=F,Z=(j==null?void 0:j.error)||((B=j[0])==null?void 0:B.error);if(Z){z(xe,`RPC '${e}' stream ${s} received error:`,Z);const H=Z.status;let re=(function(y){const w=ve[y];if(w!==void 0)return om(w)})(H),v=Z.message;re===void 0&&(re=k.INTERNAL,v="Unknown error status: "+H+" with message "+Z.message),R=!0,S.a_(new L(re,v)),g.close()}else z(xe,`RPC '${e}' stream ${s} received:`,F),S.u_(F)}})),V(u,Vu.STAT_EVENT,(N=>{N.stat===Ni.PROXY?z(xe,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Ni.NOPROXY&&z(xe,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{S.__()}),0),S}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((n=>n===e))}}function yi(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){return new am(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yl{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="PersistentStream";class Ym{constructor(e,n,r,s,o,a,u,h){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new yl(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===k.RESOURCE_EXHAUSTED?(Ht(n.toString()),Ht("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===k.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{e((()=>{const s=new L(k.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return z(Ic,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget((()=>this.D_===e?n():(z(Ic,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class eg extends Ym{constructor(e,n,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return ge(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ge(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ge(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=mm(e.writeResults,e.commitTime),r=dn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=fm(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>pm(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{}class ng extends tg{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new L(k.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Go(e,Ui(n,r),s,o,a))).catch((o=>{throw o.name==="FirebaseError"?(o.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new L(k.UNKNOWN,o.toString())}))}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,u])=>this.connection.Ho(e,Ui(n,r),s,a,u,o))).catch((a=>{throw a.name==="FirebaseError"?(a.code===k.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new L(k.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class rg{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Ht(n),this.aa=!1):z("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="RemoteStore";class sg{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{Sr(this)&&(z(Ar,"Restarting streams for network reachability change."),await(async function(h){const f=ae(h);f.Ea.add(4),await br(f),f.Ra.set("Unknown"),f.Ea.delete(4),await xs(f)})(this))}))})),this.Ra=new rg(r,s)}}async function xs(t){if(Sr(t))for(const e of t.da)await e(!0)}async function br(t){for(const e of t.da)await e(!1)}function Sr(t){return ae(t).Ea.size===0}async function vl(t,e,n){if(!Tr(e))throw e;t.Ea.add(1),await br(t),t.Ra.set("Offline"),n||(n=()=>qm(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{z(Ar,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xs(t)}))}function El(t,e){return e().catch((n=>vl(t,n,e)))}async function Ms(t){const e=ae(t),n=Vt(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:ho;for(;ig(e);)try{const s=await Gm(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,og(e,s)}catch(s){await vl(e,s)}wl(e)&&Tl(e)}function ig(t){return Sr(t)&&t.Ta.length<10}function og(t,e){t.Ta.push(e);const n=Vt(t);n.O_()&&n.X_&&n.ea(e.mutations)}function wl(t){return Sr(t)&&!Vt(t).x_()&&t.Ta.length>0}function Tl(t){Vt(t).start()}async function ag(t){Vt(t).ra()}async function cg(t){const e=Vt(t);for(const n of t.Ta)e.ea(n.mutations)}async function ug(t,e,n){const r=t.Ta.shift(),s=wo.from(r,e,n);await El(t,(()=>t.remoteSyncer.applySuccessfulWrite(s))),await Ms(t)}async function lg(t,e){e&&Vt(t).X_&&await(async function(r,s){if((function(a){return im(a)&&a!==k.ABORTED})(s.code)){const o=r.Ta.shift();Vt(r).B_(),await El(r,(()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s))),await Ms(r)}})(t,e),wl(t)&&Tl(t)}async function Ac(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),z(Ar,"RemoteStore received new credentials");const r=Sr(n);n.Ea.add(3),await br(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xs(n)}async function hg(t,e){const n=ae(t);e?(n.Ea.delete(2),await xs(n)):e||(n.Ea.add(2),await br(n),n.Ra.set("Unknown"))}function Vt(t){return t.fa||(t.fa=(function(n,r,s){const o=ae(n);return o.sa(),new eg(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ag.bind(null,t),r_:lg.bind(null,t),ta:cg.bind(null,t),na:ug.bind(null,t)}),t.da.push((async e=>{e?(t.fa.B_(),await Ms(t)):(await t.fa.stop(),t.Ta.length>0&&(z(Ar,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new Zt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,u=new bo(e,n,a,s,o);return u.start(r),u}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new L(k.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Il(t,e){if(Ht("AsyncQueue",`${e}: ${t}`),Tr(t))return new L(k.UNAVAILABLE,`${e}: ${t}`);throw t}class fg{constructor(){this.queries=bc(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),o=s.queries;s.queries=bc(),o.forEach(((a,u)=>{for(const h of u.Sa)h.onError(r)}))})(this,new L(k.ABORTED,"Firestore shutting down"))}}function bc(){return new Xt((t=>tl(t)),el)}function dg(t){t.Ca.forEach((e=>{e.next()}))}var Sc,Rc;(Rc=Sc||(Sc={})).Ma="default",Rc.Cache="cache";const pg="SyncEngine";class mg{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Xt((u=>tl(u)),el),this.Iu=new Map,this.Eu=new Set,this.du=new Ze(q.comparator),this.Au=new Map,this.Ru=new To,this.Vu={},this.mu=new Map,this.fu=En.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gg(t,e,n){const r=Eg(t);try{const s=await(function(a,u){const h=ae(a),f=le.now(),p=u.reduce(((R,S)=>R.add(S.key)),ze());let g,T;return h.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let S=Es(),V=ze();return h.Ns.getEntries(R,p).next((N=>{S=N,S.forEach(((B,F)=>{F.isValidDocument()||(V=V.add(B))}))})).next((()=>h.localDocuments.getOverlayedDocuments(R,S))).next((N=>{g=N;const B=[];for(const F of u){const j=tm(F,g.get(F.key).overlayedDocument);j!=null&&B.push(new Yt(F.key,j,Hu(j.value.mapValue),ut.exists(!0)))}return h.mutationQueue.addMutationBatch(R,f,B,u)})).next((N=>{T=N;const B=N.applyToLocalDocumentSet(g,V);return h.documentOverlayCache.saveOverlays(R,N.batchId,B)}))})).then((()=>({batchId:T.batchId,changes:rl(g)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),(function(a,u,h){let f=a.Vu[a.currentUser.toKey()];f||(f=new Ze(ne)),f=f.insert(u,h),a.Vu[a.currentUser.toKey()]=f})(r,s.batchId,n),await zs(r,s.changes),await Ms(r.remoteStore)}catch(s){const o=Il(s,"Failed to persist write");n.reject(o)}}function Pc(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((o,a)=>{const u=a.view.va(e);u.snapshot&&s.push(u.snapshot)})),(function(a,u){const h=ae(a);h.onlineState=u;let f=!1;h.queries.forEach(((p,g)=>{for(const T of g.Sa)T.va(u)&&(f=!0)})),f&&dg(h)})(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _g(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await Zm(n.localStore,e);bl(n,r,null),Al(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zs(n,s)}catch(s){await uo(s)}}async function yg(t,e,n){const r=ae(t);try{const s=await(function(a,u){const h=ae(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let p;return h.mutationQueue.lookupMutationBatch(f,u).next((g=>(ge(g!==null,37113),p=g.keys(),h.mutationQueue.removeMutationBatch(f,g)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,p,u))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,p))).next((()=>h.localDocuments.getDocuments(f,p)))}))})(r.localStore,e);bl(r,e,n),Al(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zs(r,s)}catch(s){await uo(s)}}function Al(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function bl(t,e,n){const r=ae(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}async function zs(t,e,n){const r=ae(t),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((u,h)=>{a.push(r.pu(h,e,n).then((f=>{var p;if((f||n)&&r.isPrimaryClient){const g=f?!f.fromCache:(p=n==null?void 0:n.targetChanges.get(h.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(h.targetId,g?"current":"not-current")}if(f){s.push(f);const g=Ao.As(h.targetId,f);o.push(g)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(h,f){const p=ae(h);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",(g=>C.forEach(f,(T=>C.forEach(T.Es,(R=>p.persistence.referenceDelegate.addReference(g,T.targetId,R))).next((()=>C.forEach(T.ds,(R=>p.persistence.referenceDelegate.removeReference(g,T.targetId,R)))))))))}catch(g){if(!Tr(g))throw g;z(Um,"Failed to update sequence numbers: "+g)}for(const g of f){const T=g.targetId;if(!g.fromCache){const R=p.Ms.get(T),S=R.snapshotVersion,V=R.withLastLimboFreeSnapshotVersion(S);p.Ms=p.Ms.insert(T,V)}}})(r.localStore,o))}async function vg(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){z(pg,"User change. New user:",e.toKey());const r=await _l(n.localStore,e);n.currentUser=e,(function(o,a){o.mu.forEach((u=>{u.forEach((h=>{h.reject(new L(k.CANCELLED,a))}))})),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zs(n,r.Ls)}}function Eg(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_g.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yg.bind(null,e),e}class Is{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Os(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Bm(this.persistence,new Fm,e.initialUser,this.serializer)}Cu(e){return new gl(Io.mi,this.serializer)}Du(e){return new Hm}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Is.provider={build:()=>new Is};class wg extends Is{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ge(this.persistence.referenceDelegate instanceof Ts,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new bm(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?je.withCacheSize(this.cacheSizeBytes):je.DEFAULT;return new gl((r=>Ts.mi(r,n)),this.serializer)}}class Zi{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Pc(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=vg.bind(null,this.syncEngine),await hg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new fg})()}createDatastore(e){const n=Os(e.databaseInfo.databaseId),r=(function(o){return new Xm(o)})(e.databaseInfo);return(function(o,a,u,h){return new ng(o,a,u,h)})(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,s,o,a,u){return new sg(r,s,o,a,u)})(this.localStore,this.datastore,e.asyncQueue,(n=>Pc(this.syncEngine,n,0)),(function(){return Tc.v()?new Tc:new Km})())}createSyncEngine(e,n){return(function(s,o,a,u,h,f,p){const g=new mg(s,o,a,u,h,f);return p&&(g.gu=!0),g})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(s){const o=ae(s);z(Ar,"RemoteStore shutting down."),o.Ea.add(5),await br(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Zi.provider={build:()=>new Zi};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="FirestoreClient";class Tg{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Me.UNAUTHENTICATED,this.clientId=ao.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,(async a=>{z(Dt,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(z(Dt,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Zt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Il(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function vi(t,e){t.asyncQueue.verifyOperationInProgress(),z(Dt,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async s=>{r.isEqual(s)||(await _l(e.localStore,s),r=s)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Cc(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ig(t);z(Dt,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>Ac(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,s)=>Ac(e.remoteStore,s))),t._onlineComponents=e}async function Ig(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){z(Dt,"Using user provided OfflineComponentProvider");try{await vi(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(s){return s.name==="FirebaseError"?s.code===k.FAILED_PRECONDITION||s.code===k.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;ks("Error using user provided cache. Falling back to memory cache: "+n),await vi(t,new Is)}}else z(Dt,"Using default OfflineComponentProvider"),await vi(t,new wg(void 0));return t._offlineComponents}async function Ag(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(z(Dt,"Using user provided OnlineComponentProvider"),await Cc(t,t._uninitializedComponentsProvider._online)):(z(Dt,"Using default OnlineComponentProvider"),await Cc(t,new Zi))),t._onlineComponents}function bg(t){return Ag(t).then((e=>e.syncEngine))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rl="firestore.googleapis.com",Vc=!0;class Dc{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new L(k.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Rl,this.ssl=Vc}else this.host=e.host,this.ssl=e.ssl??Vc;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=ml;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Im)throw new L(k.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hp("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Sl(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new L(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new L(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new L(k.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class $s{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Dc({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(k.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new L(k.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Dc(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new tp;switch(r.type){case"firstParty":return new ip(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new L(k.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=kc.get(n);r&&(z("ComponentProvider","Removing Datastore"),kc.delete(n),r.terminate())})(this),Promise.resolve()}}function Sg(t,e,n,r={}){var f;t=$u(t,$s);const s=ro(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(Pf(`https://${u}`),Df("Firestore",!0)),o.host!==Rl&&o.host!==u&&ks("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const h={...o,host:u,ssl:s,emulatorOptions:r};if(!hs(h,a)&&(t._setSettings(h),r.mockUserToken)){let p,g;if(typeof r.mockUserToken=="string")p=r.mockUserToken,g=Me.MOCK_USER;else{p=Cf(r.mockUserToken,(f=t._app)==null?void 0:f.options.projectId);const T=r.mockUserToken.sub||r.mockUserToken.user_id;if(!T)throw new L(k.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new Me(T)}t._authCredentials=new np(new xu(p,g))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new So(this.firestore,e,this._query)}}class $e{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}toJSON(){return{type:$e._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(wr(n,$e._jsonSchema))return new $e(e,r||null,new q(fe.fromString(n.referencePath)))}}$e._jsonSchemaVersion="firestore/documentReference/1.0",$e._jsonSchema={type:Ee("string",$e._jsonSchemaVersion),referencePath:Ee("string")};class Pt extends So{constructor(e,n,r){super(e,n,$p(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new q(e))}withConverter(e){return new Pt(this.firestore,e,this._path)}}function Rg(t,e,...n){if(t=lr(t),Mu("collection","path",e),t instanceof $s){const r=fe.fromString(e,...n);return ec(r),new Pt(t,null,r)}{if(!(t instanceof $e||t instanceof Pt))throw new L(k.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return ec(r),new Pt(t.firestore,null,r)}}function Pg(t,e,...n){if(t=lr(t),arguments.length===1&&(e=ao.newId()),Mu("doc","path",e),t instanceof $s){const r=fe.fromString(e,...n);return Ya(r),new $e(t,null,new q(r))}{if(!(t instanceof $e||t instanceof Pt))throw new L(k.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return Ya(r),new $e(t.firestore,t instanceof Pt?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="AsyncQueue";class Oc{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new yl(this,"async_queue_retry"),this._c=()=>{const r=yi();r&&z(Nc,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yi();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yi();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Zt;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Tr(e))throw e;z(Nc,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Ht("INTERNAL UNHANDLED ERROR: ",xc(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=bo.createAndSchedule(this,e,n,r,(o=>this.hc(o)));return this.tc.push(s),s}uc(){this.nc&&K(47125,{Pc:xc(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function xc(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Pl extends $s{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Oc,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Oc(e),this._firestoreClient=void 0,await e}}}function Cg(t,e){const n=typeof t=="object"?t:jd(),r=typeof t=="string"?t:gs,s=zd(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=Sf("firestore");o&&Sg(s,...o)}return s}function kg(t){if(t._terminated)throw new L(k.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Vg(t),t._firestoreClient}function Vg(t){var r,s,o;const e=t._freezeSettings(),n=(function(u,h,f,p){return new Ip(u,h,f,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Sl(p.experimentalLongPollingOptions),p.useFetchStreams,p.isUsingEmulator)})(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Tg(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xe(st.fromBase64String(e))}catch(n){throw new L(k.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Xe(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Xe._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wr(e,Xe._jsonSchema))return Xe.fromBase64String(e.bytes)}}Xe._jsonSchemaVersion="firestore/bytes/1.0",Xe._jsonSchema={type:Ee("string",Xe._jsonSchemaVersion),bytes:Ee("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new L(k.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new De(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new L(k.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new L(k.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:lt._jsonSchemaVersion}}static fromJSON(e){if(wr(e,lt._jsonSchema))return new lt(e.latitude,e.longitude)}}lt._jsonSchemaVersion="firestore/geoPoint/1.0",lt._jsonSchema={type:Ee("string",lt._jsonSchemaVersion),latitude:Ee("number"),longitude:Ee("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ht._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wr(e,ht._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ht(e.vectorValues);throw new L(k.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ht._jsonSchemaVersion="firestore/vectorValue/1.0",ht._jsonSchema={type:Ee("string",ht._jsonSchemaVersion),vectorValues:Ee("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=/^__.*__$/;class Ng{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yt(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ir(e,this.data,n,this.fieldTransforms)}}function Cl(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K(40011,{Ac:t})}}class Co{constructor(e,n,r,s,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Co({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return As(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Cl(this.Ac)&&Dg.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Og{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Os(e)}Cc(e,n,r,s=!1){return new Co({Ac:e,methodName:n,Dc:r,path:De.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xg(t){const e=t._freezeSettings(),n=Os(t._databaseId);return new Og(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Mg(t,e,n,r,s,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);Nl("Data must be an object, but it was:",a,r);const u=Vl(r,a);let h,f;if(o.merge)h=new Ye(a.fieldMask),f=a.fieldTransforms;else if(o.mergeFields){const p=[];for(const g of o.mergeFields){const T=zg(e,g,n);if(!a.contains(T))throw new L(k.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);Lg(p,T)||p.push(T)}h=new Ye(p),f=a.fieldTransforms.filter((g=>h.covers(g.field)))}else h=null,f=a.fieldTransforms;return new Ng(new Je(u),h,f)}class ko extends Po{_toFieldTransform(e){return new Jp(e.path,new mr)}isEqual(e){return e instanceof ko}}function kl(t,e){if(Dl(t=lr(t)))return Nl("Unsupported field value:",e,t),Vl(t,e);if(t instanceof Po)return(function(r,s){if(!Cl(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,s){const o=[];let a=0;for(const u of r){let h=kl(u,s.wc(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}})(t,e)}return(function(r,s){if((r=lr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Kp(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=le.fromDate(r);return{timestampValue:Fi(s.serializer,o)}}if(r instanceof le){const o=new le(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fi(s.serializer,o)}}if(r instanceof lt)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xe)return{bytesValue:cm(s.serializer,r._byteString)};if(r instanceof $e){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:dl(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof ht)return(function(a,u){return{mapValue:{fields:{[qu]:{stringValue:Gu},[xi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw u.Sc("VectorValues must only contain numeric values.");return Eo(u.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${co(r)}`)})(t,e)}function Vl(t,e){const n={};return Fu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):In(t,((r,s)=>{const o=kl(s,e.mc(r));o!=null&&(n[r]=o)})),{mapValue:{fields:n}}}function Dl(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof le||t instanceof lt||t instanceof Xe||t instanceof $e||t instanceof Po||t instanceof ht)}function Nl(t,e,n){if(!Dl(n)||!zu(n)){const r=co(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function zg(t,e,n){if((e=lr(e))instanceof Ro)return e._internalPath;if(typeof e=="string")return Ol(t,e);throw As("Field path arguments must be of type string or ",t,!1,void 0,n)}const $g=new RegExp("[~\\*/\\[\\]]");function Ol(t,e,n){if(e.search($g)>=0)throw As(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ro(...e.split("."))._internalPath}catch{throw As(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function As(t,e,n,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${r}`),a&&(h+=` in document ${s}`),h+=")"),new L(k.INVALID_ARGUMENT,u+t+h)}function Lg(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Fg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ml("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Fg extends xl{data(){return super.data()}}function Ml(t,e){return typeof e=="string"?Ol(t,e):e instanceof Ro?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class Yr{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pn extends xl{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new as(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ml("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(k.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=pn._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}pn._jsonSchemaVersion="firestore/documentSnapshot/1.0",pn._jsonSchema={type:Ee("string",pn._jsonSchemaVersion),bundleSource:Ee("string","DocumentSnapshot"),bundleName:Ee("string"),bundle:Ee("string")};class as extends pn{data(e={}){return super.data(e)}}class ur{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yr(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new as(this._firestore,this._userDataWriter,r.key,r,new Yr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new L(k.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((u=>{const h=new as(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Yr(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((u=>o||u.type!==3)).map((u=>{const h=new as(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Yr(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,p=-1;return u.type!==0&&(f=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),p=a.indexOf(u.doc.key)),{type:jg(u.type),doc:h,oldIndex:f,newIndex:p}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(k.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ur._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=ao.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function jg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K(61501,{type:t})}}ur._jsonSchemaVersion="firestore/querySnapshot/1.0",ur._jsonSchema={type:Ee("string",ur._jsonSchemaVersion),bundleSource:Ee("string","QuerySnapshot"),bundleName:Ee("string"),bundle:Ee("string")};function Bg(t,e){const n=$u(t.firestore,Pl),r=Pg(t),s=Ug(t.converter,e);return Zg(n,[Mg(xg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,ut.exists(!1))]).then((()=>r))}function Zg(t,e){return(function(r,s){const o=new Zt;return r.asyncQueue.enqueueAndForget((async()=>gg(await bg(r),s,o))),o.promise})(kg(t),e)}function qg(){return new ko("serverTimestamp")}(function(e,n=!0){(function(s){Tn=s})(Ud),ds(new hr("firestore",((r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),u=new Pl(new rp(r.getProvider("auth-internal")),new op(a,r.getProvider("app-check-internal")),(function(f,p){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new L(k.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _s(f.options.projectId,p)})(a,s),a);return o={useFetchStreams:n,...o},u._setSettings(o),u}),"PUBLIC").setMultipleInstances(!0)),fn(Wa,Qa,e),fn(Wa,Qa,"esm2020")})();function P(t,e,n){function r(u,h){if(u._zod||Object.defineProperty(u,"_zod",{value:{def:h,constr:a,traits:new Set},enumerable:!1}),u._zod.traits.has(t))return;u._zod.traits.add(t),e(u,h);const f=a.prototype,p=Object.keys(f);for(let g=0;g<p.length;g++){const T=p[g];T in u||(u[T]=f[T].bind(u))}}const s=(n==null?void 0:n.Parent)??Object;class o extends s{}Object.defineProperty(o,"name",{value:t});function a(u){var h;const f=n!=null&&n.Parent?new o:this;r(f,u),(h=f._zod).deferred??(h.deferred=[]);for(const p of f._zod.deferred)p();return f}return Object.defineProperty(a,"init",{value:r}),Object.defineProperty(a,Symbol.hasInstance,{value:u=>{var h,f;return n!=null&&n.Parent&&u instanceof n.Parent?!0:(f=(h=u==null?void 0:u._zod)==null?void 0:h.traits)==null?void 0:f.has(t)}}),Object.defineProperty(a,"name",{value:t}),a}class mn extends Error{constructor(){super("Encountered Promise during synchronous parse. Use .parseAsync() instead.")}}class zl extends Error{constructor(e){super(`Encountered unidirectional transform during encode: ${e}`),this.name="ZodEncodeError"}}const $l={};function Qt(t){return $l}function Ll(t){const e=Object.values(t).filter(r=>typeof r=="number");return Object.entries(t).filter(([r,s])=>e.indexOf(+r)===-1).map(([r,s])=>s)}function qi(t,e){return typeof e=="bigint"?e.toString():e}function Vo(t){return{get value(){{const e=t();return Object.defineProperty(this,"value",{value:e}),e}}}}function Do(t){return t==null}function No(t){const e=t.startsWith("^")?1:0,n=t.endsWith("$")?t.length-1:t.length;return t.slice(e,n)}function Gg(t,e){const n=(t.toString().split(".")[1]||"").length,r=e.toString();let s=(r.split(".")[1]||"").length;if(s===0&&/\d?e-\d?/.test(r)){const h=r.match(/\d?e-(\d?)/);h!=null&&h[1]&&(s=Number.parseInt(h[1]))}const o=n>s?n:s,a=Number.parseInt(t.toFixed(o).replace(".","")),u=Number.parseInt(e.toFixed(o).replace(".",""));return a%u/10**o}const Mc=Symbol("evaluating");function oe(t,e,n){let r;Object.defineProperty(t,e,{get(){if(r!==Mc)return r===void 0&&(r=Mc,r=n()),r},set(s){Object.defineProperty(t,e,{value:s})},configurable:!0})}function en(t,e,n){Object.defineProperty(t,e,{value:n,writable:!0,enumerable:!0,configurable:!0})}function tn(...t){const e={};for(const n of t){const r=Object.getOwnPropertyDescriptors(n);Object.assign(e,r)}return Object.defineProperties({},e)}function zc(t){return JSON.stringify(t)}function Hg(t){return t.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}const Fl="captureStackTrace"in Error?Error.captureStackTrace:(...t)=>{};function bs(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)}const Kg=Vo(()=>{var t;if(typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)!=null&&t.includes("Cloudflare")))return!1;try{const e=Function;return new e(""),!0}catch{return!1}});function yr(t){if(bs(t)===!1)return!1;const e=t.constructor;if(e===void 0||typeof e!="function")return!0;const n=e.prototype;return!(bs(n)===!1||Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")===!1)}function Ul(t){return yr(t)?{...t}:Array.isArray(t)?[...t]:t}const Wg=new Set(["string","number","symbol"]);function Ls(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Nt(t,e,n){const r=new t._zod.constr(e??t._zod.def);return(!e||n!=null&&n.parent)&&(r._zod.parent=t),r}function $(t){const e=t;if(!e)return{};if(typeof e=="string")return{error:()=>e};if((e==null?void 0:e.message)!==void 0){if((e==null?void 0:e.error)!==void 0)throw new Error("Cannot specify both `message` and `error` params");e.error=e.message}return delete e.message,typeof e.error=="string"?{...e,error:()=>e.error}:e}function Qg(t){return Object.keys(t).filter(e=>t[e]._zod.optin==="optional"&&t[e]._zod.optout==="optional")}const Jg={safeint:[Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],int32:[-2147483648,2147483647],uint32:[0,4294967295],float32:[-34028234663852886e22,34028234663852886e22],float64:[-Number.MAX_VALUE,Number.MAX_VALUE]};function Xg(t,e){const n=t._zod.def,r=tn(t._zod.def,{get shape(){const s={};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&(s[o]=n.shape[o])}return en(this,"shape",s),s},checks:[]});return Nt(t,r)}function Yg(t,e){const n=t._zod.def,r=tn(t._zod.def,{get shape(){const s={...t._zod.def.shape};for(const o in e){if(!(o in n.shape))throw new Error(`Unrecognized key: "${o}"`);e[o]&&delete s[o]}return en(this,"shape",s),s},checks:[]});return Nt(t,r)}function e_(t,e){if(!yr(e))throw new Error("Invalid input to extend: expected a plain object");const n=t._zod.def.checks;if(n&&n.length>0)throw new Error("Object schemas containing refinements cannot be extended. Use `.safeExtend()` instead.");const s=tn(t._zod.def,{get shape(){const o={...t._zod.def.shape,...e};return en(this,"shape",o),o},checks:[]});return Nt(t,s)}function t_(t,e){if(!yr(e))throw new Error("Invalid input to safeExtend: expected a plain object");const n={...t._zod.def,get shape(){const r={...t._zod.def.shape,...e};return en(this,"shape",r),r},checks:t._zod.def.checks};return Nt(t,n)}function n_(t,e){const n=tn(t._zod.def,{get shape(){const r={...t._zod.def.shape,...e._zod.def.shape};return en(this,"shape",r),r},get catchall(){return e._zod.def.catchall},checks:[]});return Nt(t,n)}function r_(t,e,n){const r=tn(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const a in n){if(!(a in s))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(o[a]=t?new t({type:"optional",innerType:s[a]}):s[a])}else for(const a in s)o[a]=t?new t({type:"optional",innerType:s[a]}):s[a];return en(this,"shape",o),o},checks:[]});return Nt(e,r)}function s_(t,e,n){const r=tn(e._zod.def,{get shape(){const s=e._zod.def.shape,o={...s};if(n)for(const a in n){if(!(a in o))throw new Error(`Unrecognized key: "${a}"`);n[a]&&(o[a]=new t({type:"nonoptional",innerType:s[a]}))}else for(const a in s)o[a]=new t({type:"nonoptional",innerType:s[a]});return en(this,"shape",o),o},checks:[]});return Nt(e,r)}function hn(t,e=0){var n;if(t.aborted===!0)return!0;for(let r=e;r<t.issues.length;r++)if(((n=t.issues[r])==null?void 0:n.continue)!==!0)return!0;return!1}function jl(t,e){return e.map(n=>{var r;return(r=n).path??(r.path=[]),n.path.unshift(t),n})}function es(t){return typeof t=="string"?t:t==null?void 0:t.message}function Jt(t,e,n){var s,o,a,u,h,f;const r={...t,path:t.path??[]};if(!t.message){const p=es((a=(o=(s=t.inst)==null?void 0:s._zod.def)==null?void 0:o.error)==null?void 0:a.call(o,t))??es((u=e==null?void 0:e.error)==null?void 0:u.call(e,t))??es((h=n.customError)==null?void 0:h.call(n,t))??es((f=n.localeError)==null?void 0:f.call(n,t))??"Invalid input";r.message=p}return delete r.inst,delete r.continue,e!=null&&e.reportInput||delete r.input,r}function Oo(t){return Array.isArray(t)?"array":typeof t=="string"?"string":"unknown"}function vr(...t){const[e,n,r]=t;return typeof e=="string"?{message:e,code:"custom",input:n,inst:r}:{...e}}const Bl=(t,e)=>{t.name="$ZodError",Object.defineProperty(t,"_zod",{value:t._zod,enumerable:!1}),Object.defineProperty(t,"issues",{value:e,enumerable:!1}),t.message=JSON.stringify(e,qi,2),Object.defineProperty(t,"toString",{value:()=>t.message,enumerable:!1})},Zl=P("$ZodError",Bl),ql=P("$ZodError",Bl,{Parent:Error});function i_(t,e=n=>n.message){const n={},r=[];for(const s of t.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}function o_(t,e=n=>n.message){const n={_errors:[]},r=s=>{for(const o of s.issues)if(o.code==="invalid_union"&&o.errors.length)o.errors.map(a=>r({issues:a}));else if(o.code==="invalid_key")r({issues:o.issues});else if(o.code==="invalid_element")r({issues:o.issues});else if(o.path.length===0)n._errors.push(e(o));else{let a=n,u=0;for(;u<o.path.length;){const h=o.path[u];u===o.path.length-1?(a[h]=a[h]||{_errors:[]},a[h]._errors.push(e(o))):a[h]=a[h]||{_errors:[]},a=a[h],u++}}};return r(t),n}const xo=t=>(e,n,r,s)=>{const o=r?Object.assign(r,{async:!1}):{async:!1},a=e._zod.run({value:n,issues:[]},o);if(a instanceof Promise)throw new mn;if(a.issues.length){const u=new((s==null?void 0:s.Err)??t)(a.issues.map(h=>Jt(h,o,Qt())));throw Fl(u,s==null?void 0:s.callee),u}return a.value},Mo=t=>async(e,n,r,s)=>{const o=r?Object.assign(r,{async:!0}):{async:!0};let a=e._zod.run({value:n,issues:[]},o);if(a instanceof Promise&&(a=await a),a.issues.length){const u=new((s==null?void 0:s.Err)??t)(a.issues.map(h=>Jt(h,o,Qt())));throw Fl(u,s==null?void 0:s.callee),u}return a.value},Fs=t=>(e,n,r)=>{const s=r?{...r,async:!1}:{async:!1},o=e._zod.run({value:n,issues:[]},s);if(o instanceof Promise)throw new mn;return o.issues.length?{success:!1,error:new(t??Zl)(o.issues.map(a=>Jt(a,s,Qt())))}:{success:!0,data:o.value}},a_=Fs(ql),Us=t=>async(e,n,r)=>{const s=r?Object.assign(r,{async:!0}):{async:!0};let o=e._zod.run({value:n,issues:[]},s);return o instanceof Promise&&(o=await o),o.issues.length?{success:!1,error:new t(o.issues.map(a=>Jt(a,s,Qt())))}:{success:!0,data:o.value}},c_=Us(ql),u_=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return xo(t)(e,n,s)},l_=t=>(e,n,r)=>xo(t)(e,n,r),h_=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Mo(t)(e,n,s)},f_=t=>async(e,n,r)=>Mo(t)(e,n,r),d_=t=>(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Fs(t)(e,n,s)},p_=t=>(e,n,r)=>Fs(t)(e,n,r),m_=t=>async(e,n,r)=>{const s=r?Object.assign(r,{direction:"backward"}):{direction:"backward"};return Us(t)(e,n,s)},g_=t=>async(e,n,r)=>Us(t)(e,n,r),__=/^[cC][^\s-]{8,}$/,y_=/^[0-9a-z]+$/,v_=/^[0-9A-HJKMNP-TV-Za-hjkmnp-tv-z]{26}$/,E_=/^[0-9a-vA-V]{20}$/,w_=/^[A-Za-z0-9]{27}$/,T_=/^[a-zA-Z0-9_-]{21}$/,I_=/^P(?:(\d+W)|(?!.*W)(?=\d|T\d)(\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+([.,]\d+)?S)?)?)$/,A_=/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12})$/,$c=t=>t?new RegExp(`^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-${t}[0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12})$`):/^([0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-8][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/,b_=/^(?!\.)(?!.*\.\.)([A-Za-z0-9_'+\-\.]*)[A-Za-z0-9_+-]@([A-Za-z0-9][A-Za-z0-9\-]*\.)+[A-Za-z]{2,}$/,S_="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";function R_(){return new RegExp(S_,"u")}const P_=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,C_=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:))$/,k_=/^((25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/([0-9]|[1-2][0-9]|3[0-2])$/,V_=/^(([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|::|([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:?){0,6})\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,D_=/^$|^(?:[0-9a-zA-Z+/]{4})*(?:(?:[0-9a-zA-Z+/]{2}==)|(?:[0-9a-zA-Z+/]{3}=))?$/,Gl=/^[A-Za-z0-9_-]*$/,N_=/^\+(?:[0-9]){6,14}[0-9]$/,Hl="(?:(?:\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-(?:(?:0[13578]|1[02])-(?:0[1-9]|[12]\\d|3[01])|(?:0[469]|11)-(?:0[1-9]|[12]\\d|30)|(?:02)-(?:0[1-9]|1\\d|2[0-8])))",O_=new RegExp(`^${Hl}$`);function Kl(t){const e="(?:[01]\\d|2[0-3]):[0-5]\\d";return typeof t.precision=="number"?t.precision===-1?`${e}`:t.precision===0?`${e}:[0-5]\\d`:`${e}:[0-5]\\d\\.\\d{${t.precision}}`:`${e}(?::[0-5]\\d(?:\\.\\d+)?)?`}function x_(t){return new RegExp(`^${Kl(t)}$`)}function M_(t){const e=Kl({precision:t.precision}),n=["Z"];t.local&&n.push(""),t.offset&&n.push("([+-](?:[01]\\d|2[0-3]):[0-5]\\d)");const r=`${e}(?:${n.join("|")})`;return new RegExp(`^${Hl}T(?:${r})$`)}const z_=t=>{const e=t?`[\\s\\S]{${(t==null?void 0:t.minimum)??0},${(t==null?void 0:t.maximum)??""}}`:"[\\s\\S]*";return new RegExp(`^${e}$`)},$_=/^-?\d+$/,L_=/^-?\d+(?:\.\d+)?/,F_=/^(?:true|false)$/i,U_=/^[^A-Z]*$/,j_=/^[^a-z]*$/,qe=P("$ZodCheck",(t,e)=>{var n;t._zod??(t._zod={}),t._zod.def=e,(n=t._zod).onattach??(n.onattach=[])}),Wl={number:"number",bigint:"bigint",object:"date"},Ql=P("$ZodCheckLessThan",(t,e)=>{qe.init(t,e);const n=Wl[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.maximum:s.exclusiveMaximum)??Number.POSITIVE_INFINITY;e.value<o&&(e.inclusive?s.maximum=e.value:s.exclusiveMaximum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value<=e.value:r.value<e.value)||r.issues.push({origin:n,code:"too_big",maximum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),Jl=P("$ZodCheckGreaterThan",(t,e)=>{qe.init(t,e);const n=Wl[typeof e.value];t._zod.onattach.push(r=>{const s=r._zod.bag,o=(e.inclusive?s.minimum:s.exclusiveMinimum)??Number.NEGATIVE_INFINITY;e.value>o&&(e.inclusive?s.minimum=e.value:s.exclusiveMinimum=e.value)}),t._zod.check=r=>{(e.inclusive?r.value>=e.value:r.value>e.value)||r.issues.push({origin:n,code:"too_small",minimum:e.value,input:r.value,inclusive:e.inclusive,inst:t,continue:!e.abort})}}),B_=P("$ZodCheckMultipleOf",(t,e)=>{qe.init(t,e),t._zod.onattach.push(n=>{var r;(r=n._zod.bag).multipleOf??(r.multipleOf=e.value)}),t._zod.check=n=>{if(typeof n.value!=typeof e.value)throw new Error("Cannot mix number and bigint in multiple_of check.");(typeof n.value=="bigint"?n.value%e.value===BigInt(0):Gg(n.value,e.value)===0)||n.issues.push({origin:typeof n.value,code:"not_multiple_of",divisor:e.value,input:n.value,inst:t,continue:!e.abort})}}),Z_=P("$ZodCheckNumberFormat",(t,e)=>{var a;qe.init(t,e),e.format=e.format||"float64";const n=(a=e.format)==null?void 0:a.includes("int"),r=n?"int":"number",[s,o]=Jg[e.format];t._zod.onattach.push(u=>{const h=u._zod.bag;h.format=e.format,h.minimum=s,h.maximum=o,n&&(h.pattern=$_)}),t._zod.check=u=>{const h=u.value;if(n){if(!Number.isInteger(h)){u.issues.push({expected:r,format:e.format,code:"invalid_type",continue:!1,input:h,inst:t});return}if(!Number.isSafeInteger(h)){h>0?u.issues.push({input:h,code:"too_big",maximum:Number.MAX_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort}):u.issues.push({input:h,code:"too_small",minimum:Number.MIN_SAFE_INTEGER,note:"Integers must be within the safe integer range.",inst:t,origin:r,continue:!e.abort});return}}h<s&&u.issues.push({origin:"number",input:h,code:"too_small",minimum:s,inclusive:!0,inst:t,continue:!e.abort}),h>o&&u.issues.push({origin:"number",input:h,code:"too_big",maximum:o,inst:t})}}),q_=P("$ZodCheckMaxLength",(t,e)=>{var n;qe.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Do(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.maximum??Number.POSITIVE_INFINITY;e.maximum<s&&(r._zod.bag.maximum=e.maximum)}),t._zod.check=r=>{const s=r.value;if(s.length<=e.maximum)return;const a=Oo(s);r.issues.push({origin:a,code:"too_big",maximum:e.maximum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),G_=P("$ZodCheckMinLength",(t,e)=>{var n;qe.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Do(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag.minimum??Number.NEGATIVE_INFINITY;e.minimum>s&&(r._zod.bag.minimum=e.minimum)}),t._zod.check=r=>{const s=r.value;if(s.length>=e.minimum)return;const a=Oo(s);r.issues.push({origin:a,code:"too_small",minimum:e.minimum,inclusive:!0,input:s,inst:t,continue:!e.abort})}}),H_=P("$ZodCheckLengthEquals",(t,e)=>{var n;qe.init(t,e),(n=t._zod.def).when??(n.when=r=>{const s=r.value;return!Do(s)&&s.length!==void 0}),t._zod.onattach.push(r=>{const s=r._zod.bag;s.minimum=e.length,s.maximum=e.length,s.length=e.length}),t._zod.check=r=>{const s=r.value,o=s.length;if(o===e.length)return;const a=Oo(s),u=o>e.length;r.issues.push({origin:a,...u?{code:"too_big",maximum:e.length}:{code:"too_small",minimum:e.length},inclusive:!0,exact:!0,input:r.value,inst:t,continue:!e.abort})}}),js=P("$ZodCheckStringFormat",(t,e)=>{var n,r;qe.init(t,e),t._zod.onattach.push(s=>{const o=s._zod.bag;o.format=e.format,e.pattern&&(o.patterns??(o.patterns=new Set),o.patterns.add(e.pattern))}),e.pattern?(n=t._zod).check??(n.check=s=>{e.pattern.lastIndex=0,!e.pattern.test(s.value)&&s.issues.push({origin:"string",code:"invalid_format",format:e.format,input:s.value,...e.pattern?{pattern:e.pattern.toString()}:{},inst:t,continue:!e.abort})}):(r=t._zod).check??(r.check=()=>{})}),K_=P("$ZodCheckRegex",(t,e)=>{js.init(t,e),t._zod.check=n=>{e.pattern.lastIndex=0,!e.pattern.test(n.value)&&n.issues.push({origin:"string",code:"invalid_format",format:"regex",input:n.value,pattern:e.pattern.toString(),inst:t,continue:!e.abort})}}),W_=P("$ZodCheckLowerCase",(t,e)=>{e.pattern??(e.pattern=U_),js.init(t,e)}),Q_=P("$ZodCheckUpperCase",(t,e)=>{e.pattern??(e.pattern=j_),js.init(t,e)}),J_=P("$ZodCheckIncludes",(t,e)=>{qe.init(t,e);const n=Ls(e.includes),r=new RegExp(typeof e.position=="number"?`^.{${e.position}}${n}`:n);e.pattern=r,t._zod.onattach.push(s=>{const o=s._zod.bag;o.patterns??(o.patterns=new Set),o.patterns.add(r)}),t._zod.check=s=>{s.value.includes(e.includes,e.position)||s.issues.push({origin:"string",code:"invalid_format",format:"includes",includes:e.includes,input:s.value,inst:t,continue:!e.abort})}}),X_=P("$ZodCheckStartsWith",(t,e)=>{qe.init(t,e);const n=new RegExp(`^${Ls(e.prefix)}.*`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.startsWith(e.prefix)||r.issues.push({origin:"string",code:"invalid_format",format:"starts_with",prefix:e.prefix,input:r.value,inst:t,continue:!e.abort})}}),Y_=P("$ZodCheckEndsWith",(t,e)=>{qe.init(t,e);const n=new RegExp(`.*${Ls(e.suffix)}$`);e.pattern??(e.pattern=n),t._zod.onattach.push(r=>{const s=r._zod.bag;s.patterns??(s.patterns=new Set),s.patterns.add(n)}),t._zod.check=r=>{r.value.endsWith(e.suffix)||r.issues.push({origin:"string",code:"invalid_format",format:"ends_with",suffix:e.suffix,input:r.value,inst:t,continue:!e.abort})}}),ey=P("$ZodCheckOverwrite",(t,e)=>{qe.init(t,e),t._zod.check=n=>{n.value=e.tx(n.value)}});class ty{constructor(e=[]){this.content=[],this.indent=0,this&&(this.args=e)}indented(e){this.indent+=1,e(this),this.indent-=1}write(e){if(typeof e=="function"){e(this,{execution:"sync"}),e(this,{execution:"async"});return}const r=e.split(`
`).filter(a=>a),s=Math.min(...r.map(a=>a.length-a.trimStart().length)),o=r.map(a=>a.slice(s)).map(a=>" ".repeat(this.indent*2)+a);for(const a of o)this.content.push(a)}compile(){const e=Function,n=this==null?void 0:this.args,s=[...((this==null?void 0:this.content)??[""]).map(o=>`  ${o}`)];return new e(...n,s.join(`
`))}}const ny={major:4,minor:2,patch:1},ye=P("$ZodType",(t,e)=>{var s;var n;t??(t={}),t._zod.def=e,t._zod.bag=t._zod.bag||{},t._zod.version=ny;const r=[...t._zod.def.checks??[]];t._zod.traits.has("$ZodCheck")&&r.unshift(t);for(const o of r)for(const a of o._zod.onattach)a(t);if(r.length===0)(n=t._zod).deferred??(n.deferred=[]),(s=t._zod.deferred)==null||s.push(()=>{t._zod.run=t._zod.parse});else{const o=(u,h,f)=>{let p=hn(u),g;for(const T of h){if(T._zod.def.when){if(!T._zod.def.when(u))continue}else if(p)continue;const R=u.issues.length,S=T._zod.check(u);if(S instanceof Promise&&(f==null?void 0:f.async)===!1)throw new mn;if(g||S instanceof Promise)g=(g??Promise.resolve()).then(async()=>{await S,u.issues.length!==R&&(p||(p=hn(u,R)))});else{if(u.issues.length===R)continue;p||(p=hn(u,R))}}return g?g.then(()=>u):u},a=(u,h,f)=>{if(hn(u))return u.aborted=!0,u;const p=o(h,r,f);if(p instanceof Promise){if(f.async===!1)throw new mn;return p.then(g=>t._zod.parse(g,f))}return t._zod.parse(p,f)};t._zod.run=(u,h)=>{if(h.skipChecks)return t._zod.parse(u,h);if(h.direction==="backward"){const p=t._zod.parse({value:u.value,issues:[]},{...h,skipChecks:!0});return p instanceof Promise?p.then(g=>a(g,u,h)):a(p,u,h)}const f=t._zod.parse(u,h);if(f instanceof Promise){if(h.async===!1)throw new mn;return f.then(p=>o(p,r,h))}return o(f,r,h)}}t["~standard"]={validate:o=>{var a;try{const u=a_(t,o);return u.success?{value:u.data}:{issues:(a=u.error)==null?void 0:a.issues}}catch{return c_(t,o).then(h=>{var f;return h.success?{value:h.data}:{issues:(f=h.error)==null?void 0:f.issues}})}},vendor:"zod",version:1}}),zo=P("$ZodString",(t,e)=>{var n;ye.init(t,e),t._zod.pattern=[...((n=t==null?void 0:t._zod.bag)==null?void 0:n.patterns)??[]].pop()??z_(t._zod.bag),t._zod.parse=(r,s)=>{if(e.coerce)try{r.value=String(r.value)}catch{}return typeof r.value=="string"||r.issues.push({expected:"string",code:"invalid_type",input:r.value,inst:t}),r}}),he=P("$ZodStringFormat",(t,e)=>{js.init(t,e),zo.init(t,e)}),ry=P("$ZodGUID",(t,e)=>{e.pattern??(e.pattern=A_),he.init(t,e)}),sy=P("$ZodUUID",(t,e)=>{if(e.version){const r={v1:1,v2:2,v3:3,v4:4,v5:5,v6:6,v7:7,v8:8}[e.version];if(r===void 0)throw new Error(`Invalid UUID version: "${e.version}"`);e.pattern??(e.pattern=$c(r))}else e.pattern??(e.pattern=$c());he.init(t,e)}),iy=P("$ZodEmail",(t,e)=>{e.pattern??(e.pattern=b_),he.init(t,e)}),oy=P("$ZodURL",(t,e)=>{he.init(t,e),t._zod.check=n=>{try{const r=n.value.trim(),s=new URL(r);e.hostname&&(e.hostname.lastIndex=0,e.hostname.test(s.hostname)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid hostname",pattern:e.hostname.source,input:n.value,inst:t,continue:!e.abort})),e.protocol&&(e.protocol.lastIndex=0,e.protocol.test(s.protocol.endsWith(":")?s.protocol.slice(0,-1):s.protocol)||n.issues.push({code:"invalid_format",format:"url",note:"Invalid protocol",pattern:e.protocol.source,input:n.value,inst:t,continue:!e.abort})),e.normalize?n.value=s.href:n.value=r;return}catch{n.issues.push({code:"invalid_format",format:"url",input:n.value,inst:t,continue:!e.abort})}}}),ay=P("$ZodEmoji",(t,e)=>{e.pattern??(e.pattern=R_()),he.init(t,e)}),cy=P("$ZodNanoID",(t,e)=>{e.pattern??(e.pattern=T_),he.init(t,e)}),uy=P("$ZodCUID",(t,e)=>{e.pattern??(e.pattern=__),he.init(t,e)}),ly=P("$ZodCUID2",(t,e)=>{e.pattern??(e.pattern=y_),he.init(t,e)}),hy=P("$ZodULID",(t,e)=>{e.pattern??(e.pattern=v_),he.init(t,e)}),fy=P("$ZodXID",(t,e)=>{e.pattern??(e.pattern=E_),he.init(t,e)}),dy=P("$ZodKSUID",(t,e)=>{e.pattern??(e.pattern=w_),he.init(t,e)}),py=P("$ZodISODateTime",(t,e)=>{e.pattern??(e.pattern=M_(e)),he.init(t,e)}),my=P("$ZodISODate",(t,e)=>{e.pattern??(e.pattern=O_),he.init(t,e)}),gy=P("$ZodISOTime",(t,e)=>{e.pattern??(e.pattern=x_(e)),he.init(t,e)}),_y=P("$ZodISODuration",(t,e)=>{e.pattern??(e.pattern=I_),he.init(t,e)}),yy=P("$ZodIPv4",(t,e)=>{e.pattern??(e.pattern=P_),he.init(t,e),t._zod.bag.format="ipv4"}),vy=P("$ZodIPv6",(t,e)=>{e.pattern??(e.pattern=C_),he.init(t,e),t._zod.bag.format="ipv6",t._zod.check=n=>{try{new URL(`http://[${n.value}]`)}catch{n.issues.push({code:"invalid_format",format:"ipv6",input:n.value,inst:t,continue:!e.abort})}}}),Ey=P("$ZodCIDRv4",(t,e)=>{e.pattern??(e.pattern=k_),he.init(t,e)}),wy=P("$ZodCIDRv6",(t,e)=>{e.pattern??(e.pattern=V_),he.init(t,e),t._zod.check=n=>{const r=n.value.split("/");try{if(r.length!==2)throw new Error;const[s,o]=r;if(!o)throw new Error;const a=Number(o);if(`${a}`!==o)throw new Error;if(a<0||a>128)throw new Error;new URL(`http://[${s}]`)}catch{n.issues.push({code:"invalid_format",format:"cidrv6",input:n.value,inst:t,continue:!e.abort})}}});function Xl(t){if(t==="")return!0;if(t.length%4!==0)return!1;try{return atob(t),!0}catch{return!1}}const Ty=P("$ZodBase64",(t,e)=>{e.pattern??(e.pattern=D_),he.init(t,e),t._zod.bag.contentEncoding="base64",t._zod.check=n=>{Xl(n.value)||n.issues.push({code:"invalid_format",format:"base64",input:n.value,inst:t,continue:!e.abort})}});function Iy(t){if(!Gl.test(t))return!1;const e=t.replace(/[-_]/g,r=>r==="-"?"+":"/"),n=e.padEnd(Math.ceil(e.length/4)*4,"=");return Xl(n)}const Ay=P("$ZodBase64URL",(t,e)=>{e.pattern??(e.pattern=Gl),he.init(t,e),t._zod.bag.contentEncoding="base64url",t._zod.check=n=>{Iy(n.value)||n.issues.push({code:"invalid_format",format:"base64url",input:n.value,inst:t,continue:!e.abort})}}),by=P("$ZodE164",(t,e)=>{e.pattern??(e.pattern=N_),he.init(t,e)});function Sy(t,e=null){try{const n=t.split(".");if(n.length!==3)return!1;const[r]=n;if(!r)return!1;const s=JSON.parse(atob(r));return!("typ"in s&&(s==null?void 0:s.typ)!=="JWT"||!s.alg||e&&(!("alg"in s)||s.alg!==e))}catch{return!1}}const Ry=P("$ZodJWT",(t,e)=>{he.init(t,e),t._zod.check=n=>{Sy(n.value,e.alg)||n.issues.push({code:"invalid_format",format:"jwt",input:n.value,inst:t,continue:!e.abort})}}),Yl=P("$ZodNumber",(t,e)=>{ye.init(t,e),t._zod.pattern=t._zod.bag.pattern??L_,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=Number(n.value)}catch{}const s=n.value;if(typeof s=="number"&&!Number.isNaN(s)&&Number.isFinite(s))return n;const o=typeof s=="number"?Number.isNaN(s)?"NaN":Number.isFinite(s)?void 0:"Infinity":void 0;return n.issues.push({expected:"number",code:"invalid_type",input:s,inst:t,...o?{received:o}:{}}),n}}),Py=P("$ZodNumberFormat",(t,e)=>{Z_.init(t,e),Yl.init(t,e)}),Cy=P("$ZodBoolean",(t,e)=>{ye.init(t,e),t._zod.pattern=F_,t._zod.parse=(n,r)=>{if(e.coerce)try{n.value=!!n.value}catch{}const s=n.value;return typeof s=="boolean"||n.issues.push({expected:"boolean",code:"invalid_type",input:s,inst:t}),n}}),ky=P("$ZodUnknown",(t,e)=>{ye.init(t,e),t._zod.parse=n=>n}),Vy=P("$ZodNever",(t,e)=>{ye.init(t,e),t._zod.parse=(n,r)=>(n.issues.push({expected:"never",code:"invalid_type",input:n.value,inst:t}),n)});function Lc(t,e,n){t.issues.length&&e.issues.push(...jl(n,t.issues)),e.value[n]=t.value}const Dy=P("$ZodArray",(t,e)=>{ye.init(t,e),t._zod.parse=(n,r)=>{const s=n.value;if(!Array.isArray(s))return n.issues.push({expected:"array",code:"invalid_type",input:s,inst:t}),n;n.value=Array(s.length);const o=[];for(let a=0;a<s.length;a++){const u=s[a],h=e.element._zod.run({value:u,issues:[]},r);h instanceof Promise?o.push(h.then(f=>Lc(f,n,a))):Lc(h,n,a)}return o.length?Promise.all(o).then(()=>n):n}});function Ss(t,e,n,r){t.issues.length&&e.issues.push(...jl(n,t.issues)),t.value===void 0?n in r&&(e.value[n]=void 0):e.value[n]=t.value}function eh(t){var r,s,o,a;const e=Object.keys(t.shape);for(const u of e)if(!((a=(o=(s=(r=t.shape)==null?void 0:r[u])==null?void 0:s._zod)==null?void 0:o.traits)!=null&&a.has("$ZodType")))throw new Error(`Invalid element at key "${u}": expected a Zod schema`);const n=Qg(t.shape);return{...t,keys:e,keySet:new Set(e),numKeys:e.length,optionalKeys:new Set(n)}}function th(t,e,n,r,s,o){const a=[],u=s.keySet,h=s.catchall._zod,f=h.def.type;for(const p in e){if(u.has(p))continue;if(f==="never"){a.push(p);continue}const g=h.run({value:e[p],issues:[]},r);g instanceof Promise?t.push(g.then(T=>Ss(T,n,p,e))):Ss(g,n,p,e)}return a.length&&n.issues.push({code:"unrecognized_keys",keys:a,input:e,inst:o}),t.length?Promise.all(t).then(()=>n):n}const Ny=P("$ZodObject",(t,e)=>{ye.init(t,e);const n=Object.getOwnPropertyDescriptor(e,"shape");if(!(n!=null&&n.get)){const u=e.shape;Object.defineProperty(e,"shape",{get:()=>{const h={...u};return Object.defineProperty(e,"shape",{value:h}),h}})}const r=Vo(()=>eh(e));oe(t._zod,"propValues",()=>{const u=e.shape,h={};for(const f in u){const p=u[f]._zod;if(p.values){h[f]??(h[f]=new Set);for(const g of p.values)h[f].add(g)}}return h});const s=bs,o=e.catchall;let a;t._zod.parse=(u,h)=>{a??(a=r.value);const f=u.value;if(!s(f))return u.issues.push({expected:"object",code:"invalid_type",input:f,inst:t}),u;u.value={};const p=[],g=a.shape;for(const T of a.keys){const S=g[T]._zod.run({value:f[T],issues:[]},h);S instanceof Promise?p.push(S.then(V=>Ss(V,u,T,f))):Ss(S,u,T,f)}return o?th(p,f,u,h,r.value,t):p.length?Promise.all(p).then(()=>u):u}}),Oy=P("$ZodObjectJIT",(t,e)=>{Ny.init(t,e);const n=t._zod.parse,r=Vo(()=>eh(e)),s=T=>{const R=new ty(["shape","payload","ctx"]),S=r.value,V=j=>{const Z=zc(j);return`shape[${Z}]._zod.run({ value: input[${Z}], issues: [] }, ctx)`};R.write("const input = payload.value;");const N=Object.create(null);let B=0;for(const j of S.keys)N[j]=`key_${B++}`;R.write("const newResult = {};");for(const j of S.keys){const Z=N[j],H=zc(j);R.write(`const ${Z} = ${V(j)};`),R.write(`
        if (${Z}.issues.length) {
          payload.issues = payload.issues.concat(${Z}.issues.map(iss => ({
            ...iss,
            path: iss.path ? [${H}, ...iss.path] : [${H}]
          })));
        }
        
        
        if (${Z}.value === undefined) {
          if (${H} in input) {
            newResult[${H}] = undefined;
          }
        } else {
          newResult[${H}] = ${Z}.value;
        }
        
      `)}R.write("payload.value = newResult;"),R.write("return payload;");const F=R.compile();return(j,Z)=>F(T,j,Z)};let o;const a=bs,u=!$l.jitless,f=u&&Kg.value,p=e.catchall;let g;t._zod.parse=(T,R)=>{g??(g=r.value);const S=T.value;return a(S)?u&&f&&(R==null?void 0:R.async)===!1&&R.jitless!==!0?(o||(o=s(e.shape)),T=o(T,R),p?th([],S,T,R,g,t):T):n(T,R):(T.issues.push({expected:"object",code:"invalid_type",input:S,inst:t}),T)}});function Fc(t,e,n,r){for(const o of t)if(o.issues.length===0)return e.value=o.value,e;const s=t.filter(o=>!hn(o));return s.length===1?(e.value=s[0].value,s[0]):(e.issues.push({code:"invalid_union",input:e.value,inst:n,errors:t.map(o=>o.issues.map(a=>Jt(a,r,Qt())))}),e)}const xy=P("$ZodUnion",(t,e)=>{ye.init(t,e),oe(t._zod,"optin",()=>e.options.some(s=>s._zod.optin==="optional")?"optional":void 0),oe(t._zod,"optout",()=>e.options.some(s=>s._zod.optout==="optional")?"optional":void 0),oe(t._zod,"values",()=>{if(e.options.every(s=>s._zod.values))return new Set(e.options.flatMap(s=>Array.from(s._zod.values)))}),oe(t._zod,"pattern",()=>{if(e.options.every(s=>s._zod.pattern)){const s=e.options.map(o=>o._zod.pattern);return new RegExp(`^(${s.map(o=>No(o.source)).join("|")})$`)}});const n=e.options.length===1,r=e.options[0]._zod.run;t._zod.parse=(s,o)=>{if(n)return r(s,o);let a=!1;const u=[];for(const h of e.options){const f=h._zod.run({value:s.value,issues:[]},o);if(f instanceof Promise)u.push(f),a=!0;else{if(f.issues.length===0)return f;u.push(f)}}return a?Promise.all(u).then(h=>Fc(h,s,t,o)):Fc(u,s,t,o)}}),My=P("$ZodIntersection",(t,e)=>{ye.init(t,e),t._zod.parse=(n,r)=>{const s=n.value,o=e.left._zod.run({value:s,issues:[]},r),a=e.right._zod.run({value:s,issues:[]},r);return o instanceof Promise||a instanceof Promise?Promise.all([o,a]).then(([h,f])=>Uc(n,h,f)):Uc(n,o,a)}});function Gi(t,e){if(t===e)return{valid:!0,data:t};if(t instanceof Date&&e instanceof Date&&+t==+e)return{valid:!0,data:t};if(yr(t)&&yr(e)){const n=Object.keys(e),r=Object.keys(t).filter(o=>n.indexOf(o)!==-1),s={...t,...e};for(const o of r){const a=Gi(t[o],e[o]);if(!a.valid)return{valid:!1,mergeErrorPath:[o,...a.mergeErrorPath]};s[o]=a.data}return{valid:!0,data:s}}if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return{valid:!1,mergeErrorPath:[]};const n=[];for(let r=0;r<t.length;r++){const s=t[r],o=e[r],a=Gi(s,o);if(!a.valid)return{valid:!1,mergeErrorPath:[r,...a.mergeErrorPath]};n.push(a.data)}return{valid:!0,data:n}}return{valid:!1,mergeErrorPath:[]}}function Uc(t,e,n){if(e.issues.length&&t.issues.push(...e.issues),n.issues.length&&t.issues.push(...n.issues),hn(t))return t;const r=Gi(e.value,n.value);if(!r.valid)throw new Error(`Unmergable intersection. Error path: ${JSON.stringify(r.mergeErrorPath)}`);return t.value=r.data,t}const zy=P("$ZodEnum",(t,e)=>{ye.init(t,e);const n=Ll(e.entries),r=new Set(n);t._zod.values=r,t._zod.pattern=new RegExp(`^(${n.filter(s=>Wg.has(typeof s)).map(s=>typeof s=="string"?Ls(s):s.toString()).join("|")})$`),t._zod.parse=(s,o)=>{const a=s.value;return r.has(a)||s.issues.push({code:"invalid_value",values:n,input:a,inst:t}),s}}),$y=P("$ZodTransform",(t,e)=>{ye.init(t,e),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new zl(t.constructor.name);const s=e.transform(n.value,n);if(r.async)return(s instanceof Promise?s:Promise.resolve(s)).then(a=>(n.value=a,n));if(s instanceof Promise)throw new mn;return n.value=s,n}});function jc(t,e){return t.issues.length&&e===void 0?{issues:[],value:void 0}:t}const Ly=P("$ZodOptional",(t,e)=>{ye.init(t,e),t._zod.optin="optional",t._zod.optout="optional",oe(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,void 0]):void 0),oe(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${No(n.source)})?$`):void 0}),t._zod.parse=(n,r)=>{if(e.innerType._zod.optin==="optional"){const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>jc(o,n.value)):jc(s,n.value)}return n.value===void 0?n:e.innerType._zod.run(n,r)}}),Fy=P("$ZodNullable",(t,e)=>{ye.init(t,e),oe(t._zod,"optin",()=>e.innerType._zod.optin),oe(t._zod,"optout",()=>e.innerType._zod.optout),oe(t._zod,"pattern",()=>{const n=e.innerType._zod.pattern;return n?new RegExp(`^(${No(n.source)}|null)$`):void 0}),oe(t._zod,"values",()=>e.innerType._zod.values?new Set([...e.innerType._zod.values,null]):void 0),t._zod.parse=(n,r)=>n.value===null?n:e.innerType._zod.run(n,r)}),Uy=P("$ZodDefault",(t,e)=>{ye.init(t,e),t._zod.optin="optional",oe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);if(n.value===void 0)return n.value=e.defaultValue,n;const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Bc(o,e)):Bc(s,e)}});function Bc(t,e){return t.value===void 0&&(t.value=e.defaultValue),t}const jy=P("$ZodPrefault",(t,e)=>{ye.init(t,e),t._zod.optin="optional",oe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>(r.direction==="backward"||n.value===void 0&&(n.value=e.defaultValue),e.innerType._zod.run(n,r))}),By=P("$ZodNonOptional",(t,e)=>{ye.init(t,e),oe(t._zod,"values",()=>{const n=e.innerType._zod.values;return n?new Set([...n].filter(r=>r!==void 0)):void 0}),t._zod.parse=(n,r)=>{const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>Zc(o,t)):Zc(s,t)}});function Zc(t,e){return!t.issues.length&&t.value===void 0&&t.issues.push({code:"invalid_type",expected:"nonoptional",input:t.value,inst:e}),t}const Zy=P("$ZodCatch",(t,e)=>{ye.init(t,e),oe(t._zod,"optin",()=>e.innerType._zod.optin),oe(t._zod,"optout",()=>e.innerType._zod.optout),oe(t._zod,"values",()=>e.innerType._zod.values),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(o=>(n.value=o.value,o.issues.length&&(n.value=e.catchValue({...n,error:{issues:o.issues.map(a=>Jt(a,r,Qt()))},input:n.value}),n.issues=[]),n)):(n.value=s.value,s.issues.length&&(n.value=e.catchValue({...n,error:{issues:s.issues.map(o=>Jt(o,r,Qt()))},input:n.value}),n.issues=[]),n)}}),qy=P("$ZodPipe",(t,e)=>{ye.init(t,e),oe(t._zod,"values",()=>e.in._zod.values),oe(t._zod,"optin",()=>e.in._zod.optin),oe(t._zod,"optout",()=>e.out._zod.optout),oe(t._zod,"propValues",()=>e.in._zod.propValues),t._zod.parse=(n,r)=>{if(r.direction==="backward"){const o=e.out._zod.run(n,r);return o instanceof Promise?o.then(a=>ts(a,e.in,r)):ts(o,e.in,r)}const s=e.in._zod.run(n,r);return s instanceof Promise?s.then(o=>ts(o,e.out,r)):ts(s,e.out,r)}});function ts(t,e,n){return t.issues.length?(t.aborted=!0,t):e._zod.run({value:t.value,issues:t.issues},n)}const Gy=P("$ZodReadonly",(t,e)=>{ye.init(t,e),oe(t._zod,"propValues",()=>e.innerType._zod.propValues),oe(t._zod,"values",()=>e.innerType._zod.values),oe(t._zod,"optin",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optin}),oe(t._zod,"optout",()=>{var n,r;return(r=(n=e.innerType)==null?void 0:n._zod)==null?void 0:r.optout}),t._zod.parse=(n,r)=>{if(r.direction==="backward")return e.innerType._zod.run(n,r);const s=e.innerType._zod.run(n,r);return s instanceof Promise?s.then(qc):qc(s)}});function qc(t){return t.value=Object.freeze(t.value),t}const Hy=P("$ZodCustom",(t,e)=>{qe.init(t,e),ye.init(t,e),t._zod.parse=(n,r)=>n,t._zod.check=n=>{const r=n.value,s=e.fn(r);if(s instanceof Promise)return s.then(o=>Gc(o,n,r,t));Gc(s,n,r,t)}});function Gc(t,e,n,r){if(!t){const s={code:"custom",input:n,inst:r,path:[...r._zod.def.path??[]],continue:!r._zod.def.abort};r._zod.def.params&&(s.params=r._zod.def.params),e.issues.push(vr(s))}}var Hc;class Ky{constructor(){this._map=new WeakMap,this._idmap=new Map}add(e,...n){const r=n[0];if(this._map.set(e,r),r&&typeof r=="object"&&"id"in r){if(this._idmap.has(r.id))throw new Error(`ID ${r.id} already exists in the registry`);this._idmap.set(r.id,e)}return this}clear(){return this._map=new WeakMap,this._idmap=new Map,this}remove(e){const n=this._map.get(e);return n&&typeof n=="object"&&"id"in n&&this._idmap.delete(n.id),this._map.delete(e),this}get(e){const n=e._zod.parent;if(n){const r={...this.get(n)??{}};delete r.id;const s={...r,...this._map.get(e)};return Object.keys(s).length?s:void 0}return this._map.get(e)}has(e){return this._map.has(e)}}function Wy(){return new Ky}(Hc=globalThis).__zod_globalRegistry??(Hc.__zod_globalRegistry=Wy());const tr=globalThis.__zod_globalRegistry;function Qy(t,e){return new t({type:"string",...$(e)})}function Jy(t,e){return new t({type:"string",format:"email",check:"string_format",abort:!1,...$(e)})}function Kc(t,e){return new t({type:"string",format:"guid",check:"string_format",abort:!1,...$(e)})}function Xy(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,...$(e)})}function Yy(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v4",...$(e)})}function ev(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v6",...$(e)})}function tv(t,e){return new t({type:"string",format:"uuid",check:"string_format",abort:!1,version:"v7",...$(e)})}function nv(t,e){return new t({type:"string",format:"url",check:"string_format",abort:!1,...$(e)})}function rv(t,e){return new t({type:"string",format:"emoji",check:"string_format",abort:!1,...$(e)})}function sv(t,e){return new t({type:"string",format:"nanoid",check:"string_format",abort:!1,...$(e)})}function iv(t,e){return new t({type:"string",format:"cuid",check:"string_format",abort:!1,...$(e)})}function ov(t,e){return new t({type:"string",format:"cuid2",check:"string_format",abort:!1,...$(e)})}function av(t,e){return new t({type:"string",format:"ulid",check:"string_format",abort:!1,...$(e)})}function cv(t,e){return new t({type:"string",format:"xid",check:"string_format",abort:!1,...$(e)})}function uv(t,e){return new t({type:"string",format:"ksuid",check:"string_format",abort:!1,...$(e)})}function lv(t,e){return new t({type:"string",format:"ipv4",check:"string_format",abort:!1,...$(e)})}function hv(t,e){return new t({type:"string",format:"ipv6",check:"string_format",abort:!1,...$(e)})}function fv(t,e){return new t({type:"string",format:"cidrv4",check:"string_format",abort:!1,...$(e)})}function dv(t,e){return new t({type:"string",format:"cidrv6",check:"string_format",abort:!1,...$(e)})}function pv(t,e){return new t({type:"string",format:"base64",check:"string_format",abort:!1,...$(e)})}function mv(t,e){return new t({type:"string",format:"base64url",check:"string_format",abort:!1,...$(e)})}function gv(t,e){return new t({type:"string",format:"e164",check:"string_format",abort:!1,...$(e)})}function _v(t,e){return new t({type:"string",format:"jwt",check:"string_format",abort:!1,...$(e)})}function yv(t,e){return new t({type:"string",format:"datetime",check:"string_format",offset:!1,local:!1,precision:null,...$(e)})}function vv(t,e){return new t({type:"string",format:"date",check:"string_format",...$(e)})}function Ev(t,e){return new t({type:"string",format:"time",check:"string_format",precision:null,...$(e)})}function wv(t,e){return new t({type:"string",format:"duration",check:"string_format",...$(e)})}function Tv(t,e){return new t({type:"number",checks:[],...$(e)})}function Iv(t,e){return new t({type:"number",coerce:!0,checks:[],...$(e)})}function Av(t,e){return new t({type:"number",check:"number_format",abort:!1,format:"safeint",...$(e)})}function bv(t,e){return new t({type:"boolean",...$(e)})}function Sv(t){return new t({type:"unknown"})}function Rv(t,e){return new t({type:"never",...$(e)})}function Wc(t,e){return new Ql({check:"less_than",...$(e),value:t,inclusive:!1})}function Ei(t,e){return new Ql({check:"less_than",...$(e),value:t,inclusive:!0})}function Qc(t,e){return new Jl({check:"greater_than",...$(e),value:t,inclusive:!1})}function wi(t,e){return new Jl({check:"greater_than",...$(e),value:t,inclusive:!0})}function Jc(t,e){return new B_({check:"multiple_of",...$(e),value:t})}function nh(t,e){return new q_({check:"max_length",...$(e),maximum:t})}function Rs(t,e){return new G_({check:"min_length",...$(e),minimum:t})}function rh(t,e){return new H_({check:"length_equals",...$(e),length:t})}function Pv(t,e){return new K_({check:"string_format",format:"regex",...$(e),pattern:t})}function Cv(t){return new W_({check:"string_format",format:"lowercase",...$(t)})}function kv(t){return new Q_({check:"string_format",format:"uppercase",...$(t)})}function Vv(t,e){return new J_({check:"string_format",format:"includes",...$(e),includes:t})}function Dv(t,e){return new X_({check:"string_format",format:"starts_with",...$(e),prefix:t})}function Nv(t,e){return new Y_({check:"string_format",format:"ends_with",...$(e),suffix:t})}function An(t){return new ey({check:"overwrite",tx:t})}function Ov(t){return An(e=>e.normalize(t))}function xv(){return An(t=>t.trim())}function Mv(){return An(t=>t.toLowerCase())}function zv(){return An(t=>t.toUpperCase())}function $v(){return An(t=>Hg(t))}function Lv(t,e,n){return new t({type:"array",element:e,...$(n)})}function Fv(t,e,n){return new t({type:"custom",check:"custom",fn:e,...$(n)})}function Uv(t){const e=jv(n=>(n.addIssue=r=>{if(typeof r=="string")n.issues.push(vr(r,n.value,e._zod.def));else{const s=r;s.fatal&&(s.continue=!1),s.code??(s.code="custom"),s.input??(s.input=n.value),s.inst??(s.inst=e),s.continue??(s.continue=!e._zod.def.abort),n.issues.push(vr(s))}},t(n.value,n)));return e}function jv(t,e){const n=new qe({check:"custom",...$(e)});return n._zod.check=t,n}function sh(t){let e=(t==null?void 0:t.target)??"draft-2020-12";return e==="draft-4"&&(e="draft-04"),e==="draft-7"&&(e="draft-07"),{processors:t.processors??{},metadataRegistry:(t==null?void 0:t.metadata)??tr,target:e,unrepresentable:(t==null?void 0:t.unrepresentable)??"throw",override:(t==null?void 0:t.override)??(()=>{}),io:(t==null?void 0:t.io)??"output",counter:0,seen:new Map,cycles:(t==null?void 0:t.cycles)??"ref",reused:(t==null?void 0:t.reused)??"inline",external:(t==null?void 0:t.external)??void 0}}function Oe(t,e,n={path:[],schemaPath:[]}){var p,g;var r;const s=t._zod.def,o=e.seen.get(t);if(o)return o.count++,n.schemaPath.includes(t)&&(o.cycle=n.path),o.schema;const a={schema:{},count:1,cycle:void 0,path:n.path};e.seen.set(t,a);const u=(g=(p=t._zod).toJSONSchema)==null?void 0:g.call(p);if(u)a.schema=u;else{const T={...n,schemaPath:[...n.schemaPath,t],path:n.path},R=t._zod.parent;if(R)a.ref=R,Oe(R,e,T),e.seen.get(R).isParent=!0;else if(t._zod.processJSONSchema)t._zod.processJSONSchema(e,a.schema,T);else{const S=a.schema,V=e.processors[s.type];if(!V)throw new Error(`[toJSONSchema]: Non-representable type encountered: ${s.type}`);V(t,e,S,T)}}const h=e.metadataRegistry.get(t);return h&&Object.assign(a.schema,h),e.io==="input"&&Fe(t)&&(delete a.schema.examples,delete a.schema.default),e.io==="input"&&a.schema._prefault&&((r=a.schema).default??(r.default=a.schema._prefault)),delete a.schema._prefault,e.seen.get(t).schema}function ih(t,e){var o,a,u;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=h=>{var R;const f=t.target==="draft-2020-12"?"$defs":"definitions";if(t.external){const S=(R=t.external.registry.get(h[0]))==null?void 0:R.id,V=t.external.uri??(B=>B);if(S)return{ref:V(S)};const N=h[1].defId??h[1].schema.id??`schema${t.counter++}`;return h[1].defId=N,{defId:N,ref:`${V("__shared")}#/${f}/${N}`}}if(h[1]===n)return{ref:"#"};const g=`#/${f}/`,T=h[1].schema.id??`__schema${t.counter++}`;return{defId:T,ref:g+T}},s=h=>{if(h[1].schema.$ref)return;const f=h[1],{ref:p,defId:g}=r(h);f.def={...f.schema},g&&(f.defId=g);const T=f.schema;for(const R in T)delete T[R];T.$ref=p};if(t.cycles==="throw")for(const h of t.seen.entries()){const f=h[1];if(f.cycle)throw new Error(`Cycle detected: #/${(o=f.cycle)==null?void 0:o.join("/")}/<root>

Set the \`cycles\` parameter to \`"ref"\` to resolve cyclical schemas with defs.`)}for(const h of t.seen.entries()){const f=h[1];if(e===h[0]){s(h);continue}if(t.external){const g=(a=t.external.registry.get(h[0]))==null?void 0:a.id;if(e!==h[0]&&g){s(h);continue}}if((u=t.metadataRegistry.get(h[0]))==null?void 0:u.id){s(h);continue}if(f.cycle){s(h);continue}if(f.count>1&&t.reused==="ref"){s(h);continue}}}function oh(t,e){var a,u,h;const n=t.seen.get(e);if(!n)throw new Error("Unprocessed schema. This is a bug in Zod.");const r=f=>{const p=t.seen.get(f),g=p.def??p.schema,T={...g};if(p.ref===null)return;const R=p.ref;if(p.ref=null,R){r(R);const S=t.seen.get(R).schema;S.$ref&&(t.target==="draft-07"||t.target==="draft-04"||t.target==="openapi-3.0")?(g.allOf=g.allOf??[],g.allOf.push(S)):(Object.assign(g,S),Object.assign(g,T))}p.isParent||t.override({zodSchema:f,jsonSchema:g,path:p.path??[]})};for(const f of[...t.seen.entries()].reverse())r(f[0]);const s={};if(t.target==="draft-2020-12"?s.$schema="https://json-schema.org/draft/2020-12/schema":t.target==="draft-07"?s.$schema="http://json-schema.org/draft-07/schema#":t.target==="draft-04"?s.$schema="http://json-schema.org/draft-04/schema#":t.target,(a=t.external)!=null&&a.uri){const f=(u=t.external.registry.get(e))==null?void 0:u.id;if(!f)throw new Error("Schema is missing an `id` property");s.$id=t.external.uri(f)}Object.assign(s,n.def??n.schema);const o=((h=t.external)==null?void 0:h.defs)??{};for(const f of t.seen.entries()){const p=f[1];p.def&&p.defId&&(o[p.defId]=p.def)}t.external||Object.keys(o).length>0&&(t.target==="draft-2020-12"?s.$defs=o:s.definitions=o);try{const f=JSON.parse(JSON.stringify(s));return Object.defineProperty(f,"~standard",{value:{...e["~standard"],jsonSchema:{input:Ps(e,"input"),output:Ps(e,"output")}},enumerable:!1,writable:!1}),f}catch{throw new Error("Error converting schema to JSON.")}}function Fe(t,e){const n=e??{seen:new Set};if(n.seen.has(t))return!1;n.seen.add(t);const r=t._zod.def;if(r.type==="transform")return!0;if(r.type==="array")return Fe(r.element,n);if(r.type==="set")return Fe(r.valueType,n);if(r.type==="lazy")return Fe(r.getter(),n);if(r.type==="promise"||r.type==="optional"||r.type==="nonoptional"||r.type==="nullable"||r.type==="readonly"||r.type==="default"||r.type==="prefault")return Fe(r.innerType,n);if(r.type==="intersection")return Fe(r.left,n)||Fe(r.right,n);if(r.type==="record"||r.type==="map")return Fe(r.keyType,n)||Fe(r.valueType,n);if(r.type==="pipe")return Fe(r.in,n)||Fe(r.out,n);if(r.type==="object"){for(const s in r.shape)if(Fe(r.shape[s],n))return!0;return!1}if(r.type==="union"){for(const s of r.options)if(Fe(s,n))return!0;return!1}if(r.type==="tuple"){for(const s of r.items)if(Fe(s,n))return!0;return!!(r.rest&&Fe(r.rest,n))}return!1}const Bv=(t,e={})=>n=>{const r=sh({...n,processors:e});return Oe(t,r),ih(r,t),oh(r,t)},Ps=(t,e)=>n=>{const{libraryOptions:r,target:s}=n??{},o=sh({...r??{},target:s,io:e,processors:{}});return Oe(t,o),ih(o,t),oh(o,t)},Zv={guid:"uuid",url:"uri",datetime:"date-time",json_string:"json-string",regex:""},qv=(t,e,n,r)=>{const s=n;s.type="string";const{minimum:o,maximum:a,format:u,patterns:h,contentEncoding:f}=t._zod.bag;if(typeof o=="number"&&(s.minLength=o),typeof a=="number"&&(s.maxLength=a),u&&(s.format=Zv[u]??u,s.format===""&&delete s.format),f&&(s.contentEncoding=f),h&&h.size>0){const p=[...h];p.length===1?s.pattern=p[0].source:p.length>1&&(s.allOf=[...p.map(g=>({...e.target==="draft-07"||e.target==="draft-04"||e.target==="openapi-3.0"?{type:"string"}:{},pattern:g.source}))])}},Gv=(t,e,n,r)=>{const s=n,{minimum:o,maximum:a,format:u,multipleOf:h,exclusiveMaximum:f,exclusiveMinimum:p}=t._zod.bag;typeof u=="string"&&u.includes("int")?s.type="integer":s.type="number",typeof p=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.minimum=p,s.exclusiveMinimum=!0):s.exclusiveMinimum=p),typeof o=="number"&&(s.minimum=o,typeof p=="number"&&e.target!=="draft-04"&&(p>=o?delete s.minimum:delete s.exclusiveMinimum)),typeof f=="number"&&(e.target==="draft-04"||e.target==="openapi-3.0"?(s.maximum=f,s.exclusiveMaximum=!0):s.exclusiveMaximum=f),typeof a=="number"&&(s.maximum=a,typeof f=="number"&&e.target!=="draft-04"&&(f<=a?delete s.maximum:delete s.exclusiveMaximum)),typeof h=="number"&&(s.multipleOf=h)},Hv=(t,e,n,r)=>{n.type="boolean"},Kv=(t,e,n,r)=>{n.not={}},Wv=(t,e,n,r)=>{},Qv=(t,e,n,r)=>{const s=t._zod.def,o=Ll(s.entries);o.every(a=>typeof a=="number")&&(n.type="number"),o.every(a=>typeof a=="string")&&(n.type="string"),n.enum=o},Jv=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Custom types cannot be represented in JSON Schema")},Xv=(t,e,n,r)=>{if(e.unrepresentable==="throw")throw new Error("Transforms cannot be represented in JSON Schema")},Yv=(t,e,n,r)=>{const s=n,o=t._zod.def,{minimum:a,maximum:u}=t._zod.bag;typeof a=="number"&&(s.minItems=a),typeof u=="number"&&(s.maxItems=u),s.type="array",s.items=Oe(o.element,e,{...r,path:[...r.path,"items"]})},eE=(t,e,n,r)=>{var f;const s=n,o=t._zod.def;s.type="object",s.properties={};const a=o.shape;for(const p in a)s.properties[p]=Oe(a[p],e,{...r,path:[...r.path,"properties",p]});const u=new Set(Object.keys(a)),h=new Set([...u].filter(p=>{const g=o.shape[p]._zod;return e.io==="input"?g.optin===void 0:g.optout===void 0}));h.size>0&&(s.required=Array.from(h)),((f=o.catchall)==null?void 0:f._zod.def.type)==="never"?s.additionalProperties=!1:o.catchall?o.catchall&&(s.additionalProperties=Oe(o.catchall,e,{...r,path:[...r.path,"additionalProperties"]})):e.io==="output"&&(s.additionalProperties=!1)},tE=(t,e,n,r)=>{const s=t._zod.def,o=s.inclusive===!1,a=s.options.map((u,h)=>Oe(u,e,{...r,path:[...r.path,o?"oneOf":"anyOf",h]}));o?n.oneOf=a:n.anyOf=a},nE=(t,e,n,r)=>{const s=t._zod.def,o=Oe(s.left,e,{...r,path:[...r.path,"allOf",0]}),a=Oe(s.right,e,{...r,path:[...r.path,"allOf",1]}),u=f=>"allOf"in f&&Object.keys(f).length===1,h=[...u(o)?o.allOf:[o],...u(a)?a.allOf:[a]];n.allOf=h},rE=(t,e,n,r)=>{const s=t._zod.def,o=Oe(s.innerType,e,r),a=e.seen.get(t);e.target==="openapi-3.0"?(a.ref=s.innerType,n.nullable=!0):n.anyOf=[o,{type:"null"}]},sE=(t,e,n,r)=>{const s=t._zod.def;Oe(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},iE=(t,e,n,r)=>{const s=t._zod.def;Oe(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.default=JSON.parse(JSON.stringify(s.defaultValue))},oE=(t,e,n,r)=>{const s=t._zod.def;Oe(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,e.io==="input"&&(n._prefault=JSON.parse(JSON.stringify(s.defaultValue)))},aE=(t,e,n,r)=>{const s=t._zod.def;Oe(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType;let a;try{a=s.catchValue(void 0)}catch{throw new Error("Dynamic catch values are not supported in JSON Schema")}n.default=a},cE=(t,e,n,r)=>{const s=t._zod.def,o=e.io==="input"?s.in._zod.def.type==="transform"?s.out:s.in:s.out;Oe(o,e,r);const a=e.seen.get(t);a.ref=o},uE=(t,e,n,r)=>{const s=t._zod.def;Oe(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType,n.readOnly=!0},lE=(t,e,n,r)=>{const s=t._zod.def;Oe(s.innerType,e,r);const o=e.seen.get(t);o.ref=s.innerType},hE=P("ZodISODateTime",(t,e)=>{py.init(t,e),de.init(t,e)});function fE(t){return yv(hE,t)}const dE=P("ZodISODate",(t,e)=>{my.init(t,e),de.init(t,e)});function pE(t){return vv(dE,t)}const mE=P("ZodISOTime",(t,e)=>{gy.init(t,e),de.init(t,e)});function gE(t){return Ev(mE,t)}const _E=P("ZodISODuration",(t,e)=>{_y.init(t,e),de.init(t,e)});function yE(t){return wv(_E,t)}const vE=(t,e)=>{Zl.init(t,e),t.name="ZodError",Object.defineProperties(t,{format:{value:n=>o_(t,n)},flatten:{value:n=>i_(t,n)},addIssue:{value:n=>{t.issues.push(n),t.message=JSON.stringify(t.issues,qi,2)}},addIssues:{value:n=>{t.issues.push(...n),t.message=JSON.stringify(t.issues,qi,2)}},isEmpty:{get(){return t.issues.length===0}}})},Ke=P("ZodError",vE,{Parent:Error}),EE=xo(Ke),wE=Mo(Ke),TE=Fs(Ke),IE=Us(Ke),AE=u_(Ke),bE=l_(Ke),SE=h_(Ke),RE=f_(Ke),PE=d_(Ke),CE=p_(Ke),kE=m_(Ke),VE=g_(Ke),we=P("ZodType",(t,e)=>(ye.init(t,e),Object.assign(t["~standard"],{jsonSchema:{input:Ps(t,"input"),output:Ps(t,"output")}}),t.toJSONSchema=Bv(t,{}),t.def=e,t.type=e.type,Object.defineProperty(t,"_def",{value:e}),t.check=(...n)=>t.clone(tn(e,{checks:[...e.checks??[],...n.map(r=>typeof r=="function"?{_zod:{check:r,def:{check:"custom"},onattach:[]}}:r)]})),t.clone=(n,r)=>Nt(t,n,r),t.brand=()=>t,t.register=((n,r)=>(n.add(t,r),t)),t.parse=(n,r)=>EE(t,n,r,{callee:t.parse}),t.safeParse=(n,r)=>TE(t,n,r),t.parseAsync=async(n,r)=>wE(t,n,r,{callee:t.parseAsync}),t.safeParseAsync=async(n,r)=>IE(t,n,r),t.spa=t.safeParseAsync,t.encode=(n,r)=>AE(t,n,r),t.decode=(n,r)=>bE(t,n,r),t.encodeAsync=async(n,r)=>SE(t,n,r),t.decodeAsync=async(n,r)=>RE(t,n,r),t.safeEncode=(n,r)=>PE(t,n,r),t.safeDecode=(n,r)=>CE(t,n,r),t.safeEncodeAsync=async(n,r)=>kE(t,n,r),t.safeDecodeAsync=async(n,r)=>VE(t,n,r),t.refine=(n,r)=>t.check(Iw(n,r)),t.superRefine=n=>t.check(Aw(n)),t.overwrite=n=>t.check(An(n)),t.optional=()=>nu(t),t.nullable=()=>ru(t),t.nullish=()=>nu(ru(t)),t.nonoptional=n=>gw(t,n),t.array=()=>cs(t),t.or=n=>iw([t,n]),t.and=n=>aw(t,n),t.transform=n=>su(t,lw(n)),t.default=n=>dw(t,n),t.prefault=n=>mw(t,n),t.catch=n=>yw(t,n),t.pipe=n=>su(t,n),t.readonly=()=>ww(t),t.describe=n=>{const r=t.clone();return tr.add(r,{description:n}),r},Object.defineProperty(t,"description",{get(){var n;return(n=tr.get(t))==null?void 0:n.description},configurable:!0}),t.meta=(...n)=>{if(n.length===0)return tr.get(t);const r=t.clone();return tr.add(r,n[0]),r},t.isOptional=()=>t.safeParse(void 0).success,t.isNullable=()=>t.safeParse(null).success,t)),ah=P("_ZodString",(t,e)=>{zo.init(t,e),we.init(t,e),t._zod.processJSONSchema=(r,s,o)=>qv(t,r,s);const n=t._zod.bag;t.format=n.format??null,t.minLength=n.minimum??null,t.maxLength=n.maximum??null,t.regex=(...r)=>t.check(Pv(...r)),t.includes=(...r)=>t.check(Vv(...r)),t.startsWith=(...r)=>t.check(Dv(...r)),t.endsWith=(...r)=>t.check(Nv(...r)),t.min=(...r)=>t.check(Rs(...r)),t.max=(...r)=>t.check(nh(...r)),t.length=(...r)=>t.check(rh(...r)),t.nonempty=(...r)=>t.check(Rs(1,...r)),t.lowercase=r=>t.check(Cv(r)),t.uppercase=r=>t.check(kv(r)),t.trim=()=>t.check(xv()),t.normalize=(...r)=>t.check(Ov(...r)),t.toLowerCase=()=>t.check(Mv()),t.toUpperCase=()=>t.check(zv()),t.slugify=()=>t.check($v())}),DE=P("ZodString",(t,e)=>{zo.init(t,e),ah.init(t,e),t.email=n=>t.check(Jy(NE,n)),t.url=n=>t.check(nv(OE,n)),t.jwt=n=>t.check(_v(WE,n)),t.emoji=n=>t.check(rv(xE,n)),t.guid=n=>t.check(Kc(Xc,n)),t.uuid=n=>t.check(Xy(ns,n)),t.uuidv4=n=>t.check(Yy(ns,n)),t.uuidv6=n=>t.check(ev(ns,n)),t.uuidv7=n=>t.check(tv(ns,n)),t.nanoid=n=>t.check(sv(ME,n)),t.guid=n=>t.check(Kc(Xc,n)),t.cuid=n=>t.check(iv(zE,n)),t.cuid2=n=>t.check(ov($E,n)),t.ulid=n=>t.check(av(LE,n)),t.base64=n=>t.check(pv(GE,n)),t.base64url=n=>t.check(mv(HE,n)),t.xid=n=>t.check(cv(FE,n)),t.ksuid=n=>t.check(uv(UE,n)),t.ipv4=n=>t.check(lv(jE,n)),t.ipv6=n=>t.check(hv(BE,n)),t.cidrv4=n=>t.check(fv(ZE,n)),t.cidrv6=n=>t.check(dv(qE,n)),t.e164=n=>t.check(gv(KE,n)),t.datetime=n=>t.check(fE(n)),t.date=n=>t.check(pE(n)),t.time=n=>t.check(gE(n)),t.duration=n=>t.check(yE(n))});function Ft(t){return Qy(DE,t)}const de=P("ZodStringFormat",(t,e)=>{he.init(t,e),ah.init(t,e)}),NE=P("ZodEmail",(t,e)=>{iy.init(t,e),de.init(t,e)}),Xc=P("ZodGUID",(t,e)=>{ry.init(t,e),de.init(t,e)}),ns=P("ZodUUID",(t,e)=>{sy.init(t,e),de.init(t,e)}),OE=P("ZodURL",(t,e)=>{oy.init(t,e),de.init(t,e)}),xE=P("ZodEmoji",(t,e)=>{ay.init(t,e),de.init(t,e)}),ME=P("ZodNanoID",(t,e)=>{cy.init(t,e),de.init(t,e)}),zE=P("ZodCUID",(t,e)=>{uy.init(t,e),de.init(t,e)}),$E=P("ZodCUID2",(t,e)=>{ly.init(t,e),de.init(t,e)}),LE=P("ZodULID",(t,e)=>{hy.init(t,e),de.init(t,e)}),FE=P("ZodXID",(t,e)=>{fy.init(t,e),de.init(t,e)}),UE=P("ZodKSUID",(t,e)=>{dy.init(t,e),de.init(t,e)}),jE=P("ZodIPv4",(t,e)=>{yy.init(t,e),de.init(t,e)}),BE=P("ZodIPv6",(t,e)=>{vy.init(t,e),de.init(t,e)}),ZE=P("ZodCIDRv4",(t,e)=>{Ey.init(t,e),de.init(t,e)}),qE=P("ZodCIDRv6",(t,e)=>{wy.init(t,e),de.init(t,e)}),GE=P("ZodBase64",(t,e)=>{Ty.init(t,e),de.init(t,e)}),HE=P("ZodBase64URL",(t,e)=>{Ay.init(t,e),de.init(t,e)}),KE=P("ZodE164",(t,e)=>{by.init(t,e),de.init(t,e)}),WE=P("ZodJWT",(t,e)=>{Ry.init(t,e),de.init(t,e)}),$o=P("ZodNumber",(t,e)=>{Yl.init(t,e),we.init(t,e),t._zod.processJSONSchema=(r,s,o)=>Gv(t,r,s),t.gt=(r,s)=>t.check(Qc(r,s)),t.gte=(r,s)=>t.check(wi(r,s)),t.min=(r,s)=>t.check(wi(r,s)),t.lt=(r,s)=>t.check(Wc(r,s)),t.lte=(r,s)=>t.check(Ei(r,s)),t.max=(r,s)=>t.check(Ei(r,s)),t.int=r=>t.check(Yc(r)),t.safe=r=>t.check(Yc(r)),t.positive=r=>t.check(Qc(0,r)),t.nonnegative=r=>t.check(wi(0,r)),t.negative=r=>t.check(Wc(0,r)),t.nonpositive=r=>t.check(Ei(0,r)),t.multipleOf=(r,s)=>t.check(Jc(r,s)),t.step=(r,s)=>t.check(Jc(r,s)),t.finite=()=>t;const n=t._zod.bag;t.minValue=Math.max(n.minimum??Number.NEGATIVE_INFINITY,n.exclusiveMinimum??Number.NEGATIVE_INFINITY)??null,t.maxValue=Math.min(n.maximum??Number.POSITIVE_INFINITY,n.exclusiveMaximum??Number.POSITIVE_INFINITY)??null,t.isInt=(n.format??"").includes("int")||Number.isSafeInteger(n.multipleOf??.5),t.isFinite=!0,t.format=n.format??null});function QE(t){return Tv($o,t)}const JE=P("ZodNumberFormat",(t,e)=>{Py.init(t,e),$o.init(t,e)});function Yc(t){return Av(JE,t)}const XE=P("ZodBoolean",(t,e)=>{Cy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Hv(t,n,r)});function eu(t){return bv(XE,t)}const YE=P("ZodUnknown",(t,e)=>{ky.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Wv()});function tu(){return Sv(YE)}const ew=P("ZodNever",(t,e)=>{Vy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Kv(t,n,r)});function tw(t){return Rv(ew,t)}const nw=P("ZodArray",(t,e)=>{Dy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Yv(t,n,r,s),t.element=e.element,t.min=(n,r)=>t.check(Rs(n,r)),t.nonempty=n=>t.check(Rs(1,n)),t.max=(n,r)=>t.check(nh(n,r)),t.length=(n,r)=>t.check(rh(n,r)),t.unwrap=()=>t.element});function cs(t,e){return Lv(nw,t,e)}const rw=P("ZodObject",(t,e)=>{Oy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>eE(t,n,r,s),oe(t,"shape",()=>e.shape),t.keyof=()=>cw(Object.keys(t._zod.def.shape)),t.catchall=n=>t.clone({...t._zod.def,catchall:n}),t.passthrough=()=>t.clone({...t._zod.def,catchall:tu()}),t.loose=()=>t.clone({...t._zod.def,catchall:tu()}),t.strict=()=>t.clone({...t._zod.def,catchall:tw()}),t.strip=()=>t.clone({...t._zod.def,catchall:void 0}),t.extend=n=>e_(t,n),t.safeExtend=n=>t_(t,n),t.merge=n=>n_(t,n),t.pick=n=>Xg(t,n),t.omit=n=>Yg(t,n),t.partial=(...n)=>r_(uh,t,n[0]),t.required=(...n)=>s_(lh,t,n[0])});function ch(t,e){const n={type:"object",shape:t??{},...$(e)};return new rw(n)}const sw=P("ZodUnion",(t,e)=>{xy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>tE(t,n,r,s),t.options=e.options});function iw(t,e){return new sw({type:"union",options:t,...$(e)})}const ow=P("ZodIntersection",(t,e)=>{My.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>nE(t,n,r,s)});function aw(t,e){return new ow({type:"intersection",left:t,right:e})}const Hi=P("ZodEnum",(t,e)=>{zy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(r,s,o)=>Qv(t,r,s),t.enum=e.entries,t.options=Object.values(e.entries);const n=new Set(Object.keys(e.entries));t.extract=(r,s)=>{const o={};for(const a of r)if(n.has(a))o[a]=e.entries[a];else throw new Error(`Key ${a} not found in enum`);return new Hi({...e,checks:[],...$(s),entries:o})},t.exclude=(r,s)=>{const o={...e.entries};for(const a of r)if(n.has(a))delete o[a];else throw new Error(`Key ${a} not found in enum`);return new Hi({...e,checks:[],...$(s),entries:o})}});function cw(t,e){const n=Array.isArray(t)?Object.fromEntries(t.map(r=>[r,r])):t;return new Hi({type:"enum",entries:n,...$(e)})}const uw=P("ZodTransform",(t,e)=>{$y.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Xv(t,n),t._zod.parse=(n,r)=>{if(r.direction==="backward")throw new zl(t.constructor.name);n.addIssue=o=>{if(typeof o=="string")n.issues.push(vr(o,n.value,e));else{const a=o;a.fatal&&(a.continue=!1),a.code??(a.code="custom"),a.input??(a.input=n.value),a.inst??(a.inst=t),n.issues.push(vr(a))}};const s=e.transform(n.value,n);return s instanceof Promise?s.then(o=>(n.value=o,n)):(n.value=s,n)}});function lw(t){return new uw({type:"transform",transform:t})}const uh=P("ZodOptional",(t,e)=>{Ly.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>lE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function nu(t){return new uh({type:"optional",innerType:t})}const hw=P("ZodNullable",(t,e)=>{Fy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>rE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function ru(t){return new hw({type:"nullable",innerType:t})}const fw=P("ZodDefault",(t,e)=>{Uy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>iE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeDefault=t.unwrap});function dw(t,e){return new fw({type:"default",innerType:t,get defaultValue(){return typeof e=="function"?e():Ul(e)}})}const pw=P("ZodPrefault",(t,e)=>{jy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>oE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function mw(t,e){return new pw({type:"prefault",innerType:t,get defaultValue(){return typeof e=="function"?e():Ul(e)}})}const lh=P("ZodNonOptional",(t,e)=>{By.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>sE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function gw(t,e){return new lh({type:"nonoptional",innerType:t,...$(e)})}const _w=P("ZodCatch",(t,e)=>{Zy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>aE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType,t.removeCatch=t.unwrap});function yw(t,e){return new _w({type:"catch",innerType:t,catchValue:typeof e=="function"?e:()=>e})}const vw=P("ZodPipe",(t,e)=>{qy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>cE(t,n,r,s),t.in=e.in,t.out=e.out});function su(t,e){return new vw({type:"pipe",in:t,out:e})}const Ew=P("ZodReadonly",(t,e)=>{Gy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>uE(t,n,r,s),t.unwrap=()=>t._zod.def.innerType});function ww(t){return new Ew({type:"readonly",innerType:t})}const Tw=P("ZodCustom",(t,e)=>{Hy.init(t,e),we.init(t,e),t._zod.processJSONSchema=(n,r,s)=>Jv(t,n)});function Iw(t,e={}){return Fv(Tw,t,e)}function Aw(t){return Uv(t)}function bw(t){return Iv($o,t)}const hh=ch({age:Ft().min(1,"â»å¥åå¿é é ç®ã§ã"),gender:Ft().min(1,"â»å¥åå¿é é ç®ã§ã"),area:Ft().min(1,"â»å¥åå¿é é ç®ã§ã"),meate:cs(Ft()).min(1,"â»1ã¤ä»¥ä¸é¸æãã¦ãã ãã"),nowang:cs(Ft()).min(1,"â»1ã¤ä»¥ä¸é¸æãã¦ãã ãã"),futureang:cs(Ft()).min(1,"â»1ã¤ä»¥ä¸é¸æãã¦ãã ãã"),history:Ft().min(1,"â»1ã¤ä»¥ä¸é¸æãã¦ãã ãã"),hosi:bw().refine(t=>t>=1&&t<=5,{message:"â»1ã¤ä»¥ä¸é¸æãã¦ãã ãã"})});ch({time:QE().int(),isSubmit:eu(),yet:eu()});const Sw={apiKey:"AIzaSyCqM_k3F0_KiezoaoYshtC7NSCDsRIpuCM",authDomain:"keepcast.firebaseapp.com",projectId:"keepcast",storageBucket:"keepcast.firebasestorage.app",messagingSenderId:"446279303752",appId:"1:446279303752:web:008b53a2f9148ededfce7d"},Rw=Su(Sw),Pw=Cg(Rw);async function Cw(t){const e=hh.parse(t);try{return await Bg(Rg(Pw,"questionnaires"),{...e,timestamp:qg()}),{success:!0}}catch(n){return console.error("Error saving form data:",n),{success:!1,error:n}}}const jt=iu(0),Er=iu({time:0,isSubmit:!1,yet:!1});var kw=_e("<option> </option>"),Vw=_e('<p class="text-red-500 text-xs text-right"> </p>'),Dw=_e("<option> </option>"),Nw=_e('<p class="text-red-500 text-xs text-right"> </p>'),Ow=_e("<option> </option>"),xw=_e('<p class="text-red-500 text-xs text-right"> </p>'),Mw=_e("<option> </option>"),zw=_e('<p class="text-red-500 text-xs text-right"> </p>'),$w=_e('<p class="text-red-500 text-xs text-right"> </p>'),Lw=_e('<label class="flex items-center ml-5"><input type="checkbox" name="meate" class="size-4"/> </label>'),Fw=_e('<p class="text-red-500 text-xs text-right"> </p>'),Uw=_e('<label class="flex items-center ml-5"><input type="checkbox" name="meate" class="size-4"/> </label>'),jw=_e('<p class="text-red-500 text-xs text-right"> </p>'),Bw=_e('<label class="flex items-center ml-5"><input type="checkbox" name="meate" class="size-4"/> </label>'),Zw=_e('<p class="text-red-500 text-xs text-right"> </p>'),qw=_e('<button type="button"> </button>'),Gw=_e(`<form class="bg-sky-50 w-screen p-5"><div class="flex flex-col gap-5 w-full max-w-md p-5 mx-auto bg-white  rounded-2xl"><label data-field="age">å¹´ä»£ <select class="border-b-black border-b p-2 w-5/6"><option disabled class="hidden text-gray-500">å¹´ä»£ãé¸æãã¦ãã ãã</option><!></select> <!></label> <label data-field="gender">æ§å¥ <select class="border-b-black border-b p-2 w-5/6"><option disabled class="hidden text-gray-500">é¸æãã¦ãã ãã</option><!></select> <!></label> <label data-field="area">å°å <select class="border-b-black border-b p-2 w-5/6"><option disabled class="hidden text-gray-500">é¸æãã¦ãã ãã</option><!></select> <!></label> <label data-field="history">é£æ­´ <select class="border-b-black border-b p-2 w-5/6"><option disabled class="hidden text-gray-500">é¸æãã¦ãã ãã</option><!></select> <!></label> <div class="mt-3" data-field="meate"><div>ãç®å½ã¦<span class="text-red-500 text-xs items-center font-semibold">â»è¤æ°é¸æå¯</span></div> <!> <!></div> <div class="mt-3" data-field="nowang"><div>ãã£ã¦ããé£ã <span class="text-red-500 text-xs items-center font-semibold">â»è¤æ°é¸æå¯</span></div> <!> <!></div> <div class="mt-3" data-field="futureang"><div>ãã£ã¦ã¿ããé£ã <span class="text-red-500 text-xs items-center font-semibold">â»è¤æ°é¸æå¯</span></div> <!> <!></div> <div data-field="hosi" class="mt-3">KEEPCAST2026 æºè¶³åº¦ <span class="text-red-500 text-xs items-center font-semibold">â»å¿é </span> <!></div> <div class="text-5xl grid grid-cols-5 text-gray-300 relative"><!> <input type="number" name="hosi" class="absolute left-1/2 w-1 opacity-0 pointer-events-none"/></div> <button class="active:scale-150 transition-transform
		bg-blue-500 p-5 rounded-xl text-white font-bold" type="submit">åç­</button></div></form>`);function Hw(t,e){Qi(e,!0);const n=()=>eo(Er,"$localdata",r),[r,s]=Yi(),o=[],a=[],u=[];let h=Va({age:"",gender:"",area:"",meate:[],nowang:[],futureang:[],hosi:null,history:""}),f=mu(Va({}));const p=["10ä»£æªæº","10ä»£","20ä»£","30ä»£","40ä»£","50ä»£","60ä»£ä»¥ä¸"],g=["ç·æ§","å¥³æ§","ãã®ä»"],T=[1,2,3,4,5],R=["åæµ·é","æ±å","åé¢æ±","åé¢æ±","æ±æµ·","åé¸","è¿ç¿","ä¸­å½","åå½","ä¹å·","æ²ç¸","æµ·å¤'foreign country'"],S=["éå®å","ã¢ã¦ãã¬ããåå","æ°è£½å","ãã¼ã¯ã·ã§ã¼","ãã­ã¢ã³ã°ã©ã¼","åéã«åã","é£²é£ãã¼ã¹","ã­ãã","ãªã¼ã«","ãªã"],V=["1å¹´æªæº","1å¹´ã3å¹´","3å¹´ã5å¹´","5å¹´ä»¥ä¸"];let N=["ãã¹","ã·ã¼ãã¹","ã¤ã«","ããã¤","ãã°ã­","ãã®ä»ã½ã«ããã£ãã·ã³ã°","ã¨ãªã¢ãã©ã¦ã","ãã¤ãã£ããã©ã¦ã","ãã®ä»"];async function B(x){x.preventDefault();const O=hh.safeParse(h);if(!O.success){Si(f,O.error.flatten().fieldErrors,!0),j(U(f));return}const M=new Date().getTime(),W={...n(),isSubmit:!0,time:M};Er.set(W),localStorage.setItem("user",JSON.stringify(W)),(await Cw(O.data)).success?jt.set(2):alert("ãã¼ã¿ã®ä¿å­ã«å¤±æãã¾ãã")}function F(x){U(f)[x]&&Si(f,{...U(f),[x]:void 0},!0)}function j(x){const O=Object.keys(x)[0];if(!O)return;const M=document.querySelector(`[data-field="${O}"]`);M==null||M.scrollIntoView({behavior:"smooth",block:"center"})}var Z=Gw();to("596gk0",x=>{Cs(()=>{Xi.title="ã¢ã³ã±ã¼ã"})});var H=X(Z),re=X(H),v=Y(X(re));v.__change=()=>F("age");var m=X(v);m.value=m.__value="";var y=Y(m);It(y,17,()=>p,Tt,(x,O)=>{var M=kw(),W=X(M,!0);ee(M);var te={};Pe(()=>{Ce(W,U(O)),te!==(te=U(O))&&(M.value=(M.__value=U(O))??"")}),ie(x,M)}),ee(v);var w=Y(v,2);{var E=x=>{var O=Vw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).age[0])),ie(x,O)};He(w,x=>{U(f).age&&x(E)})}ee(re);var I=Y(re,2),_=Y(X(I));_.__change=()=>F("gender");var pe=X(_);pe.value=pe.__value="";var ot=Y(pe);It(ot,17,()=>g,Tt,(x,O)=>{var M=Dw(),W=X(M,!0);ee(M);var te={};Pe(()=>{Ce(W,U(O)),te!==(te=U(O))&&(M.value=(M.__value=U(O))??"")}),ie(x,M)}),ee(_);var Bs=Y(_,2);{var Zs=x=>{var O=Nw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).gender[0])),ie(x,O)};He(Bs,x=>{U(f).gender&&x(Zs)})}ee(I);var dt=Y(I,2),et=Y(X(dt));et.__change=()=>F("area");var bn=X(et);bn.value=bn.__value="";var Rr=Y(bn);It(Rr,17,()=>R,Tt,(x,O)=>{var M=Ow(),W=X(M,!0);ee(M);var te={};Pe(()=>{Ce(W,U(O)),te!==(te=U(O))&&(M.value=(M.__value=U(O))??"")}),ie(x,M)}),ee(et);var Pr=Y(et,2);{var Cr=x=>{var O=xw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).area[0])),ie(x,O)};He(Pr,x=>{U(f).area&&x(Cr)})}ee(dt);var pt=Y(dt,2),at=Y(X(pt));at.__change=()=>F("history");var Ot=X(at);Ot.value=Ot.__value="";var Sn=Y(Ot);It(Sn,17,()=>V,Tt,(x,O)=>{var M=Mw(),W=X(M,!0);ee(M);var te={};Pe(()=>{Ce(W,U(O)),te!==(te=U(O))&&(M.value=(M.__value=U(O))??"")}),ie(x,M)}),ee(at);var Rn=Y(at,2);{var kr=x=>{var O=zw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).history[0])),ie(x,O)};He(Rn,x=>{U(f).history&&x(kr)})}ee(pt);var Pn=Y(pt,2),Vr=Y(X(Pn),2);{var Dr=x=>{var O=$w(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).meate[0])),ie(x,O)};He(Vr,x=>{U(f).meate&&x(Dr)})}var Cn=Y(Vr,2);It(Cn,17,()=>S,Tt,(x,O)=>{var M=Lw(),W=X(M);Hr(W),W.__change=()=>F("meate");var te,Ue=Y(W);ee(M),Pe(()=>{te!==(te=U(O))&&(W.value=(W.__value=U(O))??""),Ce(Ue,` ${U(O)??""}`)}),ui(o,[],W,()=>(U(O),h.meate),We=>h.meate=We),ie(x,M)}),ee(Pn);var nn=Y(Pn,2),Nr=Y(X(nn),2);{var kn=x=>{var O=Fw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).nowang[0])),ie(x,O)};He(Nr,x=>{U(f).nowang&&x(kn)})}var Vn=Y(Nr,2);It(Vn,17,()=>N,Tt,(x,O)=>{var M=Uw(),W=X(M);Hr(W),W.__change=()=>F("nowang");var te,Ue=Y(W);ee(M),Pe(()=>{te!==(te=U(O))&&(W.value=(W.__value=U(O))??""),Ce(Ue,` ${U(O)??""}`)}),ui(a,[],W,()=>(U(O),h.nowang),We=>h.nowang=We),ie(x,M)}),ee(nn);var rn=Y(nn,2),Te=Y(X(rn),2);{var Re=x=>{var O=jw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).futureang[0])),ie(x,O)};He(Te,x=>{U(f).futureang&&x(Re)})}var sn=Y(Te,2);It(sn,17,()=>N,Tt,(x,O)=>{var M=Bw(),W=X(M);Hr(W),W.__change=()=>F("futureang");var te,Ue=Y(W);ee(M),Pe(()=>{te!==(te=U(O))&&(W.value=(W.__value=U(O))??""),Ce(Ue,` ${U(O)??""}`)}),ui(u,[],W,()=>(U(O),h.futureang),We=>h.futureang=We),ie(x,M)}),ee(rn);var Dn=Y(rn,2),Or=Y(X(Dn),3);{var qs=x=>{var O=Zw(),M=X(O,!0);ee(O),Pe(()=>Ce(M,U(f).hosi[0])),ie(x,O)};He(Or,x=>{U(f).hosi&&x(qs)})}ee(Dn);var mt=Y(Dn,2),Nn=X(mt);It(Nn,17,()=>T,Tt,(x,O)=>{const M=Da(()=>h.hosi??0),W=Da(()=>U(M)>=U(O));var te=qw();let Ue;te.__click=()=>{h.hosi=U(O),F("hosi")};var We=X(te,!0);ee(te),Pe(()=>{Ue=lf(te,1,`text-5xl focus:outline-none bg-transparent border-none
			active:scale-110 transition-transform`,null,Ue,{"text-yellow-400":U(W)}),Ce(We,U(W)?"â":"â")}),ie(x,te)});var On=Y(Nn,2);Hr(On),ee(mt),gu(2),ee(H),ee(Z),_u("submit",Z,B),Gr(v,()=>h.age,x=>h.age=x),Gr(_,()=>h.gender,x=>h.gender=x),Gr(et,()=>h.area,x=>h.area=x),Gr(at,()=>h.history,x=>h.history=x),mf(On,()=>h.hosi,x=>h.hosi=x),ie(t,Z),Ji(),s()}rf(["change","click"]);var Kw=_e('<div class="flex flex-col h-5xl items-center text-center bg-red-50 p-3 m-2 rounded-2xl"><div class="text-lg font-semibold">ã¢ã³ã±ã¼ãã®ãåå<br/> ãããã¨ããããã¾ããã</div> <div class="text-5xl m-5">æ½é¸å¸<br/> </div> <div class="my-5 font-semibold animate-bounce"><div class="text-red-500 text-3xl">ãæ¥½ãã¿æ½é¸ä¼</div> <div class="text-xl">ã¹ã¿ããã«è¦ãã¦ãã ãã</div></div> <div class="relative w-full max-w-md p-2"><img src="https://www.thekeepcast.com/wp/wp-content/uploads/2026/01/MAP2026.2_ol-scaled.jpg" alt="map"/> <div class="absolute bottom-5 left-2 text-red-500 text-5xl animate-ping">â</div></div></div>');function Ww(t,e){Qi(e,!1);const n=()=>eo(Er,"$localdata",r),[r,s]=Yi(),o=n().time,a=String(o).slice(-8);let u=0;const h=300,f=()=>{const S={...n(),yet:!0};Er.set(S),localStorage.setItem("user",JSON.stringify(S)),jt.set(3),window.scroll({top:0,behavior:"smooth"})};function p(S){const V=new Date().getTime(),N=V-u;N<h&&N>0&&f(),u=V}sf();var g=Kw();to("9l8rri",S=>{Cs(()=>{Xi.title="æ½é¸å¸GET"})}),_u("pointerdown",tf,p);var T=Y(X(g),2),R=Y(X(T),2);ee(T),gu(4),ee(g),Pe(()=>Ce(R,` ${a??""}`)),ie(t,g),Ji(),s()}var Qw=_e('<div class="flex flex-col text-center w-screen"><div class=" p-5 m-5 rounded-2xl bg-green-50 "><div>ã¢ã³ã±ã¼ãã«ãååããã ã</div> <div>ãããã¨ããããã¾ãã</div> <div class="text-3xl mt-5 font-extrabold text-red-500">æ½é¸æ¸ã¿</div></div></div>');function Jw(t){var e=Qw();to("1cnu6dk",n=>{Cs(()=>{Xi.title="æ½é¸æ¸"})}),ie(t,e)}var Xw=_e('<div class="h-screen bg-white"></div>'),Yw=_e('<p class="text-red-500 text-center">ç¾å¨ã¯æéå¤ã§ãï¼ååä½ãã¹ãä¸­ï¼</p>');function aT(t,e){Qi(e,!0);const n=()=>eo(jt,"$pageNo",r),[r,s]=Yi();let o=mu(null);function a(){const T=new Date().getHours();Si(o,T>=9&&T<23,!0)}nf(()=>{a();const g=setInterval(a,5e3);return()=>clearInterval(g)}),Oh(()=>{let g=JSON.parse(localStorage.getItem("user")||"{}"),{isSubmit:T=!1,yet:R=!1,time:S}=g;const V=new Date().getTime();if(console.log(V),V-S>480*60*1e3){localStorage.removeItem("user"),jt.set(1);return}if(!T&&!R){jt.set(1);return}if(T&&!R){Er.set(g),jt.set(2);return}if(T&&R){jt.set(3);return}});var u=Wn(),h=Qn(u);{var f=g=>{var T=Xw();ie(g,T)},p=g=>{var T=Wn(),R=Qn(T);{var S=N=>{var B=Wn(),F=Qn(B);{var j=H=>{Hw(H,{})},Z=H=>{var re=Wn(),v=Qn(re);{var m=w=>{Ww(w,{})},y=w=>{var E=Wn(),I=Qn(E);{var _=pe=>{Jw(pe)};He(I,pe=>{n()===3&&pe(_)},!0)}ie(w,E)};He(v,w=>{n()===2?w(m):w(y,!1)},!0)}ie(H,re)};He(F,H=>{n()===1?H(j):H(Z,!1)})}ie(N,B)},V=N=>{var B=Yw();ie(N,B)};He(R,N=>{U(o)?N(S):N(V,!1)},!0)}ie(g,T)};He(h,g=>{U(o)==null?g(f):g(p,!1)})}ie(t,u),Ji(),s()}export{aT as component};
